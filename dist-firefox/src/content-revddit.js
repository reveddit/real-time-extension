!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t,n){"use strict";n.r(t),n.d(t,"INTERVAL_DEFAULT",function(){return u}),n.d(t,"MAX_SYNC_STORAGE_ITEMS_PER_OBJECT",function(){return s}),n.d(t,"MAX_SYNC_STORAGE_CHANGES",function(){return a}),n.d(t,"MAX_OTHER_SUBSCRIPTIONS",function(){return d}),n.d(t,"REMOVED",function(){return f}),n.d(t,"APPROVED",function(){return l}),n.d(t,"LOCKED",function(){return h}),n.d(t,"UNLOCKED",function(){return m}),n.d(t,"EDITED",function(){return b}),n.d(t,"DELETED",function(){return g}),n.d(t,"getObjectNamesForThing",function(){return y}),n.d(t,"markEverythingAsSeen",function(){return w}),n.d(t,"markThingAsSeen",function(){return k}),n.d(t,"setStorageUpdateBadge",function(){return E}),n.d(t,"markIDsAsSeenIfSubscribed",function(){return S}),n.d(t,"subscribeId",function(){return I}),n.d(t,"unsubscribeId",function(){return A}),n.d(t,"getSubscribedIds",function(){return T}),n.d(t,"subscribeUser",function(){return D}),n.d(t,"unsubscribeUser",function(){return C}),n.d(t,"initStorage",function(){return M}),n.d(t,"getSubscribedUsers_withSeenAndUnseenIDs",function(){return L}),n.d(t,"getSubscribedUsers_withUnseenIDs",function(){return P}),n.d(t,"getUnseenIDs_thing",function(){return R}),n.d(t,"getIDs_thing",function(){return U}),n.d(t,"getLocalStorageItems",function(){return x}),n.d(t,"saveLocalStorageItems",function(){return F}),n.d(t,"addLocalStorageItems",function(){return N}),n.d(t,"getItemFromLocalStorage",function(){return $}),n.d(t,"getAllChanges",function(){return B}),n.d(t,"getOptions",function(){return V}),n.d(t,"saveOptions",function(){return G});var r=n(1);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(n,!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=1,s=130,a=100,d=100,f=1,l=2,h=3,m=4,b=5,g=6,v={changes:[],removed:{},approved:{},locked:{},unlocked:{}},p=function(e,t,n){return n?e+"_u_"+t:e+"_"+t},_=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Object.keys(v).forEach(function(r){e[p(r,t,n)]=v[r]})},y=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n={};return Object.keys(v).forEach(function(r){n[r]=p(r,e,t)}),n},O=function(e){var t={};return _(t,e,!0),t},w=function(){return browser.storage.sync.get(null).then(function(e){return Object.keys(e.user_subscriptions).forEach(function(t){k(e,t,!0)}),k(e,"other",!1),E(e)})},k=function(e,t,n){var r=y(t,n);delete r.changes;var o=[];Object.values(r).forEach(function(e){o.push(e)}),o.forEach(function(t){Object.values(e[t]).forEach(function(e){e.u=!1})})},E=function(e){return browser.storage.sync.set(e).then(function(e){return browser.runtime.sendMessage({action:"update-badge"})})},j=function(e,t,n,o,c){var i=e[t[n]];Object.keys(o).forEach(function(e){e in i?i[e].u=!1:c&&(i[e]=new r.ItemForStorage(o[e],!1))})},S=function(e,t,n,r,o,c,i){var u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:function(){},s=y(t,n);delete s.changes;var a=e.user_subscriptions[t];!a&&n||(j(e,s,"removed",r,n),j(e,s,"approved",o,n),j(e,s,"locked",c,n),j(e,s,"unlocked",i,n),chrome.storage.sync.set(e,u))},I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n="other_subscriptions";chrome.storage.sync.get(n,function(o){o[n][e]={t:Math.floor((new Date).getTime()/1e3)};var c=Object(r.trimDict_by_numberValuedAttribute)(o[n],d,"t");chrome.storage.sync.set(i({},n,c),t)})},A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n="other_subscriptions",r=y("other",!1);delete r.changes,chrome.storage.sync.get(Object.values(r).concat(n),function(o){delete o[n][e],Object.values(r).forEach(function(t){e in o[t]&&delete o[t][e]}),chrome.storage.sync.set(o,function(){chrome.runtime.sendMessage({action:"update-badge"},t)})})},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t="other_subscriptions";chrome.storage.sync.get(t,function(n){e(Object.keys(n[t]))})},D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=O(e);chrome.storage.sync.get("user_subscriptions",function(o){var i=o.user_subscriptions;e in i?n("already subscribed to this user"):Object.keys(i).length<5?(i[e]=!0,chrome.storage.sync.set(c({user_subscriptions:i},r),t)):n("maximum number of subscriptions reached")})},C=function(e,t){var n=Object.keys(O(e));chrome.storage.sync.get("user_subscriptions",function(r){var o=r.user_subscriptions;delete o[e],chrome.storage.sync.set({user_subscriptions:o},function(){chrome.storage.sync.remove(n,function(){var n=p("items",e,!0);chrome.runtime.sendMessage({action:"update-badge"}),chrome.storage.local.remove(n,t)})})})},M=function(e){chrome.storage.sync.get(null,function(t){var n;0===Object.keys(t).length?chrome.storage.sync.set((_(n={user_subscriptions:{},other_subscriptions:{},options:{interval:u,custom_clientid:"",removal_status:{track:!0,notify:!0},lock_status:{track:!0,notify:!0}}},"other",!1),n),e):e()})},L=function(e){chrome.storage.sync.get(null,function(t){var n=Object.keys(t.user_subscriptions),r={};n.forEach(function(e){r[e]=U(e,!0,t)}),r.other=U("other",!1,t),e(r,t)})},P=function(e){chrome.storage.sync.get(null,function(t){var n=Object.keys(t.user_subscriptions),r={};n.forEach(function(e){r[e]=R(e,!0,t)}),r.other=R("other",!1,t),e(r)})},R=function(e,t,n){return U(e,t,n).unseen},U=function(e,t,n){var r=n.options.removal_status.track,o=n.options.lock_status.track,c={},i={},u=[],s=y(e,t);return r&&u.push(s.removed,s.approved),o&&u.push(s.locked,s.unlocked),u.forEach(function(e){Object.keys(n[e]).forEach(function(t){n[e][t].u?c[t]=!0:i[t]=!0})}),{unseen:Object.keys(c),seen:Object.keys(i)}},x=function(e,t){var n=p("items",e,t);return browser.storage.local.get(i({},n,{})).then(function(e){return e[n]})},F=function(e,t,n){var r=p("items",e,t);return browser.storage.local.set(i({},r,n))},N=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},o=p("items",t,n);chrome.storage.local.get(i({},o,{}),function(t){var n=t[o];Object.keys(e).forEach(function(t){n[t]=e[t]});var c=n;Object.keys(n).length>500&&(c=trimDictOfItems_by_utcAttribute(n,500,"o")),chrome.storage.local.set(i({},o,c),r)})},$=function(e,t,n,o){var c=p("items",e,t);return c in o&&n in o[c]?new r.LocalStorageItem({object:o[c][n]}):""},B=function(e){chrome.storage.sync.get("user_subscriptions",function(t){var n=[p("changes","other",!1)],r={changes_other:"other"};Object.keys(t.user_subscriptions).forEach(function(e){var t=p("changes",e,!0);n.push(t),r[t]=e}),chrome.storage.sync.get(n,function(t){var o={};n.forEach(function(e){e in t&&t[e].length&&(o[r[e]]=t[e])}),e(o)})})},V=function(e){return browser.storage.sync.get(["user_subscriptions","other_subscriptions","options"]).then(function(t){var n=Object.keys(t.user_subscriptions),r=Object.keys(t.other_subscriptions),o=t.options;return e(n,r,o)}).catch(console.log)},G=function(e,t,n,r,o,c,i){chrome.storage.sync.set({options:{interval:e,custom_clientid:t,removal_status:{track:n,notify:r},lock_status:{track:o,notify:c}}},i)}},function(e,t,n){"use strict";n.r(t),n.d(t,"ALARM_NAME",function(){return u}),n.d(t,"createTab",function(){return s}),n.d(t,"getFullIDsFromURL",function(){return a}),n.d(t,"getFullIDsFromPath",function(){return l}),n.d(t,"reformatRedditText",function(){return h}),n.d(t,"isRemovedItem",function(){return m}),n.d(t,"isComment",function(){return b}),n.d(t,"isRemovedComment",function(){return g}),n.d(t,"isUserDeletedComment",function(){return v}),n.d(t,"isUserDeletedPost",function(){return p}),n.d(t,"isUserDeletedItem",function(){return _}),n.d(t,"isRemovedPost",function(){return y}),n.d(t,"trimDict_by_numberValuedAttribute",function(){return O}),n.d(t,"sortDict_by_numberValuedAttribute",function(){return w}),n.d(t,"ItemForStorage",function(){return k}),n.d(t,"ChangeForStorage",function(){return E}),n.d(t,"LocalStorageItem",function(){return j}),n.d(t,"setAlarm",function(){return S}),n.d(t,"alphaLowerSort",function(){return I}),n.d(t,"goToOptions",function(){return A}),n.d(t,"showError",function(){return T}),n.d(t,"pprint",function(){return D}),n.d(t,"getPrettyTimeLength",function(){return C}),n.d(t,"getPrettyDate",function(){return M}),n.d(t,"createNotification",function(){return L}),n.d(t,"updateBadgeUnseenCount",function(){return P});var r=n(0);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}var u="notifyme",s=function(e){chrome.tabs.create({url:e},function(t){t?chrome.windows.update(t.windowId,{focused:!0}):chrome.windows.create({url:e},function(e){chrome.windows.update(e.id,{focused:!0})})})},a=function(e){var t=e.replace(/https:\/\/[^/]*re(ve)?ddit.com/,"");return l(t)},d=/^\/(r|user)\/([^/]+)\/comments\/([^/]+)\/[^/]*(?:\/([^/?&#]+))?/,f=/^\/user\/([^/?&#]+)\/?/,l=function(e){var t=void 0,n=void 0,r=void 0,o=void 0,c=e.match(d),i=e.match(f);c?("user"===c[1]?r=c[2]:o=c[2],c[3]&&(t="t3_"+c[3]),c[4]&&(n="t1_"+c[4])):i&&(r=i[1]);return[t,n,r,o]},h=function(e){return e.replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/\s+/g," ").substr(0,300)},m=function(e){return b(e.name)?g(e):y(e)},b=function(e){return"t1"===e.substr(0,2)},g=function(e){return("[removed]"===e.body.replace(/\\/g,"")||"[deleted]"===e.body.replace(/\\/g,""))&&"[deleted]"===e.author.replace(/\\/g,"")},v=function(e){return"[deleted]"===e.body.replace(/\\/g,"")&&"[deleted]"===e.author.replace(/\\/g,"")},p=function(e){return!e.is_robot_indexable&&"[deleted]"===e.author.replace(/\\/g,"")},_=function(e){return b(e.name)?v(e):p(e)},y=function(e){return!e.is_robot_indexable},O=function(e,t,n){var r=w(e,n).slice(0,t),o={};return r.forEach(function(e){o[e[0]]=e[1]}),o},w=function(e,t){var n=Object.keys(e).map(function(t){return[t,e[t]]});return n.sort(function(e,n){return n[1][t]-e[1][t]}),n},k=function(){function e(t,n){o(this,e),this.c=t,this.u=n}return i(e,[{key:"getCreatedUTC",value:function(){return this.c}},{key:"getUnseen",value:function(){return this.u}}]),e}(),E=function(){function e(t){var n=t.id,r=void 0===n?null:n,c=t.observed_utc,i=void 0===c?null:c,u=t.change_type,s=void 0===u?null:u,a=t.object,d=void 0===a?null:a;o(this,e),d?(this.i=d.i,this.o=d.o,this.g=d.g):(this.i=r,this.o=i,this.g=s)}return i(e,[{key:"getID",value:function(){return this.i}},{key:"getObservedUTC",value:function(){return this.o}},{key:"getChangeType",value:function(){switch(this.g){case r.REMOVED:return"mod removed";case r.DELETED:return"user deleted";case r.APPROVED:return"approved";case r.LOCKED:return"locked";case r.UNLOCKED:return"unlocked";case r.EDITED:return"edited"}}}]),e}(),j=function(){function e(t){var n=t.item,r=void 0===n?null:n,c=t.observed_utc,i=void 0===c?null:c,u=t.object,s=void 0===u?null:u;if(o(this,e),s)this.t=s.t,this.o=s.o,this.c=s.c;else{var a="";a=b(r.name)?h(r.body):r.title,this.t=a,this.o=i,this.c=r.created_utc}}return i(e,[{key:"setText",value:function(e){this.t=h(e)}},{key:"getText",value:function(){return this.t}},{key:"getObservedUTC",value:function(){return this.o}},{key:"getCreatedUTC",value:function(){return this.c}}]),e}();function S(e){chrome.alarms.clear(u),chrome.alarms.create(u,{delayInMinutes:1,periodInMinutes:e})}function I(e,t){var n=e.toLowerCase(),r=t.toLowerCase();return n<r?-1:n>r?1:0}function A(){chrome.runtime.openOptionsPage?(chrome.runtime.openOptionsPage(),window.close()):window.open(chrome.runtime.getURL("/src/options.html"))}function T(e,t){$('<div class="rr-error">'+e+"</div>").appendTo(t).delay(2400).fadeTo(400,0,function(){$(this).remove()})}function D(e){console.log(JSON.stringify(e,null,"\t"))}var C=function(e){var t=[[60,"second","seconds"],[60,"minute","minutes"],[24,"hour","hours"],[7,"day","days"],[365/12/7,"week","weeks"],[12,"month","months"],[10,"year","years"],[10,"decade","decades"],[10,"century","centuries"],[10,"millenium","millenia"]];if(e<60)return e+" seconds";for(var n=e,r=0;r<t.length;r++){var o=t[r][0],c=t[r][1],i=t[r][2];if(n<o){var u=n-Math.floor(n),s=Math.round(u*t[r-1][0]);if(t[r-1][0]===s&&(n+=1,s=0),(Math.floor(n)>1||0==Math.floor(n))&&(c=i),r>1&&s>0){var a=t[r-1][1];s>1&&(a=t[r-1][2]),c+=", "+String(s)+" "+a}return String(Math.floor(n))+" "+c}n/=o}},M=function(e){var t=Math.floor((new Date).getTime()/1e3)-e;return C(t)+" ago"},L=function(e){var t=e.notificationId,n=e.title,r=e.message;location.protocol.match(/^http/)?chrome.runtime.sendMessage({action:"create-notification",options:{notificationId:t,title:n,message:r}}):chrome.notifications.create(t,{type:"basic",iconUrl:"/icons/128.png",title:n,message:r})},P=function(){location.protocol.match(/^http/)?chrome.runtime.sendMessage({action:"update-badge"}):Object(r.getSubscribedUsers_withUnseenIDs)(function(e){var t=0;Object.values(e).forEach(function(e){t+=e.length});var n=t.toString();0==t&&(n=""),chrome.browserAction.setBadgeBackgroundColor({color:"red"}),chrome.browserAction.setBadgeText({text:n})})}},function(e,t,n){"use strict";n.r(t),n.d(t,"lookupItemsByID",function(){return c}),n.d(t,"lookupItemsByUser",function(){return i}),n.d(t,"handleFetchErrors",function(){return u}),n.d(t,"getRedditData",function(){return s}),n.d(t,"getRedditToken",function(){return a}),n.d(t,"getAuth",function(){return d}),n.d(t,"getLocalAuth",function(){return f}),n.d(t,"getCookie",function(){return l}),n.d(t,"getLocalOrAppAuth",function(){return m}),n.d(t,"getLoggedinUser",function(){return b});var r=n(0);function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var c=function(e,t){var n,r={id:e,raw_json:1},c="?"+Object.keys(r).map(function(e){return"".concat(e,"=").concat(r[e])}).join("&");return(n=window).fetch.apply(n,o(h("api/info",c,t))).then(u).then(s).catch(console.log)},i=function(e,t,n,r,c){var i,a={limit:100,sort:n,raw_json:1};t&&(a.after=t),r&&(a.t=r);var d="user/".concat(e,"/overview.json"),f="?"+Object.keys(a).map(function(e){return"".concat(e,"=").concat(a[e])}).join("&");return(i=window).fetch.apply(i,o(h(d,f,c))).then(u).then(s).catch(console.log)},u=function(e){if(!e.ok)throw Error(e.statusText);return e.json()},s=function(e){if(!e||!e.data||!e.data.children)throw Error("reddit data is not defined");return e.data.children},a=function(e){if(!e||!e.access_token)throw Error("access token is not defined");return e.access_token},d=function(){return Object(r.getOptions)(function(e,t,n){var r="SEw1uvRd6kxFEw";if(n.custom_clientid&&"testing"===(r=n.custom_clientid))return"none";var o={headers:{Authorization:"Basic ".concat(window.btoa("".concat(r,":"))),"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},method:"POST",body:"grant_type=".concat(encodeURIComponent("https://oauth.reddit.com/grants/installed_client"),"&device_id=DO_NOT_TRACK_THIS_DEVICE")};return window.fetch("https://www.reddit.com/api/v1/access_token",o).then(u).then(a).then(function(e){return{headers:{Authorization:"bearer ".concat(e)}}}).catch(console.log)})},f=function(){return window.fetch("https://mod.reddit.com/mail/all").then(function(e){l({url:"https://mod.reddit.com",name:"token"}).then(function(e){if(e){var t=new RegExp("[^A-Za-z0-9+/].*?$"),n=e.value.replace(t,""),r=atob(n),o=JSON.parse(r);return"accessToken"in o&&o.accessToken?{headers:{Authorization:"bearer ".concat(o.accessToken)}}:null}return null})})},l=function(e){var t=e.url,n=e.name;return location.protocol.match(/^http/)?browser.runtime.sendMessage({action:"get-cookie",options:{url:t,name:n}}).then(function(e){return e.cookie}):browser.cookies.get({url:t,name:n})},h=function(e,t,n){if(n&&"none"!==n)return["https://oauth.reddit.com/"+e+t,n];var r="https://www.reddit.com/"+e;return"api/info"===e&&(r+=".json"),[r+=t]},m=function(){return f().then(function(e){return e||d()}).catch(console.log)},b=function(){return window.fetch("https://www.reddit.com/api/me.json").then(u).then(g).catch(console.log)},g=function(e){if(!e||!e.data||!e.data.name)throw Error("reddit username is not defined");return e.data.name}},function(e,t,n){"use strict";n.r(t),n.d(t,"setTextAndFunction_subscribe",function(){return s}),n.d(t,"setTextAndFunction_unsubscribe",function(){return a});var r=n(0),o=n(1),c=n(4),i="unsubscribe-rev",u="subscribe-rev";location.hostname.match(/reveddit\.com$/)&&(i="unsubscribe",u="subscribe");var s=function(e,t,n){return $(t).text(u).off("click").click(function(t){return d(e,t.target,n)})},a=function(e,t,n){return $(t).text(i).off("click").click(function(t){return f(e,t.target,n)})},d=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return Object(r.subscribeId)(e,function(){a(e,t,n),Object(c.b)(e,window.location.href,function(){n&&Object(r.getLocalStorageItems)("other",!1).then(function(t){var c=t[e];if(c){var i=new o.LocalStorageItem({object:c});i.setText(n),t[e]=i,Object(r.saveLocalStorageItems)("other",!1,t)}})})}),!1},f=function(e,t,n){return Object(r.unsubscribeId)(e,function(){s(e,t,n)}),!1}},function(e,t,n){"use strict";n.d(t,"b",function(){return d}),n.d(t,"a",function(){return f});var r=n(2),o=n(0),c=n(1);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=0,s=1,a=2,d=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},o=u;t.match(/^https:\/\/www.reveddit.com/)&&(o=s),chrome.storage.sync.get(null,function(t){Object(r.getAuth)().then(function(r){l([e],"other",!1,r,t,o,{},n)})})},f=function(){chrome.storage.sync.get(null,function(e){var t=Object.keys(e.user_subscriptions),n=Object.keys(e.other_subscriptions);(t.length||n.length)&&Object(r.getAuth)().then(function(n){!function(e,t){var n=Object.keys(t.other_subscriptions);n.length&&l(n,"other",!1,e,t,a)}(n,e),function e(t,n,o){if(t.length){var c=t[0];Object(r.lookupItemsByUser)(c,"","new","",n).then(function(r){if(r){var i=[],u={};r.forEach(function(e){i.push(e.data.name),u[e.data.name]=e.data}),l(i,c,!0,n,o,a,u,function(){e(t.slice(1),n,o)})}})}}(t,n,e)})})};function l(e,t,n,u,s,a){var d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},f=arguments.length>7&&void 0!==arguments[7]?arguments[7]:function(){};Object(r.lookupItemsByID)(e,u).then(function(e){if(e){var r=s.options.removal_status,u=s.options.lock_status,l=Object(o.getObjectNamesForThing)(t,n),m=s[l.removed]||{},b=s[l.approved]||{},g=s[l.locked]||{},v=s[l.unlocked]||{},p=s[l.changes]||[];n||(d={});var _=[],y=[],O=[],w=[];e.forEach(function(e){var t=e.data;n||(d[t.name]=t),Object(c.isRemovedItem)(t)?_.push(t.name):y.push(t.name),t.locked?O.push(t.name):w.push(t.name)});var k={},E=[],j=0;Object(o.getLocalStorageItems)(t,n).then(function(e){var s;r.track&&(j+=h(_,o.REMOVED,"mod removed",m,y,o.APPROVED,"approved",b,p,d,r.notify,k,E,n,a,e)),u.track&&(j+=h(O,o.LOCKED,"locked",g,w,o.UNLOCKED,"unlocked",v,p,d,u.notify,k,E,n,a,e)),j&&E.length&&Object(c.createNotification)({notificationId:t,title:t,message:"".concat(j," new [").concat(E.join(", "),"] actions, click to view")}),chrome.storage.sync.set((i(s={},l.removed,Object(c.trimDict_by_numberValuedAttribute)(m,o.MAX_SYNC_STORAGE_ITEMS_PER_OBJECT,"c")),i(s,l.approved,Object(c.trimDict_by_numberValuedAttribute)(b,o.MAX_SYNC_STORAGE_ITEMS_PER_OBJECT,"c")),i(s,l.locked,Object(c.trimDict_by_numberValuedAttribute)(g,o.MAX_SYNC_STORAGE_ITEMS_PER_OBJECT,"c")),i(s,l.unlocked,Object(c.trimDict_by_numberValuedAttribute)(v,o.MAX_SYNC_STORAGE_ITEMS_PER_OBJECT,"c")),i(s,l.changes,p.slice(-o.MAX_SYNC_STORAGE_CHANGES)),s),function(){Object(c.updateBadgeUnseenCount)(),Object(o.addLocalStorageItems)(k,t,n,f)})})}})}function h(e,t,n,r,i,a,d,f,l,h,m,b,g,v,p,_){var y=[],O=[],w=[],k=Math.floor(new Date/1e3);e.forEach(function(e){var n=h[e];if(v||_[e]||(b[e]=new c.LocalStorageItem({item:n,observed_utc:k})),!(e in r)){var i=!0;if((p===u&&t!==o.REMOVED||p===s)&&(i=!1),r[e]=new c.ItemForStorage(n.created_utc,i),delete f[e],i){var a=t;Object(c.isUserDeletedItem)(n)?(a=o.DELETED,w.push(e)):y.push(e),l.push(new c.ChangeForStorage({id:e,observed_utc:k,change_type:a}))}v&&(b[e]=new c.LocalStorageItem({item:n,observed_utc:k}))}}),i.forEach(function(e){var t=h[e];v||_[e]||(b[e]=new c.LocalStorageItem({item:t,observed_utc:k})),e in r?(f[e]=new c.ItemForStorage(t.created_utc,!0),delete r[e],l.push(new c.ChangeForStorage({id:e,observed_utc:k,change_type:a})),O.push(e),b[e]=new c.LocalStorageItem({item:t,observed_utc:k})):f[e]=new c.ItemForStorage(t.created_utc,!1)});var E=y.length+O.length+w.length;return m&&E&&(y.length&&g.push(n),w.length&&g.push("user deleted"),O.length&&g.push(d)),E}},,,function(e,t,n){"use strict";n.r(t),n.d(t,"revdditModifications",function(){return c});var r=n(0),o=n(3),c=function(e,t,n,o){var c,a,d,f,l;(n||o)&&(c="numItemsLoaded",a=document.querySelector(".main"),d="data-numitemsloaded",f=1,l=function(){!function(e,t,n){var o=s(".comment.removed, .post.removed, .comment.deleted, .post.deleted"),c=s(".comment:not(.removed), .post:not(.removed)"),i=s(".comment.locked, .post.locked"),u=s(".comment:not(.locked)");Object(r.markIDsAsSeenIfSubscribed)(e,t,n,o,c,i,u,function(e){chrome.runtime.sendMessage({action:"update-badge"})})}(e,t,n)},new MutationObserver(function(e){var t=document.getElementById(c);t&&t.getAttribute(d)>=f&&(this.disconnect(),l())}).observe(a||document,{childList:!0,subtree:!0}));$(document).arrive(".comment-body-and-links",function(t){i([t],e.other_subscriptions)}),i($(".comment-body-and-links"),e.other_subscriptions),$(document).arrive(".post:not(.deleted)",function(t){u([t],e.other_subscriptions)}),setTimeout(function(){u($(".post:not(.deleted)"),e.other_subscriptions)},2e3)},i=function(e,t){$(e).each(function(e,n){var r=n.parentNode;if(!r.classList.contains("deleted")){var c=r.id,i=r.querySelector(".comment-links"),u="",s=r.querySelector(".comment-body");s&&c.match(/^t1_/)&&(u=s.textContent);var a=Object(o.setTextAndFunction_subscribe)(c,$('<a href="">')[0],u);c in t&&(a=Object(o.setTextAndFunction_unsubscribe)(c,$('<a href="">')[0],u)),$(i).append(a)}})},u=function(e,t){$(e).each(function(e,n){var r=n.id,c=n.querySelector(".post-links"),i=Object(o.setTextAndFunction_subscribe)(r,$('<a href="">')[0]);r in t&&(i=Object(o.setTextAndFunction_unsubscribe)(r,$('<a href="">')[0])),$(c).append(i)})};function s(e){var t={};return $(e).each(function(){var e=this.getAttribute("id");t[e]=this.getAttribute("data-created_utc")}),t}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NyYy9zdG9yYWdlLmpzIiwid2VicGFjazovLy8uL3NyYy9zcmMvY29tbW9uLmpzIiwid2VicGFjazovLy8uL3NyYy9zcmMvcmVxdWVzdHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NyYy9jb250ZW50LWNvbW1vbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc3JjL21vbml0b3JpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NyYy9jb250ZW50LXJldmRkaXQuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJJTlRFUlZBTF9ERUZBVUxUIiwiTUFYX1NZTkNfU1RPUkFHRV9JVEVNU19QRVJfT0JKRUNUIiwiTUFYX1NZTkNfU1RPUkFHRV9DSEFOR0VTIiwiTUFYX09USEVSX1NVQlNDUklQVElPTlMiLCJSRU1PVkVEIiwiQVBQUk9WRUQiLCJMT0NLRUQiLCJVTkxPQ0tFRCIsIkVESVRFRCIsIkRFTEVURUQiLCJ0cmFja1R5cGVzIiwiY2hhbmdlcyIsInJlbW92ZWQiLCJhcHByb3ZlZCIsImxvY2tlZCIsInVubG9ja2VkIiwiZ2V0T2JqZWN0TmFtZSIsInR5cGUiLCJ0aGluZyIsImlzVXNlciIsImFkZFRyYWNrVHlwZXMiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJrZXlzIiwiZm9yRWFjaCIsImdldE9iamVjdE5hbWVzRm9yVGhpbmciLCJuYW1lcyIsImdldFVzZXJJbml0IiwidXNlciIsInJlc3VsdCIsIm1hcmtFdmVyeXRoaW5nQXNTZWVuIiwiYnJvd3NlciIsInN0b3JhZ2UiLCJzeW5jIiwidGhlbiIsInVzZXJfc3Vic2NyaXB0aW9ucyIsIm1hcmtUaGluZ0FzU2VlbiIsInNldFN0b3JhZ2VVcGRhdGVCYWRnZSIsImZ1bGxLZXluYW1lcyIsInZhbHVlcyIsImZ1bGxLZXluYW1lIiwicHVzaCIsIml0ZW0iLCJ1Iiwic2V0IiwicmVzIiwicnVudGltZSIsInNlbmRNZXNzYWdlIiwiYWN0aW9uIiwibWFya1NlZW5Gb3JTdG9yYWdlS2V5Iiwic3RvcmFnZV9rZXlzIiwiaWRzIiwiaXNfdXNlciIsInN0b3JhZ2VfaXRlbSIsImlkIiwiSXRlbUZvclN0b3JhZ2UiLCJtYXJrSURzQXNTZWVuSWZTdWJzY3JpYmVkIiwicmVtb3ZlZF9pZHMiLCJhcHByb3ZlZF9pZHMiLCJsb2NrZWRfaWRzIiwidW5sb2NrZWRfaWRzIiwiY2FsbGJhY2siLCJ1c2VyX3N1YnNjcmliZWQiLCJjaHJvbWUiLCJzdWJzY3JpYmVJZCIsIk1hdGgiLCJmbG9vciIsIkRhdGUiLCJnZXRUaW1lIiwiaXRlbXNUb1NhdmUiLCJ0cmltRGljdF9ieV9udW1iZXJWYWx1ZWRBdHRyaWJ1dGUiLCJfZGVmaW5lUHJvcGVydHkiLCJ1bnN1YnNjcmliZUlkIiwibWFpbktleSIsIm90aGVyS2V5cyIsImNvbmNhdCIsImdldFN1YnNjcmliZWRJZHMiLCJzdWJzY3JpYmVVc2VyIiwiY2FsbGJhY2tTdWNjZXNzIiwiY2FsbGJhY2tFcnJvciIsInVzZXJJbml0IiwiX29iamVjdFNwcmVhZCIsInVuc3Vic2NyaWJlVXNlciIsInVzZXJLZXlzIiwicmVtb3ZlIiwidXNlcktleV9sb2NhbFN0b3JhZ2UiLCJsb2NhbCIsImluaXRTdG9yYWdlIiwib3RoZXJfc3Vic2NyaXB0aW9ucyIsIm9wdGlvbnMiLCJpbnRlcnZhbCIsImN1c3RvbV9jbGllbnRpZCIsInJlbW92YWxfc3RhdHVzIiwidHJhY2siLCJub3RpZnkiLCJsb2NrX3N0YXR1cyIsImdldFN1YnNjcmliZWRVc2Vyc193aXRoU2VlbkFuZFVuc2VlbklEcyIsInVzZXJzIiwidXNlcnNfd2l0aElEcyIsImdldElEc190aGluZyIsImdldFN1YnNjcmliZWRVc2Vyc193aXRoVW5zZWVuSURzIiwiZ2V0VW5zZWVuSURzX3RoaW5nIiwidHJhY2tfcmVtb3ZhbCIsInRyYWNrX2xvY2siLCJ1bnNlZW5JRHMiLCJzZWVuSURzIiwidHlwZXMiLCJ1bnNlZW4iLCJzZWVuIiwiZ2V0TG9jYWxTdG9yYWdlSXRlbXMiLCJrZXlfbG9jYWxTdG9yYWdlIiwibG9jYWxTdG9yYWdlSXRlbXMiLCJzYXZlTG9jYWxTdG9yYWdlSXRlbXMiLCJhZGRMb2NhbFN0b3JhZ2VJdGVtcyIsIml0ZW1zIiwic3RvcmVkSXRlbXMiLCJ0cmltRGljdE9mSXRlbXNfYnlfdXRjQXR0cmlidXRlIiwiZ2V0SXRlbUZyb21Mb2NhbFN0b3JhZ2UiLCJsb2NhbFN0b3JhZ2UiLCJMb2NhbFN0b3JhZ2VJdGVtIiwiZ2V0QWxsQ2hhbmdlcyIsImtleVRvVXNlcl9sb29rdXAiLCJjaGFuZ2VzX290aGVyIiwicmVzMiIsImNoYW5nZXNCeVVzZXIiLCJnZXRPcHRpb25zIiwib3RoZXJzIiwiY29uc29sZSIsImxvZyIsInNhdmVPcHRpb25zIiwicmVtb3ZlZF90cmFjayIsInJlbW92ZWRfbm90aWZ5IiwibG9ja2VkX3RyYWNrIiwibG9ja2VkX25vdGlmeSIsIkFMQVJNX05BTUUiLCJjcmVhdGVUYWIiLCJ1cmwiLCJ0YWJzIiwidGFiIiwid2luZG93cyIsInVwZGF0ZSIsIndpbmRvd0lkIiwiZm9jdXNlZCIsIndpbiIsImdldEZ1bGxJRHNGcm9tVVJMIiwicGF0aCIsInJlcGxhY2UiLCJnZXRGdWxsSURzRnJvbVBhdGgiLCJyZWdleF9wYyIsInJlZ2V4X3VzZXIiLCJwb3N0SUQiLCJjb21tZW50SUQiLCJzdWJyZWRkaXQiLCJtYXRjaGVzX3BjIiwibWF0Y2giLCJtYXRjaGVzX3VzZXIiLCJyZWZvcm1hdFJlZGRpdFRleHQiLCJib2R5Iiwic3Vic3RyIiwiaXNSZW1vdmVkSXRlbSIsImlzQ29tbWVudCIsImlzUmVtb3ZlZENvbW1lbnQiLCJpc1JlbW92ZWRQb3N0IiwiYXV0aG9yIiwiaXNVc2VyRGVsZXRlZENvbW1lbnQiLCJpc1VzZXJEZWxldGVkUG9zdCIsImlzX3JvYm90X2luZGV4YWJsZSIsImlzVXNlckRlbGV0ZWRJdGVtIiwiZGljdCIsIm1heE51bUl0ZW1zIiwibnVtYmVyVmFsdWVkQXR0cmlidXRlIiwic2hvcnRlbmVkQXJyYXkiLCJzb3J0RGljdF9ieV9udW1iZXJWYWx1ZWRBdHRyaWJ1dGUiLCJzbGljZSIsIm5ld0RpY3QiLCJhcnJheSIsIm1hcCIsInNvcnQiLCJhIiwiYiIsImNyZWF0ZWRfdXRjIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl9jcmVhdGVDbGFzcyIsIkNoYW5nZUZvclN0b3JhZ2UiLCJfcmVmIiwiX3JlZiRpZCIsIl9yZWYkb2JzZXJ2ZWRfdXRjIiwib2JzZXJ2ZWRfdXRjIiwiX3JlZiRjaGFuZ2VfdHlwZSIsImNoYW5nZV90eXBlIiwiX3JlZiRvYmplY3QiLCJnIiwiX3JlZjIiLCJfcmVmMiRpdGVtIiwiX3JlZjIkb2JzZXJ2ZWRfdXRjIiwiX3JlZjIkb2JqZWN0IiwidGV4dCIsInRpdGxlIiwic2V0QWxhcm0iLCJwZXJpb2RJbk1pbnV0ZXMiLCJhbGFybXMiLCJjbGVhciIsImRlbGF5SW5NaW51dGVzIiwiYWxwaGFMb3dlclNvcnQiLCJ0ZXh0QSIsInRvTG93ZXJDYXNlIiwidGV4dEIiLCJnb1RvT3B0aW9ucyIsIm9wZW5PcHRpb25zUGFnZSIsIndpbmRvdyIsImNsb3NlIiwib3BlbiIsImdldFVSTCIsInNob3dFcnJvciIsIm1lc3NhZ2UiLCJzZWxlY3RvciIsIiQiLCJhcHBlbmRUbyIsImRlbGF5IiwiZmFkZVRvIiwicHByaW50Iiwib2JqIiwiSlNPTiIsInN0cmluZ2lmeSIsImdldFByZXR0eVRpbWVMZW5ndGgiLCJzZWNvbmRzIiwidGhyZXNob2xkcyIsInRpbWUiLCJkaXZpc29yIiwidGV4dFBsdXJhbCIsImV4dHJhIiwicHJldlVuaXRUaW1lIiwicm91bmQiLCJyZW1haW5UZXh0IiwiU3RyaW5nIiwiZ2V0UHJldHR5RGF0ZSIsImNyZWF0ZWRVVEMiLCJjcmVhdGVOb3RpZmljYXRpb24iLCJfcmVmMyIsIm5vdGlmaWNhdGlvbklkIiwibG9jYXRpb24iLCJwcm90b2NvbCIsIm5vdGlmaWNhdGlvbnMiLCJpY29uVXJsIiwidXBkYXRlQmFkZ2VVbnNlZW5Db3VudCIsInVzZXJzVW5zZWVuSURzIiwidG90YWwiLCJ0b1N0cmluZyIsImJyb3dzZXJBY3Rpb24iLCJzZXRCYWRnZUJhY2tncm91bmRDb2xvciIsImNvbG9yIiwic2V0QmFkZ2VUZXh0IiwibG9va3VwSXRlbXNCeUlEIiwiYXV0aCIsIl93aW5kb3ciLCJwYXJhbXMiLCJyYXdfanNvbiIsInNlYXJjaCIsImsiLCJqb2luIiwiZmV0Y2giLCJhcHBseSIsIl90b0NvbnN1bWFibGVBcnJheSIsImdldEZldGNoUGFyYW1zIiwiaGFuZGxlRmV0Y2hFcnJvcnMiLCJnZXRSZWRkaXREYXRhIiwibG9va3VwSXRlbXNCeVVzZXIiLCJhZnRlciIsInRpbWVTcGFuIiwiX3dpbmRvdzIiLCJsaW1pdCIsInJlc3BvbnNlIiwib2siLCJFcnJvciIsInN0YXR1c1RleHQiLCJqc29uIiwiZGF0YSIsImNoaWxkcmVuIiwiZ2V0UmVkZGl0VG9rZW4iLCJhY2Nlc3NfdG9rZW4iLCJnZXRBdXRoIiwidXNlX3RoaXNfY2xpZW50SUQiLCJ0b2tlbkluaXQiLCJoZWFkZXJzIiwiQXV0aG9yaXphdGlvbiIsImJ0b2EiLCJDb250ZW50LVR5cGUiLCJtZXRob2QiLCJlbmNvZGVVUklDb21wb25lbnQiLCJ0b2tlbiIsImdldExvY2FsQXV0aCIsImdldENvb2tpZSIsImNvb2tpZSIsImludmFsaWRDaGFyIiwiUmVnRXhwIiwiYmFzZTY0Q29va2llIiwidG9rZW5EYXRhIiwiYXRvYiIsInRva2VucyIsInBhcnNlIiwiYWNjZXNzVG9rZW4iLCJjb29raWVzIiwiZ2V0TG9jYWxPckFwcEF1dGgiLCJnZXRMb2dnZWRpblVzZXIiLCJnZXRSZWRkaXRVc2VybmFtZSIsIl9fd2VicGFja19leHBvcnRzX18iLCJzZXRUZXh0QW5kRnVuY3Rpb25fc3Vic2NyaWJlIiwic2V0VGV4dEFuZEZ1bmN0aW9uX3Vuc3Vic2NyaWJlIiwiX3N0b3JhZ2VfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyIsIl9jb21tb25fanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyIsIl9tb25pdG9yaW5nX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18iLCJVTlNVQlNDUklCRV9URVhUIiwiU1VCU0NSSUJFX1RFWFQiLCJob3N0bmFtZSIsImVsZW1lbnQiLCJjb21tZW50Qm9keSIsIm9mZiIsImNsaWNrIiwiZXZlbnRPYmoiLCJzdWJzY3JpYmVJZF9jaGFuZ2VUZXh0IiwidGFyZ2V0IiwidW5zdWJzY3JpYmVJZF9jaGFuZ2VUZXh0Iiwic2V0Q3VycmVudFN0YXRlRm9ySWQiLCJocmVmIiwiaXRlbU9iaiIsInNldFRleHQiLCJTVUJTQ1JJQkVEX0ZST01fUkVERElUIiwiU1VCU0NSSUJFRF9GUk9NX1JFVkVERElUIiwiU1VCU0NSSUJFRF9GUk9NX05BIiwic3Vic2NyaWJlZEZyb21VUkwiLCJzdWJzY3JpYmVkRnJvbSIsImNoZWNrRm9yQ2hhbmdlc190aGluZ19ieUlkIiwiY2hlY2tGb3JDaGFuZ2VzIiwib3RoZXIiLCJjaGVja0ZvckNoYW5nZXNfb3RoZXIiLCJjaGVja0ZvckNoYW5nZXNfdXNlcnMiLCJpdGVtTG9va3VwIiwia25vd25fcmVtb3ZlZCIsImtub3duX2FwcHJvdmVkIiwia25vd25fbG9ja2VkIiwia25vd25fdW5sb2NrZWQiLCJpdGVtV3JhcCIsIm5ld0xvY2FsU3RvcmFnZUl0ZW1zIiwiY2hhbmdlVHlwZXMiLCJudW1fY2hhbmdlcyIsImV4aXN0aW5nTG9jYWxTdG9yYWdlSXRlbXMiLCJfY2hyb21lJHN0b3JhZ2Ukc3luYyQiLCJtYXJrQ2hhbmdlcyIsImFsZXJ0X2N1cnJlbnRfbGlzdCIsImFsZXJ0X3R5cGUiLCJhbGVydF90ZXh0IiwiYWxlcnRfa25vd25faGFzaCIsIm5vcm1hbF9jdXJyZW50X2xpc3QiLCJub3JtYWxfdHlwZSIsIm5vcm1hbF90ZXh0Iiwibm9ybWFsX2tub3duX2hhc2giLCJhbGVydF91bnNlZW5faWRzIiwibm9ybWFsX3Vuc2Vlbl9pZHMiLCJhbGVydF91c2VyRGVsZXRlZF91bnNlZW5faWRzIiwibm93IiwibWFya1Vuc2VlbiIsImFsZXJ0X3R5cGVfdmFyIiwicmV2ZGRpdE1vZGlmaWNhdGlvbnMiLCJfY29udGVudF9jb21tb25fanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyIsImlzVXNlclBhZ2UiLCJpc0luZm9QYWdlIiwicGFyZW50IiwiYXR0cmlidXRlIiwibWluQXR0cmlidXRlVmFsdWUiLCJkb25lIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwic2Vlbl9yZW1vdmVkX2lkcyIsImdldElEc0hhc2hGcm9tU2VsZWN0b3IiLCJzZWVuX2FwcHJvdmVkX2lkcyIsInNlZW5fbG9ja2VkX2lkcyIsInNlZW5fdW5sb2NrZWRfaWRzIiwiZmluZElEc0ZvclVzZXJBbmRNYXJrIiwiTXV0YXRpb25PYnNlcnZlciIsIm11dGF0aW9ucyIsImVsIiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRBdHRyaWJ1dGUiLCJkaXNjb25uZWN0Iiwib2JzZXJ2ZSIsImNoaWxkTGlzdCIsInN1YnRyZWUiLCJhcnJpdmUiLCJhZGRTdWJzY3JpYmVMaW5rc19yZXZkZGl0X2NvbW1lbnRzIiwiYWRkU3Vic2NyaWJlTGlua3NfcmV2ZGRpdF9wb3N0cyIsInNldFRpbWVvdXQiLCJlbGVtZW50cyIsInN1YnNjcmlwdGlvbnMiLCJlYWNoIiwiaWR4IiwidGFyZ2V0ZWRFbGVtZW50IiwicGFyZW50Tm9kZSIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwibGlua3MiLCJib2R5RWxlbWVudCIsInRleHRDb250ZW50IiwiJG5ld0xpbmsiLCJhcHBlbmQiLCJoYXNoIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlYixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8sS0FRdkRyQixFQUFvQnNCLEVBQUksU0FBU0QsRUFBT0UsR0FFdkMsR0FEVSxFQUFQQSxJQUFVRixFQUFRckIsRUFBb0JxQixJQUMvQixFQUFQRSxFQUFVLE9BQU9GLEVBQ3BCLEdBQVcsRUFBUEUsR0FBOEIsaUJBQVZGLEdBQXNCQSxHQUFTQSxFQUFNRyxXQUFZLE9BQU9ILEVBQ2hGLElBQUlJLEVBQUtYLE9BQU9ZLE9BQU8sTUFHdkIsR0FGQTFCLEVBQW9Ca0IsRUFBRU8sR0FDdEJYLE9BQU9DLGVBQWVVLEVBQUksVUFBVyxDQUFFVCxZQUFZLEVBQU1LLE1BQU9BLElBQ3RELEVBQVBF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YUFBYSxzQkFFMUJzQiIsImZpbGUiOiJjb250ZW50LXJldmRkaXQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNyk7XG4iLCJpbXBvcnQge2FscGhhTG93ZXJTb3J0LCBJdGVtRm9yU3RvcmFnZSwgTG9jYWxTdG9yYWdlSXRlbSwgdHJpbURpY3RfYnlfbnVtYmVyVmFsdWVkQXR0cmlidXRlfSBmcm9tICcuL2NvbW1vbi5qcydcblxuZXhwb3J0IGNvbnN0IElOVEVSVkFMX0RFRkFVTFQgPSAxO1xuXG4vLyBUaGVzZSBsaW1pdHMgYXJlIHNldCB3aXRoIGNvbnNpZGVyYXRpb24gZm9yIENocm9tZSdzIHN5bmMgJiBsb2NhbCBzdG9yYWdlIGxpbWl0cyxcbi8vIGFuZCBmb3IgdGhlIG9iamVjdHMgc3RvcmVkIGJ5IHRoZSBleHRlbnNpb25cbmNvbnN0IE1BWF9TVUJTQ1JJUFRJT05TID0gNTtcbmNvbnN0IE1BWF9MT0NBTF9TVE9SQUdFX0lURU1TX1BFUl9PQkpFQ1QgPSA1MDBcbmV4cG9ydCBjb25zdCBNQVhfU1lOQ19TVE9SQUdFX0lURU1TX1BFUl9PQkpFQ1QgPSAxMzBcbmV4cG9ydCBjb25zdCBNQVhfU1lOQ19TVE9SQUdFX0NIQU5HRVMgPSAxMDBcbmV4cG9ydCBjb25zdCBNQVhfT1RIRVJfU1VCU0NSSVBUSU9OUyA9IDEwMFxuXG5leHBvcnQgY29uc3QgUkVNT1ZFRCA9IDFcbmV4cG9ydCBjb25zdCBBUFBST1ZFRCA9IDJcbmV4cG9ydCBjb25zdCBMT0NLRUQgPSAzXG5leHBvcnQgY29uc3QgVU5MT0NLRUQgPSA0XG5leHBvcnQgY29uc3QgRURJVEVEID0gNVxuZXhwb3J0IGNvbnN0IERFTEVURUQgPSA2XG5cbmNvbnN0IHRyYWNrVHlwZXMgPSB7J2NoYW5nZXMnOiBbXSwgJ3JlbW92ZWQnOiB7fSwgJ2FwcHJvdmVkJzoge30sICdsb2NrZWQnOiB7fSwgJ3VubG9ja2VkJzoge319O1xuXG5jb25zdCBnZXRPYmplY3ROYW1lID0gKHR5cGUsIHRoaW5nLCBpc1VzZXIpID0+IHtcbiAgICBpZiAoaXNVc2VyKSB7XG4gICAgICAgIHJldHVybiB0eXBlKydfdV8nK3RoaW5nXG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHR5cGUrJ18nK3RoaW5nXG4gICAgfVxufVxuXG5jb25zdCBhZGRUcmFja1R5cGVzID0gKG9iamVjdCwgdGhpbmcsIGlzVXNlcj10cnVlKSA9PiB7XG4gICAgT2JqZWN0LmtleXModHJhY2tUeXBlcykuZm9yRWFjaCh0eXBlID0+IHtcbiAgICAgICAgb2JqZWN0W2dldE9iamVjdE5hbWUodHlwZSwgdGhpbmcsIGlzVXNlcildID0gdHJhY2tUeXBlc1t0eXBlXVxuICAgIH0pXG59XG5cbmV4cG9ydCBjb25zdCBnZXRPYmplY3ROYW1lc0ZvclRoaW5nID0gKHRoaW5nLCBpc1VzZXI9dHJ1ZSkgPT4ge1xuICAgIGNvbnN0IG5hbWVzID0ge31cbiAgICBPYmplY3Qua2V5cyh0cmFja1R5cGVzKS5mb3JFYWNoKHR5cGUgPT4ge1xuICAgICAgICBuYW1lc1t0eXBlXSA9IGdldE9iamVjdE5hbWUodHlwZSwgdGhpbmcsIGlzVXNlcilcbiAgICB9KVxuICAgIHJldHVybiBuYW1lc1xufVxuXG5jb25zdCBnZXRVc2VySW5pdCA9ICh1c2VyKSA9PiB7XG4gICAgY29uc3QgcmVzdWx0ID0ge31cbiAgICBhZGRUcmFja1R5cGVzKHJlc3VsdCwgdXNlciwgdHJ1ZSlcbiAgICByZXR1cm4gcmVzdWx0XG59XG5cbmNvbnN0IGdldFN0b3JhZ2VJbml0ID0gKCkgPT4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgICAgdXNlcl9zdWJzY3JpcHRpb25zOiB7fSxcbiAgICAgICAgb3RoZXJfc3Vic2NyaXB0aW9uczoge30sXG4gICAgICAgIG9wdGlvbnM6IHtpbnRlcnZhbDogSU5URVJWQUxfREVGQVVMVCwgY3VzdG9tX2NsaWVudGlkOiAnJywgcmVtb3ZhbF9zdGF0dXM6IHt0cmFjazogdHJ1ZSwgbm90aWZ5OiB0cnVlfSwgbG9ja19zdGF0dXM6IHt0cmFjazogdHJ1ZSwgbm90aWZ5OiB0cnVlfX1cbiAgICB9XG4gICAgYWRkVHJhY2tUeXBlcyhyZXN1bHQsICdvdGhlcicsIGZhbHNlKVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCBjb25zdCBtYXJrRXZlcnl0aGluZ0FzU2VlbiA9ICgpID0+IHtcbiAgICByZXR1cm4gYnJvd3Nlci5zdG9yYWdlLnN5bmMuZ2V0KG51bGwpXG4gICAgLnRoZW4oc3RvcmFnZSA9PiB7XG4gICAgICAgIGNvbnN0IHVzZXJzID0gT2JqZWN0LmtleXMoc3RvcmFnZS51c2VyX3N1YnNjcmlwdGlvbnMpO1xuICAgICAgICBjb25zdCBhbGxLZXlzID0gW11cbiAgICAgICAgdXNlcnMuZm9yRWFjaCh1c2VyID0+IHtcbiAgICAgICAgICAgIG1hcmtUaGluZ0FzU2VlbihzdG9yYWdlLCB1c2VyLCB0cnVlKVxuICAgICAgICB9KVxuICAgICAgICBtYXJrVGhpbmdBc1NlZW4oc3RvcmFnZSwgJ290aGVyJywgZmFsc2UpXG4gICAgICAgIHJldHVybiBzZXRTdG9yYWdlVXBkYXRlQmFkZ2Uoc3RvcmFnZSlcbiAgICB9KVxufVxuXG5leHBvcnQgY29uc3QgbWFya1RoaW5nQXNTZWVuID0gKHN0b3JhZ2UsIHRoaW5nLCBpc1VzZXIpID0+IHtcbiAgICBjb25zdCBrZXlzID0gZ2V0T2JqZWN0TmFtZXNGb3JUaGluZyh0aGluZywgaXNVc2VyKVxuICAgIGRlbGV0ZSBrZXlzWydjaGFuZ2VzJ11cbiAgICBjb25zdCBmdWxsS2V5bmFtZXMgPSBbXVxuICAgIE9iamVjdC52YWx1ZXMoa2V5cykuZm9yRWFjaChmdWxsS2V5bmFtZSA9PiB7XG4gICAgICAgIGZ1bGxLZXluYW1lcy5wdXNoKGZ1bGxLZXluYW1lKVxuICAgIH0pXG4gICAgZnVsbEtleW5hbWVzLmZvckVhY2goZnVsbEtleW5hbWUgPT4ge1xuICAgICAgICBPYmplY3QudmFsdWVzKHN0b3JhZ2VbZnVsbEtleW5hbWVdKS5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICAgICAgaXRlbS51ID0gZmFsc2VcbiAgICAgICAgfSlcbiAgICB9KVxufVxuXG5leHBvcnQgY29uc3Qgc2V0U3RvcmFnZVVwZGF0ZUJhZGdlID0gKHN0b3JhZ2UpID0+IHtcbiAgICByZXR1cm4gYnJvd3Nlci5zdG9yYWdlLnN5bmMuc2V0KHN0b3JhZ2UpXG4gICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgcmV0dXJuIGJyb3dzZXIucnVudGltZS5zZW5kTWVzc2FnZSh7YWN0aW9uOiAndXBkYXRlLWJhZGdlJ30pXG4gICAgfSlcbn1cblxuY29uc3QgbWFya1NlZW5Gb3JTdG9yYWdlS2V5ID0gKHN0b3JhZ2UsIHN0b3JhZ2Vfa2V5cywga2V5LCBpZHMsIGlzX3VzZXIpID0+IHtcbiAgICBjb25zdCBzdG9yYWdlX2l0ZW0gPSBzdG9yYWdlW3N0b3JhZ2Vfa2V5c1trZXldXVxuICAgIE9iamVjdC5rZXlzKGlkcykuZm9yRWFjaChpZCA9PiB7XG4gICAgICAgIGlmIChpZCBpbiBzdG9yYWdlX2l0ZW0pIHtcbiAgICAgICAgICAgIHN0b3JhZ2VfaXRlbVtpZF0udSA9IGZhbHNlXG4gICAgICAgIH0gZWxzZSBpZiAoaXNfdXNlcikge1xuICAgICAgICAgICAgc3RvcmFnZV9pdGVtW2lkXSA9IG5ldyBJdGVtRm9yU3RvcmFnZShpZHNbaWRdLCBmYWxzZSlcbiAgICAgICAgfVxuICAgIH0pXG59XG5cbmV4cG9ydCBjb25zdCBtYXJrSURzQXNTZWVuSWZTdWJzY3JpYmVkID0gKHN0b3JhZ2UsIHVzZXIsIGlzX3VzZXIsIHJlbW92ZWRfaWRzLCBhcHByb3ZlZF9pZHMsIGxvY2tlZF9pZHMsIHVubG9ja2VkX2lkcywgY2FsbGJhY2sgPSAoKSA9PiB7fSkgPT4ge1xuICAgIGNvbnN0IHN0b3JhZ2Vfa2V5cyA9IGdldE9iamVjdE5hbWVzRm9yVGhpbmcodXNlciwgaXNfdXNlcilcbiAgICBkZWxldGUgc3RvcmFnZV9rZXlzWydjaGFuZ2VzJ11cbiAgICBjb25zdCB1c2VyX3N1YnNjcmliZWQgPSBzdG9yYWdlLnVzZXJfc3Vic2NyaXB0aW9uc1t1c2VyXVxuICAgIGlmICh1c2VyX3N1YnNjcmliZWQgfHwgISBpc191c2VyKSB7XG4gICAgICAgIG1hcmtTZWVuRm9yU3RvcmFnZUtleShzdG9yYWdlLCBzdG9yYWdlX2tleXMsICdyZW1vdmVkJywgcmVtb3ZlZF9pZHMsIGlzX3VzZXIpXG4gICAgICAgIG1hcmtTZWVuRm9yU3RvcmFnZUtleShzdG9yYWdlLCBzdG9yYWdlX2tleXMsICdhcHByb3ZlZCcsIGFwcHJvdmVkX2lkcywgaXNfdXNlcilcbiAgICAgICAgbWFya1NlZW5Gb3JTdG9yYWdlS2V5KHN0b3JhZ2UsIHN0b3JhZ2Vfa2V5cywgJ2xvY2tlZCcsIGxvY2tlZF9pZHMsIGlzX3VzZXIpXG4gICAgICAgIG1hcmtTZWVuRm9yU3RvcmFnZUtleShzdG9yYWdlLCBzdG9yYWdlX2tleXMsICd1bmxvY2tlZCcsIHVubG9ja2VkX2lkcywgaXNfdXNlcilcbiAgICAgICAgY2hyb21lLnN0b3JhZ2Uuc3luYy5zZXQoc3RvcmFnZSwgY2FsbGJhY2spXG4gICAgfVxuXG59XG5cbmV4cG9ydCBjb25zdCBzdWJzY3JpYmVJZCA9IChpZCwgY2FsbGJhY2sgPSAoKSA9PiB7fSkgPT4ge1xuICAgIGNvbnN0IGtleSA9ICdvdGhlcl9zdWJzY3JpcHRpb25zJ1xuICAgIGNocm9tZS5zdG9yYWdlLnN5bmMuZ2V0KGtleSwgKHJlc3VsdCkgPT4ge1xuICAgICAgICByZXN1bHRba2V5XVtpZF0gPSB7dDogTWF0aC5mbG9vcihuZXcgRGF0ZSgpLmdldFRpbWUoKS8xMDAwKX1cbiAgICAgICAgY29uc3QgaXRlbXNUb1NhdmUgPSB0cmltRGljdF9ieV9udW1iZXJWYWx1ZWRBdHRyaWJ1dGUocmVzdWx0W2tleV0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1BWF9PVEhFUl9TVUJTQ1JJUFRJT05TLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndCcpXG4gICAgICAgIGNocm9tZS5zdG9yYWdlLnN5bmMuc2V0KHtba2V5XTogaXRlbXNUb1NhdmV9LCBjYWxsYmFjaylcbiAgICB9KVxufVxuZXhwb3J0IGNvbnN0IHVuc3Vic2NyaWJlSWQgPSAoaWQsIGNhbGxiYWNrID0gKCkgPT4ge30pID0+IHtcbiAgICBjb25zdCBtYWluS2V5ID0gJ290aGVyX3N1YnNjcmlwdGlvbnMnXG4gICAgY29uc3Qgb3RoZXJLZXlzID0gZ2V0T2JqZWN0TmFtZXNGb3JUaGluZygnb3RoZXInLCBmYWxzZSlcbiAgICBkZWxldGUgb3RoZXJLZXlzWydjaGFuZ2VzJ11cbiAgICBjaHJvbWUuc3RvcmFnZS5zeW5jLmdldChPYmplY3QudmFsdWVzKG90aGVyS2V5cykuY29uY2F0KG1haW5LZXkpLCAocmVzdWx0KSA9PiB7XG4gICAgICAgIGRlbGV0ZSByZXN1bHRbbWFpbktleV1baWRdXG4gICAgICAgIE9iamVjdC52YWx1ZXMob3RoZXJLZXlzKS5mb3JFYWNoKGZ1bGxLZXluYW1lID0+IHtcbiAgICAgICAgICAgIGlmIChpZCBpbiByZXN1bHRbZnVsbEtleW5hbWVdKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHJlc3VsdFtmdWxsS2V5bmFtZV1baWRdXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIGNocm9tZS5zdG9yYWdlLnN5bmMuc2V0KHJlc3VsdCwgKCkgPT4ge1xuICAgICAgICAgICAgY2hyb21lLnJ1bnRpbWUuc2VuZE1lc3NhZ2Uoe2FjdGlvbjogJ3VwZGF0ZS1iYWRnZSd9LCBjYWxsYmFjaylcbiAgICAgICAgfSlcbiAgICB9KVxufVxuZXhwb3J0IGNvbnN0IGdldFN1YnNjcmliZWRJZHMgPSAoY2FsbGJhY2sgPSAoKSA9PiB7fSkgPT4ge1xuICAgIGNvbnN0IGtleSA9ICdvdGhlcl9zdWJzY3JpcHRpb25zJ1xuICAgIGNocm9tZS5zdG9yYWdlLnN5bmMuZ2V0KGtleSwgKHJlc3VsdCkgPT4ge1xuICAgICAgICBjYWxsYmFjayhPYmplY3Qua2V5cyhyZXN1bHRba2V5XSkpXG4gICAgfSlcbn1cblxuZXhwb3J0IGNvbnN0IHN1YnNjcmliZVVzZXIgPSAodXNlciwgY2FsbGJhY2tTdWNjZXNzID0gKCkgPT4ge30sIGNhbGxiYWNrRXJyb3IgPSAoKSA9PiB7fSkgPT4ge1xuICAgIGNvbnN0IHVzZXJJbml0ID0gZ2V0VXNlckluaXQodXNlcilcbiAgICBjaHJvbWUuc3RvcmFnZS5zeW5jLmdldCgndXNlcl9zdWJzY3JpcHRpb25zJywgKHJlc3VsdCkgPT4ge1xuICAgICAgICBjb25zdCB1c2VyX3N1YnNjcmlwdGlvbnMgPSByZXN1bHQudXNlcl9zdWJzY3JpcHRpb25zXG4gICAgICAgIGlmICghICh1c2VyIGluIHVzZXJfc3Vic2NyaXB0aW9ucykpIHtcbiAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyh1c2VyX3N1YnNjcmlwdGlvbnMpLmxlbmd0aCA8IE1BWF9TVUJTQ1JJUFRJT05TKSB7XG4gICAgICAgICAgICAgICAgdXNlcl9zdWJzY3JpcHRpb25zW3VzZXJdID0gdHJ1ZVxuICAgICAgICAgICAgICAgIGNocm9tZS5zdG9yYWdlLnN5bmMuc2V0KHt1c2VyX3N1YnNjcmlwdGlvbnMsIC4uLnVzZXJJbml0fSwgY2FsbGJhY2tTdWNjZXNzKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFja0Vycm9yKCdtYXhpbXVtIG51bWJlciBvZiBzdWJzY3JpcHRpb25zIHJlYWNoZWQnKVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FsbGJhY2tFcnJvcignYWxyZWFkeSBzdWJzY3JpYmVkIHRvIHRoaXMgdXNlcicpXG4gICAgICAgIH1cbiAgICB9KVxufVxuXG5leHBvcnQgY29uc3QgdW5zdWJzY3JpYmVVc2VyID0gKHVzZXIsIGNhbGxiYWNrKSA9PiB7XG4gICAgY29uc3QgdXNlcktleXMgPSBPYmplY3Qua2V5cyhnZXRVc2VySW5pdCh1c2VyKSlcbiAgICBjaHJvbWUuc3RvcmFnZS5zeW5jLmdldCgndXNlcl9zdWJzY3JpcHRpb25zJywgKHJlc3VsdCkgPT4ge1xuICAgICAgICBjb25zdCB1c2VyX3N1YnNjcmlwdGlvbnMgPSByZXN1bHQudXNlcl9zdWJzY3JpcHRpb25zXG4gICAgICAgIGRlbGV0ZSB1c2VyX3N1YnNjcmlwdGlvbnNbdXNlcl1cbiAgICAgICAgY2hyb21lLnN0b3JhZ2Uuc3luYy5zZXQoe3VzZXJfc3Vic2NyaXB0aW9uc30sICgpID0+IHtcbiAgICAgICAgICAgIGNocm9tZS5zdG9yYWdlLnN5bmMucmVtb3ZlKHVzZXJLZXlzLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXNlcktleV9sb2NhbFN0b3JhZ2UgPSBnZXRPYmplY3ROYW1lKCdpdGVtcycsIHVzZXIsIHRydWUpXG4gICAgICAgICAgICAgICAgY2hyb21lLnJ1bnRpbWUuc2VuZE1lc3NhZ2Uoe2FjdGlvbjogJ3VwZGF0ZS1iYWRnZSd9KVxuICAgICAgICAgICAgICAgIGNocm9tZS5zdG9yYWdlLmxvY2FsLnJlbW92ZSh1c2VyS2V5X2xvY2FsU3RvcmFnZSwgY2FsbGJhY2spXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgIH0pXG59XG5cbmV4cG9ydCBjb25zdCBpbml0U3RvcmFnZSA9IChjYWxsYmFjaykgPT4ge1xuICAgIGNocm9tZS5zdG9yYWdlLnN5bmMuZ2V0KG51bGwsIChzdG9yYWdlKSA9PiB7XG4gICAgICAgIGlmIChPYmplY3Qua2V5cyhzdG9yYWdlKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGNocm9tZS5zdG9yYWdlLnN5bmMuc2V0KGdldFN0b3JhZ2VJbml0KCksIGNhbGxiYWNrKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FsbGJhY2soKVxuICAgICAgICB9XG4gICAgfSlcbn1cblxuZXhwb3J0IGNvbnN0IGdldFN1YnNjcmliZWRVc2Vyc193aXRoU2VlbkFuZFVuc2VlbklEcyA9IChjYWxsYmFjaykgPT4ge1xuICAgIGNocm9tZS5zdG9yYWdlLnN5bmMuZ2V0KG51bGwsIChzdG9yYWdlKSA9PiB7XG4gICAgICAgIGNvbnN0IHVzZXJzID0gT2JqZWN0LmtleXMoc3RvcmFnZS51c2VyX3N1YnNjcmlwdGlvbnMpO1xuICAgICAgICBjb25zdCB1c2Vyc193aXRoSURzID0ge31cbiAgICAgICAgdXNlcnMuZm9yRWFjaCh1c2VyID0+IHtcbiAgICAgICAgICAgIHVzZXJzX3dpdGhJRHNbdXNlcl0gPSBnZXRJRHNfdGhpbmcodXNlciwgdHJ1ZSwgc3RvcmFnZSlcbiAgICAgICAgfSlcbiAgICAgICAgdXNlcnNfd2l0aElEc1snb3RoZXInXSA9IGdldElEc190aGluZygnb3RoZXInLCBmYWxzZSwgc3RvcmFnZSlcbiAgICAgICAgY2FsbGJhY2sodXNlcnNfd2l0aElEcywgc3RvcmFnZSlcbiAgICB9KVxufVxuXG5leHBvcnQgY29uc3QgZ2V0U3Vic2NyaWJlZFVzZXJzX3dpdGhVbnNlZW5JRHMgPSAoY2FsbGJhY2spID0+IHtcbiAgICBjaHJvbWUuc3RvcmFnZS5zeW5jLmdldChudWxsLCAoc3RvcmFnZSkgPT4ge1xuICAgICAgICBjb25zdCB1c2VycyA9IE9iamVjdC5rZXlzKHN0b3JhZ2UudXNlcl9zdWJzY3JpcHRpb25zKTtcbiAgICAgICAgY29uc3QgdXNlcnNfd2l0aElEcyA9IHt9XG4gICAgICAgIHVzZXJzLmZvckVhY2godXNlciA9PiB7XG4gICAgICAgICAgICB1c2Vyc193aXRoSURzW3VzZXJdID0gZ2V0VW5zZWVuSURzX3RoaW5nKHVzZXIsIHRydWUsIHN0b3JhZ2UpXG4gICAgICAgIH0pXG4gICAgICAgIHVzZXJzX3dpdGhJRHNbJ290aGVyJ10gPSBnZXRVbnNlZW5JRHNfdGhpbmcoJ290aGVyJywgZmFsc2UsIHN0b3JhZ2UpXG4gICAgICAgIGNhbGxiYWNrKHVzZXJzX3dpdGhJRHMpXG4gICAgfSlcbn1cblxuZXhwb3J0IGNvbnN0IGdldFVuc2VlbklEc190aGluZyA9ICh0aGluZywgaXNVc2VyLCBzdG9yYWdlKSA9PiB7XG4gICAgcmV0dXJuIGdldElEc190aGluZyh0aGluZywgaXNVc2VyLCBzdG9yYWdlKVsndW5zZWVuJ11cbn1cblxuLy8gR2V0IElEcyBvZiBpdGVtcyB3aG9zZSBzdGF0dXMgaGFzIGNoYW5nZWRcbmV4cG9ydCBjb25zdCBnZXRJRHNfdGhpbmcgPSAodGhpbmcsIGlzVXNlciwgc3RvcmFnZSkgPT4ge1xuICAgIGNvbnN0IHRyYWNrX3JlbW92YWwgPSBzdG9yYWdlLm9wdGlvbnMucmVtb3ZhbF9zdGF0dXMudHJhY2tcbiAgICBjb25zdCB0cmFja19sb2NrID0gc3RvcmFnZS5vcHRpb25zLmxvY2tfc3RhdHVzLnRyYWNrXG4gICAgY29uc3QgdW5zZWVuSURzID0ge31cbiAgICBjb25zdCBzZWVuSURzID0ge31cbiAgICBsZXQgdHlwZXMgPSBbXVxuICAgIGNvbnN0IGtleXMgPSBnZXRPYmplY3ROYW1lc0ZvclRoaW5nKHRoaW5nLCBpc1VzZXIpXG4gICAgaWYgKHRyYWNrX3JlbW92YWwpIHR5cGVzLnB1c2goa2V5c1sncmVtb3ZlZCddLCBrZXlzWydhcHByb3ZlZCddKVxuICAgIGlmICh0cmFja19sb2NrKSB0eXBlcy5wdXNoKGtleXNbJ2xvY2tlZCddLCBrZXlzWyd1bmxvY2tlZCddKVxuXG4gICAgdHlwZXMuZm9yRWFjaCh0eXBlID0+IHtcbiAgICAgICAgT2JqZWN0LmtleXMoc3RvcmFnZVt0eXBlXSkuZm9yRWFjaChpZCA9PiB7XG4gICAgICAgICAgICBjb25zdCBpdGVtID0gc3RvcmFnZVt0eXBlXVtpZF1cbiAgICAgICAgICAgIGlmIChpdGVtLnUpIHVuc2VlbklEc1tpZF0gPSB0cnVlXG4gICAgICAgICAgICBlbHNlIHNlZW5JRHNbaWRdID0gdHJ1ZVxuICAgICAgICB9KVxuICAgIH0pXG4gICAgcmV0dXJuIHt1bnNlZW46IE9iamVjdC5rZXlzKHVuc2VlbklEcyksIHNlZW46IE9iamVjdC5rZXlzKHNlZW5JRHMpfVxufVxuXG5leHBvcnQgY29uc3QgZ2V0TG9jYWxTdG9yYWdlSXRlbXMgPSAodGhpbmcsIGlzVXNlcikgPT4ge1xuICAgIGNvbnN0IGtleV9sb2NhbFN0b3JhZ2UgPSBnZXRPYmplY3ROYW1lKCdpdGVtcycsIHRoaW5nLCBpc1VzZXIpXG4gICAgcmV0dXJuIGJyb3dzZXIuc3RvcmFnZS5sb2NhbC5nZXQoe1trZXlfbG9jYWxTdG9yYWdlXToge319KVxuICAgIC50aGVuKGxvY2FsU3RvcmFnZUl0ZW1zID0+IHtcbiAgICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZUl0ZW1zW2tleV9sb2NhbFN0b3JhZ2VdXG4gICAgfSlcbn1cblxuZXhwb3J0IGNvbnN0IHNhdmVMb2NhbFN0b3JhZ2VJdGVtcyA9ICh0aGluZywgaXNVc2VyLCBpdGVtc1RvU2F2ZSkgPT4ge1xuICAgIGNvbnN0IGtleV9sb2NhbFN0b3JhZ2UgPSBnZXRPYmplY3ROYW1lKCdpdGVtcycsIHRoaW5nLCBpc1VzZXIpXG4gICAgcmV0dXJuIGJyb3dzZXIuc3RvcmFnZS5sb2NhbC5zZXQoe1trZXlfbG9jYWxTdG9yYWdlXTogaXRlbXNUb1NhdmV9KVxufVxuXG5leHBvcnQgY29uc3QgYWRkTG9jYWxTdG9yYWdlSXRlbXMgPSAoaXRlbXMsIHRoaW5nLCBpc1VzZXIsIGNhbGxiYWNrID0gKCkgPT4ge30pID0+IHtcbiAgICBjb25zdCBrZXlfbG9jYWxTdG9yYWdlID0gZ2V0T2JqZWN0TmFtZSgnaXRlbXMnLCB0aGluZywgaXNVc2VyKVxuICAgIGNocm9tZS5zdG9yYWdlLmxvY2FsLmdldCh7W2tleV9sb2NhbFN0b3JhZ2VdOiB7fX0sIChsb2NhbFN0b3JhZ2VJdGVtcykgPT4ge1xuICAgICAgICBjb25zdCBzdG9yZWRJdGVtcyA9IGxvY2FsU3RvcmFnZUl0ZW1zW2tleV9sb2NhbFN0b3JhZ2VdXG4gICAgICAgIE9iamVjdC5rZXlzKGl0ZW1zKS5mb3JFYWNoKGlkID0+IHtcbiAgICAgICAgICAgIHN0b3JlZEl0ZW1zW2lkXSA9IGl0ZW1zW2lkXVxuICAgICAgICB9KVxuICAgICAgICBsZXQgaXRlbXNUb1NhdmUgPSBzdG9yZWRJdGVtc1xuICAgICAgICBpZiAoT2JqZWN0LmtleXMoc3RvcmVkSXRlbXMpLmxlbmd0aCA+IE1BWF9MT0NBTF9TVE9SQUdFX0lURU1TX1BFUl9PQkpFQ1QpIHtcbiAgICAgICAgICAgIGl0ZW1zVG9TYXZlID0gdHJpbURpY3RPZkl0ZW1zX2J5X3V0Y0F0dHJpYnV0ZShzdG9yZWRJdGVtcywgTUFYX0xPQ0FMX1NUT1JBR0VfSVRFTVNfUEVSX09CSkVDVCwgJ28nKVxuICAgICAgICB9XG4gICAgICAgIGNocm9tZS5zdG9yYWdlLmxvY2FsLnNldCh7W2tleV9sb2NhbFN0b3JhZ2VdOiBpdGVtc1RvU2F2ZX0sIGNhbGxiYWNrKVxuICAgIH0pXG59XG5cbmV4cG9ydCBjb25zdCBnZXRJdGVtRnJvbUxvY2FsU3RvcmFnZSA9ICh0aGluZywgaXNVc2VyLCBpZCwgbG9jYWxTdG9yYWdlKSA9PiB7XG4gICAgY29uc3Qga2V5ID0gZ2V0T2JqZWN0TmFtZSgnaXRlbXMnLCB0aGluZywgaXNVc2VyKVxuICAgIGlmIChrZXkgaW4gbG9jYWxTdG9yYWdlKSB7XG4gICAgICAgIGlmIChpZCBpbiBsb2NhbFN0b3JhZ2Vba2V5XSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBMb2NhbFN0b3JhZ2VJdGVtKHtvYmplY3Q6IGxvY2FsU3RvcmFnZVtrZXldW2lkXX0pXG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuICcnXG59XG5cbmV4cG9ydCBjb25zdCBnZXRBbGxDaGFuZ2VzID0gKGNhbGxiYWNrKSA9PiB7XG4gICAgY2hyb21lLnN0b3JhZ2Uuc3luYy5nZXQoJ3VzZXJfc3Vic2NyaXB0aW9ucycsIChyZXN1bHQpID0+IHtcbiAgICAgICAgY29uc3Qga2V5cyA9IFtnZXRPYmplY3ROYW1lKCdjaGFuZ2VzJywgJ290aGVyJywgZmFsc2UpXVxuICAgICAgICBjb25zdCBrZXlUb1VzZXJfbG9va3VwID0ge2NoYW5nZXNfb3RoZXI6ICdvdGhlcid9XG5cbiAgICAgICAgT2JqZWN0LmtleXMocmVzdWx0LnVzZXJfc3Vic2NyaXB0aW9ucykuZm9yRWFjaCh1c2VyID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IGdldE9iamVjdE5hbWUoJ2NoYW5nZXMnLCB1c2VyLCB0cnVlKVxuICAgICAgICAgICAga2V5cy5wdXNoKGtleSlcbiAgICAgICAgICAgIGtleVRvVXNlcl9sb29rdXBba2V5XSA9IHVzZXJcbiAgICAgICAgfSlcbiAgICAgICAgY2hyb21lLnN0b3JhZ2Uuc3luYy5nZXQoa2V5cywgKHJlczIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNoYW5nZXNCeVVzZXIgPSB7fVxuICAgICAgICAgICAga2V5cy5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKChrZXkgaW4gcmVzMikgJiYgcmVzMltrZXldLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VzQnlVc2VyW2tleVRvVXNlcl9sb29rdXBba2V5XV0gPSByZXMyW2tleV1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgY2FsbGJhY2soY2hhbmdlc0J5VXNlcilcbiAgICAgICAgfSlcbiAgICB9KVxufVxuXG5leHBvcnQgY29uc3QgZ2V0T3B0aW9ucyA9IChjYWxsYmFjaykgPT4ge1xuICAgIHJldHVybiBicm93c2VyLnN0b3JhZ2Uuc3luYy5nZXQoWyd1c2VyX3N1YnNjcmlwdGlvbnMnLCAnb3RoZXJfc3Vic2NyaXB0aW9ucycsICdvcHRpb25zJ10pXG4gICAgLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgY29uc3QgdXNlcnMgPSBPYmplY3Qua2V5cyhyZXN1bHQudXNlcl9zdWJzY3JpcHRpb25zKVxuICAgICAgICBjb25zdCBvdGhlcnMgPSBPYmplY3Qua2V5cyhyZXN1bHQub3RoZXJfc3Vic2NyaXB0aW9ucylcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHJlc3VsdC5vcHRpb25zXG4gICAgICAgIHJldHVybiBjYWxsYmFjayh1c2Vycywgb3RoZXJzLCBvcHRpb25zKVxuICAgIH0pXG4gICAgLmNhdGNoKGNvbnNvbGUubG9nKVxufVxuZXhwb3J0IGNvbnN0IHNhdmVPcHRpb25zID0gKGludGVydmFsLCBjdXN0b21fY2xpZW50aWQsIHJlbW92ZWRfdHJhY2ssIHJlbW92ZWRfbm90aWZ5LCBsb2NrZWRfdHJhY2ssIGxvY2tlZF9ub3RpZnksIGNhbGxiYWNrKSA9PiB7XG4gICAgY2hyb21lLnN0b3JhZ2Uuc3luYy5zZXQoe29wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJ2YWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1c3RvbV9jbGllbnRpZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZhbF9zdGF0dXM6IHt0cmFjazogcmVtb3ZlZF90cmFjaywgbm90aWZ5OiByZW1vdmVkX25vdGlmeX0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2tfc3RhdHVzOiAgICB7dHJhY2s6IGxvY2tlZF90cmFjaywgIG5vdGlmeTogbG9ja2VkX25vdGlmeX19fSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaylcbn1cbiIsImltcG9ydCB7UkVNT1ZFRCwgREVMRVRFRCwgQVBQUk9WRUQsIExPQ0tFRCwgVU5MT0NLRUQsIEVESVRFRCxcbiAgICAgICAgZ2V0U3Vic2NyaWJlZFVzZXJzX3dpdGhVbnNlZW5JRHMgfSBmcm9tICcuL3N0b3JhZ2UuanMnXG5cbmV4cG9ydCBjb25zdCBBTEFSTV9OQU1FID0gJ25vdGlmeW1lJ1xuXG5cbmNvbnN0IG1heFJlZGRpdENvbnRlbnRMZW5ndGggPSAzMDBcblxuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjU5MzM1NTYvY2hyb21lLWV4dGVuc2lvbi1vcGVuLW5ldy10YWItd2hlbi1icm93c2VyLW9wZW5lZC1pbi1iYWNrZ3JvdW5kLW1hYy8yNTkzMzk2NCMyNTkzMzk2NFxuZXhwb3J0IGNvbnN0IGNyZWF0ZVRhYiA9ICh1cmwpID0+IHtcbiAgICBjaHJvbWUudGFicy5jcmVhdGUoe3VybDp1cmx9LCAodGFiKSA9PiB7XG4gICAgICAgIGlmKCEgdGFiKSB7XG4gICAgICAgICAgICAvLyBwcm9iYWJseSBubyB3aW5kb3cgYXZhaWxhYmxlXG4gICAgICAgICAgICBjaHJvbWUud2luZG93cy5jcmVhdGUoe3VybDp1cmx9LCAod2luKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gYmV0dGVyIHRvIGZvY3VzIGFmdGVyIHdpbmRvdyBjcmVhdGlvbiBjYWxsYmFja1xuICAgICAgICAgICAgICAgIGNocm9tZS53aW5kb3dzLnVwZGF0ZSh3aW4uaWQsIHtmb2N1c2VkOiB0cnVlfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBiZXR0ZXIgdG8gZm9jdXMgYWZ0ZXIgdGFiIGNyZWF0aW9uIGNhbGxiYWNrXG4gICAgICAgICAgICBjaHJvbWUud2luZG93cy51cGRhdGUodGFiLndpbmRvd0lkLCB7Zm9jdXNlZDogdHJ1ZX0pXG4gICAgICAgIH1cbiAgICB9KVxufVxuXG5leHBvcnQgY29uc3QgZ2V0RnVsbElEc0Zyb21VUkwgPSAodXJsKSA9PiB7XG4gICAgY29uc3QgcGF0aCA9IHVybC5yZXBsYWNlKC9odHRwczpcXC9cXC9bXi9dKnJlKHZlKT9kZGl0LmNvbS8sICcnKVxuICAgIHJldHVybiBnZXRGdWxsSURzRnJvbVBhdGgocGF0aClcbn1cblxuY29uc3QgcmVnZXhfcGMgPSAvXlxcLyhyfHVzZXIpXFwvKFteL10rKVxcL2NvbW1lbnRzXFwvKFteL10rKVxcL1teL10qKD86XFwvKFteLz8mI10rKSk/L1xuY29uc3QgcmVnZXhfdXNlciA9IC9eXFwvdXNlclxcLyhbXi8/JiNdKylcXC8/L1xuXG5leHBvcnQgY29uc3QgZ2V0RnVsbElEc0Zyb21QYXRoID0gKHBhdGgpID0+IHtcbiAgICBsZXQgcG9zdElEID0gdW5kZWZpbmVkLCBjb21tZW50SUQgPSB1bmRlZmluZWQsIHVzZXIgPSB1bmRlZmluZWQsIHN1YnJlZGRpdCA9IHVuZGVmaW5lZFxuICAgIGNvbnN0IG1hdGNoZXNfcGMgPSBwYXRoLm1hdGNoKHJlZ2V4X3BjKVxuICAgIGNvbnN0IG1hdGNoZXNfdXNlciA9IHBhdGgubWF0Y2gocmVnZXhfdXNlcilcbiAgICBpZiAobWF0Y2hlc19wYykge1xuICAgICAgICBjb25zdCB0eXBlID0gbWF0Y2hlc19wY1sxXVxuICAgICAgICBpZiAodHlwZSA9PT0gJ3VzZXInKSB7XG4gICAgICAgICAgICB1c2VyID0gbWF0Y2hlc19wY1syXVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3VicmVkZGl0ID0gbWF0Y2hlc19wY1syXVxuICAgICAgICB9XG4gICAgICAgIGlmIChtYXRjaGVzX3BjWzNdKSBwb3N0SUQgPSAndDNfJyttYXRjaGVzX3BjWzNdXG4gICAgICAgIGlmIChtYXRjaGVzX3BjWzRdKSBjb21tZW50SUQgPSAndDFfJyttYXRjaGVzX3BjWzRdXG4gICAgfSBlbHNlIGlmIChtYXRjaGVzX3VzZXIpIHtcbiAgICAgICAgdXNlciA9IG1hdGNoZXNfdXNlclsxXVxuICAgIH1cbiAgICByZXR1cm4gW3Bvc3RJRCwgY29tbWVudElELCB1c2VyLCBzdWJyZWRkaXRdXG59XG5cbmV4cG9ydCBjb25zdCByZWZvcm1hdFJlZGRpdFRleHQgPSAoYm9keSkgPT4ge1xuICAgIHJldHVybiBib2R5LnJlcGxhY2UoLyZhbXA7L2csICcmJykucmVwbGFjZSgvJmd0Oy9nLCAnPicpLnJlcGxhY2UoLyZsdDsvZywgJzwnKVxuICAgICAgICAucmVwbGFjZSgvXFxzKy9nLCAnICcpLnN1YnN0cigwLCBtYXhSZWRkaXRDb250ZW50TGVuZ3RoKVxufVxuXG5leHBvcnQgY29uc3QgaXNSZW1vdmVkSXRlbSA9IChpdGVtKSA9PiB7XG4gICAgaWYgKGlzQ29tbWVudChpdGVtLm5hbWUpKSB7XG4gICAgICAgIHJldHVybiBpc1JlbW92ZWRDb21tZW50KGl0ZW0pXG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGlzUmVtb3ZlZFBvc3QoaXRlbSlcbiAgICB9XG59XG5cbmV4cG9ydCBjb25zdCBpc0NvbW1lbnQgPSAobmFtZSkgPT4ge1xuICAgIHJldHVybiBuYW1lLnN1YnN0cigwLDIpID09PSAndDEnXG59XG5leHBvcnQgY29uc3QgaXNSZW1vdmVkQ29tbWVudCA9IChpdGVtKSA9PiB7XG4gICAgcmV0dXJuICgoaXRlbS5ib2R5LnJlcGxhY2UoL1xcXFwvZywgJycpID09PSAnW3JlbW92ZWRdJyB8fFxuICAgICAgICAgICAgIGl0ZW0uYm9keS5yZXBsYWNlKC9cXFxcL2csICcnKSA9PT0gJ1tkZWxldGVkXScpICYmXG4gICAgICAgICAgICBpdGVtLmF1dGhvci5yZXBsYWNlKC9cXFxcL2csICcnKSA9PT0gJ1tkZWxldGVkXScpXG59XG5leHBvcnQgY29uc3QgaXNVc2VyRGVsZXRlZENvbW1lbnQgPSAoaXRlbSkgPT4ge1xuICAgIHJldHVybiAoaXRlbS5ib2R5LnJlcGxhY2UoL1xcXFwvZywgJycpID09PSAnW2RlbGV0ZWRdJyAmJlxuICAgICAgICAgICAgaXRlbS5hdXRob3IucmVwbGFjZSgvXFxcXC9nLCAnJykgPT09ICdbZGVsZXRlZF0nKVxufVxuZXhwb3J0IGNvbnN0IGlzVXNlckRlbGV0ZWRQb3N0ID0gKGl0ZW0pID0+IHtcbiAgICByZXR1cm4gKCEgaXRlbS5pc19yb2JvdF9pbmRleGFibGUpICYmIGl0ZW0uYXV0aG9yLnJlcGxhY2UoL1xcXFwvZywgJycpID09PSAnW2RlbGV0ZWRdJ1xufVxuZXhwb3J0IGNvbnN0IGlzVXNlckRlbGV0ZWRJdGVtID0gKGl0ZW0pID0+IHtcbiAgICBpZiAoaXNDb21tZW50KGl0ZW0ubmFtZSkpIHtcbiAgICAgICAgcmV0dXJuIGlzVXNlckRlbGV0ZWRDb21tZW50KGl0ZW0pXG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGlzVXNlckRlbGV0ZWRQb3N0KGl0ZW0pXG4gICAgfVxufVxuZXhwb3J0IGNvbnN0IGlzUmVtb3ZlZFBvc3QgPSAoaXRlbSkgPT4ge1xuICAgIHJldHVybiAhIGl0ZW0uaXNfcm9ib3RfaW5kZXhhYmxlXG59XG5cbmV4cG9ydCBjb25zdCB0cmltRGljdF9ieV9udW1iZXJWYWx1ZWRBdHRyaWJ1dGUgPSAoZGljdCwgbWF4TnVtSXRlbXMsIG51bWJlclZhbHVlZEF0dHJpYnV0ZSkgPT4ge1xuICAgIGNvbnN0IGFycmF5ID0gc29ydERpY3RfYnlfbnVtYmVyVmFsdWVkQXR0cmlidXRlKGRpY3QsIG51bWJlclZhbHVlZEF0dHJpYnV0ZSlcblxuICAgIGNvbnN0IHNob3J0ZW5lZEFycmF5ID0gYXJyYXkuc2xpY2UoMCwgbWF4TnVtSXRlbXMpXG4gICAgY29uc3QgbmV3RGljdCA9IHt9XG4gICAgc2hvcnRlbmVkQXJyYXkuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgbmV3RGljdFtpdGVtWzBdXSA9IGl0ZW1bMV1cbiAgICB9KVxuICAgIHJldHVybiBuZXdEaWN0XG59XG5cbmV4cG9ydCBjb25zdCBzb3J0RGljdF9ieV9udW1iZXJWYWx1ZWRBdHRyaWJ1dGUgPSAoZGljdCwgbnVtYmVyVmFsdWVkQXR0cmlidXRlKSA9PiB7XG4gICAgbGV0IGFycmF5ID0gT2JqZWN0LmtleXMoZGljdCkubWFwKGtleSA9PiB7XG4gICAgICAgIHJldHVybiBba2V5LCBkaWN0W2tleV1dXG4gICAgfSlcbiAgICBhcnJheS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIHJldHVybiBiWzFdW251bWJlclZhbHVlZEF0dHJpYnV0ZV0gLSBhWzFdW251bWJlclZhbHVlZEF0dHJpYnV0ZV1cbiAgICB9KVxuICAgIHJldHVybiBhcnJheVxufVxuXG5leHBvcnQgY2xhc3MgSXRlbUZvclN0b3JhZ2Uge1xuICAgIGNvbnN0cnVjdG9yKGNyZWF0ZWRfdXRjLCB1bnNlZW4pIHtcbiAgICAgICAgdGhpcy5jID0gY3JlYXRlZF91dGNcbiAgICAgICAgdGhpcy51ID0gdW5zZWVuXG4gICAgfVxuICAgIGdldENyZWF0ZWRVVEMoKSB7IHJldHVybiB0aGlzLmMgfVxuICAgIGdldFVuc2VlbigpIHsgcmV0dXJuIHRoaXMudSB9XG59XG5cbmV4cG9ydCBjbGFzcyBDaGFuZ2VGb3JTdG9yYWdlIHtcbiAgICBjb25zdHJ1Y3Rvcih7IGlkID0gbnVsbCwgb2JzZXJ2ZWRfdXRjID0gbnVsbCwgY2hhbmdlX3R5cGUgPSBudWxsLCBvYmplY3QgPSBudWxsIH0pIHtcbiAgICAgICAgaWYgKG9iamVjdCkge1xuICAgICAgICAgICAgdGhpcy5pID0gb2JqZWN0LmlcbiAgICAgICAgICAgIHRoaXMubyA9IG9iamVjdC5vXG4gICAgICAgICAgICB0aGlzLmcgPSBvYmplY3QuZ1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pID0gaWRcbiAgICAgICAgICAgIHRoaXMubyA9IG9ic2VydmVkX3V0Y1xuICAgICAgICAgICAgdGhpcy5nID0gY2hhbmdlX3R5cGVcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRJRCgpIHsgcmV0dXJuIHRoaXMuaSB9XG4gICAgZ2V0T2JzZXJ2ZWRVVEMoKSB7IHJldHVybiB0aGlzLm8gfVxuICAgIGdldENoYW5nZVR5cGUoKSB7XG4gICAgICAgIHN3aXRjaCh0aGlzLmcpIHtcbiAgICAgICAgICAgIGNhc2UgUkVNT1ZFRDogcmV0dXJuICdtb2QgcmVtb3ZlZCdcbiAgICAgICAgICAgIGNhc2UgREVMRVRFRDogcmV0dXJuICd1c2VyIGRlbGV0ZWQnXG4gICAgICAgICAgICBjYXNlIEFQUFJPVkVEOiByZXR1cm4gJ2FwcHJvdmVkJ1xuICAgICAgICAgICAgY2FzZSBMT0NLRUQ6IHJldHVybiAnbG9ja2VkJ1xuICAgICAgICAgICAgY2FzZSBVTkxPQ0tFRDogcmV0dXJuICd1bmxvY2tlZCdcbiAgICAgICAgICAgIGNhc2UgRURJVEVEOiByZXR1cm4gJ2VkaXRlZCdcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIExvY2FsU3RvcmFnZUl0ZW0ge1xuICAgIGNvbnN0cnVjdG9yKHsgaXRlbSA9IG51bGwsIG9ic2VydmVkX3V0YyA9IG51bGwsIG9iamVjdCA9IG51bGwgfSkge1xuICAgICAgICBpZiAob2JqZWN0KSB7XG4gICAgICAgICAgICB0aGlzLnQgPSBvYmplY3QudFxuICAgICAgICAgICAgdGhpcy5vID0gb2JqZWN0Lm9cbiAgICAgICAgICAgIHRoaXMuYyA9IG9iamVjdC5jXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgdGV4dCA9ICcnXG4gICAgICAgICAgICBpZiAoaXNDb21tZW50KGl0ZW0ubmFtZSkpIHtcbiAgICAgICAgICAgICAgICB0ZXh0ID0gcmVmb3JtYXRSZWRkaXRUZXh0KGl0ZW0uYm9keSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGV4dCA9IGl0ZW0udGl0bGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudCA9IHRleHRcbiAgICAgICAgICAgIHRoaXMubyA9IG9ic2VydmVkX3V0Y1xuICAgICAgICAgICAgdGhpcy5jID0gaXRlbS5jcmVhdGVkX3V0Y1xuICAgICAgICB9XG4gICAgfVxuICAgIHNldFRleHQodGV4dCkge3RoaXMudCA9IHJlZm9ybWF0UmVkZGl0VGV4dCh0ZXh0KX1cbiAgICBnZXRUZXh0KCkgeyByZXR1cm4gdGhpcy50IH1cbiAgICBnZXRPYnNlcnZlZFVUQygpIHsgcmV0dXJuIHRoaXMubyB9XG4gICAgZ2V0Q3JlYXRlZFVUQygpIHsgcmV0dXJuIHRoaXMuYyB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRBbGFybShwZXJpb2RJbk1pbnV0ZXMpIHtcbiAgICBjaHJvbWUuYWxhcm1zLmNsZWFyKEFMQVJNX05BTUUpXG4gICAgY2hyb21lLmFsYXJtcy5jcmVhdGUoQUxBUk1fTkFNRSwge2RlbGF5SW5NaW51dGVzOiAxLCBwZXJpb2RJbk1pbnV0ZXM6IHBlcmlvZEluTWludXRlc30pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhbHBoYUxvd2VyU29ydCAoYSwgYikge1xuICAgIHZhciB0ZXh0QSA9IGEudG9Mb3dlckNhc2UoKVxuICAgIHZhciB0ZXh0QiA9IGIudG9Mb3dlckNhc2UoKVxuXG4gICAgaWYgKHRleHRBIDwgdGV4dEIpIHJldHVybiAtMVxuICAgIGlmICh0ZXh0QSA+IHRleHRCKSByZXR1cm4gMVxuICAgIHJldHVybiAwXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnb1RvT3B0aW9ucyAoKSB7XG4gICAgaWYgKGNocm9tZS5ydW50aW1lLm9wZW5PcHRpb25zUGFnZSkge1xuICAgICAgICBjaHJvbWUucnVudGltZS5vcGVuT3B0aW9uc1BhZ2UoKVxuICAgICAgICB3aW5kb3cuY2xvc2UoKSAvL2Nsb3NlcyB0aGUgcG9wdXAgd2hpY2ggcGVyc2lzdHMgaW4gRkZcbiAgICB9IGVsc2Uge1xuICAgICAgICB3aW5kb3cub3BlbihjaHJvbWUucnVudGltZS5nZXRVUkwoJy9zcmMvb3B0aW9ucy5odG1sJykpXG4gICAgfVxufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBzaG93RXJyb3IobWVzc2FnZSwgc2VsZWN0b3IpIHtcbiAgICAkKCc8ZGl2IGNsYXNzPVwicnItZXJyb3JcIj4nK21lc3NhZ2UrJzwvZGl2PicpLmFwcGVuZFRvKHNlbGVjdG9yKS5kZWxheSgyNDAwKS5mYWRlVG8oNDAwLCAwLCBmdW5jdGlvbigpIHskKHRoaXMpLnJlbW92ZSgpfSlcbn1cblxuLy9ub2luc3BlY3Rpb24gSlNVbnVzZWRMb2NhbFN5bWJvbHNcbmV4cG9ydCBmdW5jdGlvbiBwcHJpbnQob2JqKSB7XG4gICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkob2JqLCBudWxsLCAnXFx0JykpXG59XG5cblxuZXhwb3J0IGNvbnN0IGdldFByZXR0eVRpbWVMZW5ndGggPSAoc2Vjb25kcykgPT4ge1xuICAgIGNvbnN0IHRocmVzaG9sZHMgPSBbWzYwLCAnc2Vjb25kJywgJ3NlY29uZHMnXSwgWzYwLCAnbWludXRlJywgJ21pbnV0ZXMnXSwgWzI0LCAnaG91cicsICdob3VycyddLCBbNywgJ2RheScsICdkYXlzJ10sXG4gICAgWzM2NS8xMi83LCAnd2VlaycsICd3ZWVrcyddLCBbMTIsICdtb250aCcsICdtb250aHMnXSwgWzEwLCAneWVhcicsICd5ZWFycyddLFxuICAgIFsxMCwgJ2RlY2FkZScsICdkZWNhZGVzJ10sIFsxMCwgJ2NlbnR1cnknLCAnY2VudHVyaWVzJ10sIFsxMCwgJ21pbGxlbml1bScsICdtaWxsZW5pYSddXVxuICAgIGlmIChzZWNvbmRzIDwgNjApIHJldHVybiBzZWNvbmRzICsgJyBzZWNvbmRzJ1xuICAgIGxldCB0aW1lID0gc2Vjb25kc1xuICAgIGZvciAodmFyIGk9MDsgaTx0aHJlc2hvbGRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBkaXZpc29yID0gdGhyZXNob2xkc1tpXVswXVxuICAgICAgICBsZXQgdGV4dCA9IHRocmVzaG9sZHNbaV1bMV1cbiAgICAgICAgbGV0IHRleHRQbHVyYWwgPSB0aHJlc2hvbGRzW2ldWzJdXG4gICAgICAgIGlmICh0aW1lIDwgZGl2aXNvcikge1xuICAgICAgICAgICAgbGV0IGV4dHJhID0gKHRpbWUgLSBNYXRoLmZsb29yKHRpbWUpKVxuICAgICAgICAgICAgbGV0IHByZXZVbml0VGltZSA9IE1hdGgucm91bmQoZXh0cmEqdGhyZXNob2xkc1tpLTFdWzBdKVxuICAgICAgICAgICAgaWYgKHRocmVzaG9sZHNbaS0xXVswXSA9PT0gcHJldlVuaXRUaW1lKSB7XG4gICAgICAgICAgICAgICAgdGltZSArPSAxXG4gICAgICAgICAgICAgICAgcHJldlVuaXRUaW1lID0gMFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKE1hdGguZmxvb3IodGltZSkgPiAxIHx8IE1hdGguZmxvb3IodGltZSkgPT0gMCkge1xuICAgICAgICAgICAgICAgIHRleHQgPSB0ZXh0UGx1cmFsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaSA+IDEgJiYgcHJldlVuaXRUaW1lID4gMCkge1xuICAgICAgICAgICAgICAgIGxldCByZW1haW5UZXh0ID0gdGhyZXNob2xkc1tpLTFdWzFdXG4gICAgICAgICAgICAgICAgaWYgKHByZXZVbml0VGltZSA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVtYWluVGV4dCA9IHRocmVzaG9sZHNbaS0xXVsyXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0ZXh0ICs9ICcsICcgKyBTdHJpbmcocHJldlVuaXRUaW1lKSArICcgJyArIHJlbWFpblRleHRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBTdHJpbmcoTWF0aC5mbG9vcih0aW1lKSkgKyAnICcgKyB0ZXh0XG4gICAgICAgIH1cbiAgICAgICAgdGltZSA9IHRpbWUgLyBkaXZpc29yXG4gICAgfVxufVxuXG5leHBvcnQgY29uc3QgZ2V0UHJldHR5RGF0ZSA9IChjcmVhdGVkVVRDKSA9PiB7XG4gICAgY29uc3Qgc2Vjb25kcyA9IE1hdGguZmxvb3IoKG5ldyBEYXRlKS5nZXRUaW1lKCkvMTAwMCktY3JlYXRlZFVUQ1xuICAgIHJldHVybiBnZXRQcmV0dHlUaW1lTGVuZ3RoKHNlY29uZHMpICsgJyBhZ28nXG59XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVOb3RpZmljYXRpb24gPSAoe25vdGlmaWNhdGlvbklkLCB0aXRsZSwgbWVzc2FnZX0pID0+IHtcbiAgICBpZiAobG9jYXRpb24ucHJvdG9jb2wubWF0Y2goL15odHRwLykpIHtcbiAgICAgICAgY2hyb21lLnJ1bnRpbWUuc2VuZE1lc3NhZ2Uoe1xuICAgICAgICAgICAgYWN0aW9uOiAnY3JlYXRlLW5vdGlmaWNhdGlvbicsXG4gICAgICAgICAgICBvcHRpb25zOiB7bm90aWZpY2F0aW9uSWQsIHRpdGxlLCBtZXNzYWdlfVxuICAgICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGNocm9tZS5ub3RpZmljYXRpb25zLmNyZWF0ZShub3RpZmljYXRpb25JZCxcbiAgICAgICAgICAgIHt0eXBlOiAnYmFzaWMnLCBpY29uVXJsOiAnL2ljb25zLzEyOC5wbmcnLFxuICAgICAgICAgICAgIHRpdGxlLCBtZXNzYWdlfSlcbiAgICB9XG59XG5cbmV4cG9ydCBjb25zdCB1cGRhdGVCYWRnZVVuc2VlbkNvdW50ID0gKCkgPT4ge1xuICAgIGlmIChsb2NhdGlvbi5wcm90b2NvbC5tYXRjaCgvXmh0dHAvKSkge1xuICAgICAgICBjaHJvbWUucnVudGltZS5zZW5kTWVzc2FnZSh7XG4gICAgICAgICAgICBhY3Rpb246ICd1cGRhdGUtYmFkZ2UnXG4gICAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgICAgZ2V0U3Vic2NyaWJlZFVzZXJzX3dpdGhVbnNlZW5JRHModXNlcnNVbnNlZW5JRHMgPT4ge1xuICAgICAgICAgICAgbGV0IHRvdGFsID0gMFxuICAgICAgICAgICAgT2JqZWN0LnZhbHVlcyh1c2Vyc1Vuc2VlbklEcykuZm9yRWFjaChpZHMgPT4ge1xuICAgICAgICAgICAgICAgIHRvdGFsICs9IGlkcy5sZW5ndGhcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBsZXQgdGV4dCA9IHRvdGFsLnRvU3RyaW5nKClcbiAgICAgICAgICAgIGlmICh0b3RhbCA9PSAwKSB0ZXh0ID0gJydcbiAgICAgICAgICAgIGNocm9tZS5icm93c2VyQWN0aW9uLnNldEJhZGdlQmFja2dyb3VuZENvbG9yKHtjb2xvcjogXCJyZWRcIn0pXG4gICAgICAgICAgICBjaHJvbWUuYnJvd3NlckFjdGlvbi5zZXRCYWRnZVRleHQoe3RleHQ6IHRleHR9KVxuICAgICAgICB9KVxuICAgIH1cbn1cbiIsImltcG9ydCB7Z2V0T3B0aW9uc30gZnJvbSAnLi9zdG9yYWdlLmpzJ1xuXG5jb25zdCBjbGllbnRJRCA9ICdTRXcxdXZSZDZreEZFdydcbmNvbnN0IG9hdXRoX3JlZGRpdCA9ICdodHRwczovL29hdXRoLnJlZGRpdC5jb20vJ1xuY29uc3Qgd3d3X3JlZGRpdCA9ICdodHRwczovL3d3dy5yZWRkaXQuY29tLydcblxuY29uc3QgTk9fQVVUSCA9ICdub25lJ1xuXG5leHBvcnQgY29uc3QgbG9va3VwSXRlbXNCeUlEID0gKGlkcywgYXV0aCkgPT4ge1xuICAgIGNvbnN0IHBhcmFtcyA9IHtpZDppZHMsIHJhd19qc29uOjF9XG4gICAgY29uc3Qgc2VhcmNoID0gJz8nK09iamVjdC5rZXlzKHBhcmFtcykubWFwKGsgPT4gYCR7a309JHtwYXJhbXNba119YCkuam9pbignJicpXG5cbiAgICByZXR1cm4gd2luZG93LmZldGNoKC4uLmdldEZldGNoUGFyYW1zKCdhcGkvaW5mbycsIHNlYXJjaCwgYXV0aCkpXG4gICAgLnRoZW4oaGFuZGxlRmV0Y2hFcnJvcnMpXG4gICAgLnRoZW4oZ2V0UmVkZGl0RGF0YSlcbiAgICAuY2F0Y2goY29uc29sZS5sb2cpXG59XG5cbmV4cG9ydCBjb25zdCBsb29rdXBJdGVtc0J5VXNlciA9ICh1c2VyLCBhZnRlciwgc29ydCwgdGltZVNwYW4sIGF1dGgpID0+IHtcbiAgICBjb25zdCBwYXJhbXMgPSB7bGltaXQ6IDEwMCwgc29ydCwgcmF3X2pzb246MX1cbiAgICBpZiAoYWZ0ZXIpIHBhcmFtcy5hZnRlciA9IGFmdGVyXG4gICAgaWYgKHRpbWVTcGFuKSBwYXJhbXMudCA9IHRpbWVTcGFuXG4gICAgY29uc3QgcGF0aCA9IGB1c2VyLyR7dXNlcn0vb3ZlcnZpZXcuanNvbmBcbiAgICBjb25zdCBzZWFyY2ggPSAnPycrT2JqZWN0LmtleXMocGFyYW1zKS5tYXAoayA9PiBgJHtrfT0ke3BhcmFtc1trXX1gKS5qb2luKCcmJylcblxuICAgIHJldHVybiB3aW5kb3cuZmV0Y2goLi4uZ2V0RmV0Y2hQYXJhbXMocGF0aCwgc2VhcmNoLCBhdXRoKSlcbiAgICAudGhlbihoYW5kbGVGZXRjaEVycm9ycylcbiAgICAudGhlbihnZXRSZWRkaXREYXRhKVxuICAgIC5jYXRjaChjb25zb2xlLmxvZylcbn1cblxuZXhwb3J0IGNvbnN0IGhhbmRsZUZldGNoRXJyb3JzID0gKHJlc3BvbnNlKSA9PiB7XG4gICAgaWYgKCEgcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgRXJyb3IocmVzcG9uc2Uuc3RhdHVzVGV4dClcbiAgICB9XG4gICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKVxufVxuXG5leHBvcnQgY29uc3QgZ2V0UmVkZGl0RGF0YSA9IChkYXRhKSA9PiB7XG4gICAgaWYgKCEgZGF0YSB8fCAhIGRhdGEuZGF0YSB8fCAhIGRhdGEuZGF0YS5jaGlsZHJlbikge1xuICAgICAgICB0aHJvdyBFcnJvcigncmVkZGl0IGRhdGEgaXMgbm90IGRlZmluZWQnKVxuICAgIH1cbiAgICByZXR1cm4gZGF0YS5kYXRhLmNoaWxkcmVuXG59XG5cbmV4cG9ydCBjb25zdCBnZXRSZWRkaXRUb2tlbiA9IChkYXRhKSA9PiB7XG4gICAgaWYgKCEgZGF0YSB8fCAhIGRhdGEuYWNjZXNzX3Rva2VuKSB7XG4gICAgICAgIHRocm93IEVycm9yKCdhY2Nlc3MgdG9rZW4gaXMgbm90IGRlZmluZWQnKVxuICAgIH1cbiAgICByZXR1cm4gZGF0YS5hY2Nlc3NfdG9rZW5cbn1cblxuZXhwb3J0IGNvbnN0IGdldEF1dGggPSAoKSA9PiB7XG4gICAgcmV0dXJuIGdldE9wdGlvbnMoKHVzZXJzLCBvdGhlcnMsIG9wdGlvbnMpID0+IHtcbiAgICAgICAgdmFyIHVzZV90aGlzX2NsaWVudElEID0gY2xpZW50SURcbiAgICAgICAgaWYgKG9wdGlvbnMuY3VzdG9tX2NsaWVudGlkKSB7XG4gICAgICAgICAgICB1c2VfdGhpc19jbGllbnRJRCA9IG9wdGlvbnMuY3VzdG9tX2NsaWVudGlkXG4gICAgICAgICAgICBpZiAodXNlX3RoaXNfY2xpZW50SUQgPT09ICd0ZXN0aW5nJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBOT19BVVRIXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdG9rZW5Jbml0ID0ge1xuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCYXNpYyAke3dpbmRvdy5idG9hKGAke3VzZV90aGlzX2NsaWVudElEfTpgKX1gLFxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PXV0Zi04J1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgYm9keTogYGdyYW50X3R5cGU9JHtlbmNvZGVVUklDb21wb25lbnQoJ2h0dHBzOi8vb2F1dGgucmVkZGl0LmNvbS9ncmFudHMvaW5zdGFsbGVkX2NsaWVudCcpfSZkZXZpY2VfaWQ9RE9fTk9UX1RSQUNLX1RISVNfREVWSUNFYFxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHdpbmRvdy5mZXRjaCgnaHR0cHM6Ly93d3cucmVkZGl0LmNvbS9hcGkvdjEvYWNjZXNzX3Rva2VuJywgdG9rZW5Jbml0KVxuICAgICAgICAudGhlbihoYW5kbGVGZXRjaEVycm9ycylcbiAgICAgICAgLnRoZW4oZ2V0UmVkZGl0VG9rZW4pXG4gICAgICAgIC50aGVuKHRva2VuID0+ICh7XG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYGJlYXJlciAke3Rva2VufWBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpXG4gICAgICAgIC5jYXRjaChjb25zb2xlLmxvZylcbiAgICB9KVxuXG59XG5cbi8vIGNvZGU6IGh0dHBzOi8vZ2l0aHViLmNvbS90b29sYm94LXRlYW0vcmVkZGl0LW1vZGVyYXRvci10b29sYm94L2Jsb2IvNDM0ZWMwYmI3MWViYmEyZmNmMGNiNWU0Y2FkNTI5MDM1YTFhZTc0Mi9leHRlbnNpb24vZGF0YS9iYWNrZ3JvdW5kL2hhbmRsZXJzL3dlYnJlcXVlc3QuanMjTDM0XG4vLyBkaXNjdXNzaW9uOiBodHRwczovL3d3dy5yZWRkaXQuY29tL3IvcmVkZGl0ZGV2L2NvbW1lbnRzLzVqZjR5Zy9hcGlfbmV3X21vZG1haWwvZGJmbnc5OC9cbmV4cG9ydCBjb25zdCBnZXRMb2NhbEF1dGggPSAoKSA9PiB7XG4gICAgcmV0dXJuIHdpbmRvdy5mZXRjaCgnaHR0cHM6Ly9tb2QucmVkZGl0LmNvbS9tYWlsL2FsbCcpXG4gICAgLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgZ2V0Q29va2llKHt1cmw6ICdodHRwczovL21vZC5yZWRkaXQuY29tJywgbmFtZTogJ3Rva2VuJ30pXG4gICAgICAgIC50aGVuKGNvb2tpZSA9PiB7XG4gICAgICAgICAgICBpZiAoY29va2llKSB7XG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGludmFsaWQgY2hhcnMgYXQgdGhlIGVuZCBwZXIgZGlzY3Vzc2lvblxuICAgICAgICAgICAgICAgIGNvbnN0IGludmFsaWRDaGFyID0gbmV3IFJlZ0V4cCgnW15BLVphLXowLTkrL10uKj8kJylcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlNjRDb29raWUgPSBjb29raWUudmFsdWUucmVwbGFjZShpbnZhbGlkQ2hhciwgJycpXG4gICAgICAgICAgICAgICAgY29uc3QgdG9rZW5EYXRhID0gYXRvYihiYXNlNjRDb29raWUpXG4gICAgICAgICAgICAgICAgY29uc3QgdG9rZW5zID0gSlNPTi5wYXJzZSh0b2tlbkRhdGEpXG4gICAgICAgICAgICAgICAgaWYgKCdhY2Nlc3NUb2tlbicgaW4gdG9rZW5zICYmIHRva2Vucy5hY2Nlc3NUb2tlbikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhdXRoID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBiZWFyZXIgJHt0b2tlbnMuYWNjZXNzVG9rZW59YFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhdXRoXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9KVxufVxuXG5leHBvcnQgY29uc3QgZ2V0Q29va2llID0gKHt1cmwsIG5hbWV9KSA9PiB7XG4gICAgaWYgKGxvY2F0aW9uLnByb3RvY29sLm1hdGNoKC9eaHR0cC8pKSB7XG4gICAgICAgIHJldHVybiBicm93c2VyLnJ1bnRpbWUuc2VuZE1lc3NhZ2Uoe1xuICAgICAgICAgICAgYWN0aW9uOiAnZ2V0LWNvb2tpZScsXG4gICAgICAgICAgICBvcHRpb25zOiB7dXJsLCBuYW1lfVxuICAgICAgICB9KVxuICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuY29va2llXG4gICAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGJyb3dzZXIuY29va2llcy5nZXQoe3VybCwgbmFtZX0pXG4gICAgfVxufVxuXG5jb25zdCBnZXRGZXRjaFBhcmFtcyA9IChwYXRoLCBzZWFyY2gsIGF1dGgpID0+IHtcbiAgICBpZiAoISBhdXRoIHx8IGF1dGggPT09IE5PX0FVVEgpIHtcbiAgICAgICAgbGV0IHVybCA9IHd3d19yZWRkaXQrcGF0aFxuICAgICAgICBpZiAocGF0aCA9PT0gJ2FwaS9pbmZvJykge1xuICAgICAgICAgICAgdXJsICs9ICcuanNvbidcbiAgICAgICAgfVxuICAgICAgICB1cmwgKz0gc2VhcmNoXG4gICAgICAgIHJldHVybiBbdXJsXVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHVybCA9IG9hdXRoX3JlZGRpdCtwYXRoK3NlYXJjaFxuICAgICAgICByZXR1cm4gW3VybCwgYXV0aF1cbiAgICB9XG59XG5cbmV4cG9ydCBjb25zdCBnZXRMb2NhbE9yQXBwQXV0aCA9ICgpID0+IHtcbiAgICByZXR1cm4gZ2V0TG9jYWxBdXRoKClcbiAgICAudGhlbihhdXRoID0+IHtcbiAgICAgICAgaWYgKGF1dGgpIHJldHVybiBhdXRoXG4gICAgICAgIHJldHVybiBnZXRBdXRoKClcbiAgICB9KVxuICAgIC5jYXRjaChjb25zb2xlLmxvZylcbn1cblxuZXhwb3J0IGNvbnN0IGdldExvZ2dlZGluVXNlciA9ICgpID0+IHtcbiAgICByZXR1cm4gd2luZG93LmZldGNoKCdodHRwczovL3d3dy5yZWRkaXQuY29tL2FwaS9tZS5qc29uJylcbiAgICAudGhlbihoYW5kbGVGZXRjaEVycm9ycylcbiAgICAudGhlbihnZXRSZWRkaXRVc2VybmFtZSlcbiAgICAuY2F0Y2goY29uc29sZS5sb2cpXG59XG5cbmNvbnN0IGdldFJlZGRpdFVzZXJuYW1lID0gKGRhdGEpID0+IHtcbiAgICBpZiAoISBkYXRhIHx8ICEgZGF0YS5kYXRhIHx8ICEgZGF0YS5kYXRhLm5hbWUpIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoJ3JlZGRpdCB1c2VybmFtZSBpcyBub3QgZGVmaW5lZCcpXG4gICAgfVxuICAgIHJldHVybiBkYXRhLmRhdGEubmFtZVxufVxuIiwiaW1wb3J0IHtzdWJzY3JpYmVJZCwgdW5zdWJzY3JpYmVJZCwgZ2V0TG9jYWxTdG9yYWdlSXRlbXMsIHNhdmVMb2NhbFN0b3JhZ2VJdGVtc30gZnJvbSAnLi9zdG9yYWdlLmpzJ1xuaW1wb3J0IHtMb2NhbFN0b3JhZ2VJdGVtfSBmcm9tICcuL2NvbW1vbi5qcydcbmltcG9ydCB7c2V0Q3VycmVudFN0YXRlRm9ySWR9IGZyb20gJy4vbW9uaXRvcmluZy5qcydcblxubGV0IFVOU1VCU0NSSUJFX1RFWFQgPSAndW5zdWJzY3JpYmUtcmV2J1xubGV0IFNVQlNDUklCRV9URVhUID0gJ3N1YnNjcmliZS1yZXYnXG5cbmlmIChsb2NhdGlvbi5ob3N0bmFtZS5tYXRjaCgvcmV2ZWRkaXRcXC5jb20kLykpIHtcbiAgICBVTlNVQlNDUklCRV9URVhUID0gJ3Vuc3Vic2NyaWJlJ1xuICAgIFNVQlNDUklCRV9URVhUID0gJ3N1YnNjcmliZSdcbn1cblxuZXhwb3J0IGNvbnN0IHNldFRleHRBbmRGdW5jdGlvbl9zdWJzY3JpYmUgPSAoaWQsIGVsZW1lbnQsIGNvbW1lbnRCb2R5KSA9PiB7XG4gICAgcmV0dXJuICQoZWxlbWVudCkudGV4dChTVUJTQ1JJQkVfVEVYVCkub2ZmKCdjbGljaycpLmNsaWNrKChldmVudE9iaikgPT4gc3Vic2NyaWJlSWRfY2hhbmdlVGV4dChpZCwgZXZlbnRPYmoudGFyZ2V0LCBjb21tZW50Qm9keSkpXG59XG5cbmV4cG9ydCBjb25zdCBzZXRUZXh0QW5kRnVuY3Rpb25fdW5zdWJzY3JpYmUgPSAoaWQsIGVsZW1lbnQsIGNvbW1lbnRCb2R5KSA9PiB7XG4gICAgcmV0dXJuICQoZWxlbWVudCkudGV4dChVTlNVQlNDUklCRV9URVhUKS5vZmYoJ2NsaWNrJykuY2xpY2soKGV2ZW50T2JqKSA9PiB1bnN1YnNjcmliZUlkX2NoYW5nZVRleHQoaWQsIGV2ZW50T2JqLnRhcmdldCwgY29tbWVudEJvZHkpKVxufVxuXG5jb25zdCBzdWJzY3JpYmVJZF9jaGFuZ2VUZXh0ID0gKGlkLCBlbGVtZW50LCBjb21tZW50Qm9keSA9ICcnKSA9PiB7XG4gICAgc3Vic2NyaWJlSWQoaWQsICgpID0+IHtcbiAgICAgICAgc2V0VGV4dEFuZEZ1bmN0aW9uX3Vuc3Vic2NyaWJlKGlkLCBlbGVtZW50LCBjb21tZW50Qm9keSlcbiAgICAgICAgc2V0Q3VycmVudFN0YXRlRm9ySWQoaWQsIHdpbmRvdy5sb2NhdGlvbi5ocmVmLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoY29tbWVudEJvZHkpIHtcbiAgICAgICAgICAgICAgICBnZXRMb2NhbFN0b3JhZ2VJdGVtcygnb3RoZXInLCBmYWxzZSlcbiAgICAgICAgICAgICAgICAudGhlbihzdG9yZWRJdGVtcyA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBzdG9yZWRJdGVtc1tpZF1cbiAgICAgICAgICAgICAgICAgICAgLy8gY29udGVudCBmcm9tIHByaXZhdGUgc3VicyB3b24ndCBiZSBzYXZlZCBiL2NcbiAgICAgICAgICAgICAgICAgICAgLy8gbm8gaXRlbSBpcyBjcmVhdGVkIGZvciB0aGF0IChyZWRkaXQgcmV0dXJucyBubyBkYXRhIGZvclxuICAgICAgICAgICAgICAgICAgICAvLyBub24tbG9nZ2VkLWluIGF1dGhlbnRpY2F0ZWQgYXBwcylcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1PYmogPSBuZXcgTG9jYWxTdG9yYWdlSXRlbSh7b2JqZWN0OiBpdGVtfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1PYmouc2V0VGV4dChjb21tZW50Qm9keSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlZEl0ZW1zW2lkXSA9IGl0ZW1PYmpcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhdmVMb2NhbFN0b3JhZ2VJdGVtcygnb3RoZXInLCBmYWxzZSwgc3RvcmVkSXRlbXMpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH0pXG4gICAgcmV0dXJuIGZhbHNlXG59XG5cbmNvbnN0IHVuc3Vic2NyaWJlSWRfY2hhbmdlVGV4dCA9IChpZCwgZWxlbWVudCwgY29tbWVudEJvZHkpID0+IHtcbiAgICB1bnN1YnNjcmliZUlkKGlkLCAoKSA9PiB7XG4gICAgICAgIHNldFRleHRBbmRGdW5jdGlvbl9zdWJzY3JpYmUoaWQsIGVsZW1lbnQsIGNvbW1lbnRCb2R5KVxuICAgIH0pXG4gICAgcmV0dXJuIGZhbHNlXG59XG4iLCJpbXBvcnQge2xvb2t1cEl0ZW1zQnlJRCwgbG9va3VwSXRlbXNCeVVzZXIsIGdldEF1dGh9IGZyb20gJy4vcmVxdWVzdHMuanMnXG5pbXBvcnQge1JFTU9WRUQsIERFTEVURUQsIEFQUFJPVkVELCBMT0NLRUQsIFVOTE9DS0VELCBFRElURUQsXG4gICAgICAgIGFkZExvY2FsU3RvcmFnZUl0ZW1zLCBnZXRMb2NhbFN0b3JhZ2VJdGVtcyxcbiAgICAgICAgTUFYX1NZTkNfU1RPUkFHRV9JVEVNU19QRVJfT0JKRUNULCBNQVhfU1lOQ19TVE9SQUdFX0NIQU5HRVMsXG4gICAgICAgIGdldE9iamVjdE5hbWVzRm9yVGhpbmcgfSBmcm9tICcuL3N0b3JhZ2UuanMnXG5pbXBvcnQge2NyZWF0ZU5vdGlmaWNhdGlvbiwgdXBkYXRlQmFkZ2VVbnNlZW5Db3VudCwgdHJpbURpY3RfYnlfbnVtYmVyVmFsdWVkQXR0cmlidXRlLFxuICAgICAgICBpc1VzZXJEZWxldGVkSXRlbSwgaXNSZW1vdmVkSXRlbSxcbiAgICAgICAgSXRlbUZvclN0b3JhZ2UsIExvY2FsU3RvcmFnZUl0ZW0sIENoYW5nZUZvclN0b3JhZ2V9IGZyb20gJy4vY29tbW9uLmpzJ1xuXG5cbmNvbnN0IFNVQlNDUklCRURfRlJPTV9SRURESVQgPSAwXG5jb25zdCBTVUJTQ1JJQkVEX0ZST01fUkVWRURESVQgPSAxXG5jb25zdCBTVUJTQ1JJQkVEX0ZST01fTkEgPSAyXG5cbmV4cG9ydCBjb25zdCBzZXRDdXJyZW50U3RhdGVGb3JJZCA9IChpZCwgc3Vic2NyaWJlZEZyb21VUkwsIGNhbGxiYWNrID0gKCkgPT4ge30pID0+IHtcbiAgICBsZXQgc3Vic2NyaWJlZEZyb20gPSBTVUJTQ1JJQkVEX0ZST01fUkVERElUXG4gICAgaWYgKHN1YnNjcmliZWRGcm9tVVJMLm1hdGNoKC9eaHR0cHM6XFwvXFwvd3d3LnJldmVkZGl0LmNvbS8pKSB7XG4gICAgICAgIHN1YnNjcmliZWRGcm9tID0gU1VCU0NSSUJFRF9GUk9NX1JFVkVERElUXG4gICAgfVxuICAgIGNocm9tZS5zdG9yYWdlLnN5bmMuZ2V0KG51bGwsIGZ1bmN0aW9uIChzdG9yYWdlKSB7XG4gICAgICAgIGdldEF1dGgoKVxuICAgICAgICAudGhlbigoYXV0aCkgPT4ge1xuICAgICAgICAgICAgY2hlY2tGb3JDaGFuZ2VzX3RoaW5nX2J5SWQoW2lkXSwgJ290aGVyJywgZmFsc2UsIGF1dGgsIHN0b3JhZ2UsIHN1YnNjcmliZWRGcm9tLCB7fSwgY2FsbGJhY2spXG4gICAgICAgIH0pXG4gICAgfSlcbn1cblxuXG5leHBvcnQgY29uc3QgY2hlY2tGb3JDaGFuZ2VzID0gKCkgPT4ge1xuICAgIGNocm9tZS5zdG9yYWdlLnN5bmMuZ2V0KG51bGwsIGZ1bmN0aW9uIChzdG9yYWdlKSB7XG4gICAgICAgIHZhciB1c2VycyA9IE9iamVjdC5rZXlzKHN0b3JhZ2UudXNlcl9zdWJzY3JpcHRpb25zKVxuICAgICAgICB2YXIgb3RoZXIgPSBPYmplY3Qua2V5cyhzdG9yYWdlLm90aGVyX3N1YnNjcmlwdGlvbnMpXG4gICAgICAgIGlmICh1c2Vycy5sZW5ndGggfHwgb3RoZXIubGVuZ3RoKSB7XG4gICAgICAgICAgICBnZXRBdXRoKClcbiAgICAgICAgICAgIC50aGVuKChhdXRoKSA9PiB7XG4gICAgICAgICAgICAgICAgY2hlY2tGb3JDaGFuZ2VzX290aGVyKGF1dGgsIHN0b3JhZ2UpXG4gICAgICAgICAgICAgICAgY2hlY2tGb3JDaGFuZ2VzX3VzZXJzKHVzZXJzLCBhdXRoLCBzdG9yYWdlKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH0pXG59XG5cbmZ1bmN0aW9uIGNoZWNrRm9yQ2hhbmdlc191c2Vycyh1c2VycywgYXV0aCwgc3RvcmFnZSkge1xuICAgIGlmICh1c2Vycy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgdXNlciA9IHVzZXJzWzBdXG5cbiAgICAgICAgbG9va3VwSXRlbXNCeVVzZXIodXNlciwgJycsICduZXcnLCAnJywgYXV0aClcbiAgICAgICAgLnRoZW4oaXRlbXMgPT4ge1xuICAgICAgICAgICAgaWYgKCEgaXRlbXMpIHJldHVybiAvLyBoYW5kbGUgZXhwZWN0ZWQgZXJyb3JzXG4gICAgICAgICAgICB2YXIgaWRzID0gW11cbiAgICAgICAgICAgIGNvbnN0IGl0ZW1Mb29rdXAgPSB7fVxuICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICBpZHMucHVzaChpdGVtLmRhdGEubmFtZSlcbiAgICAgICAgICAgICAgICBpdGVtTG9va3VwW2l0ZW0uZGF0YS5uYW1lXSA9IGl0ZW0uZGF0YVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGNoZWNrRm9yQ2hhbmdlc190aGluZ19ieUlkKGlkcywgdXNlciwgdHJ1ZSwgYXV0aCwgc3RvcmFnZSwgU1VCU0NSSUJFRF9GUk9NX05BLCBpdGVtTG9va3VwLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY2hlY2tGb3JDaGFuZ2VzX3VzZXJzKHVzZXJzLnNsaWNlKDEpLCBhdXRoLCBzdG9yYWdlKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNoZWNrRm9yQ2hhbmdlc19vdGhlcihhdXRoLCBzdG9yYWdlKSB7XG4gICAgY29uc3QgaWRzID0gT2JqZWN0LmtleXMoc3RvcmFnZS5vdGhlcl9zdWJzY3JpcHRpb25zKVxuICAgIGlmIChpZHMubGVuZ3RoKSB7XG4gICAgICAgIGNoZWNrRm9yQ2hhbmdlc190aGluZ19ieUlkKGlkcywgJ290aGVyJywgZmFsc2UsIGF1dGgsIHN0b3JhZ2UsIFNVQlNDUklCRURfRlJPTV9OQSlcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNoZWNrRm9yQ2hhbmdlc190aGluZ19ieUlkIChpZHMsIHRoaW5nLCBpc1VzZXIsIGF1dGgsIHN0b3JhZ2UsIHN1YnNjcmliZWRGcm9tLCBpdGVtTG9va3VwID0ge30sIGNhbGxiYWNrID0gKCkgPT4ge30pIHtcbiAgICBsb29rdXBJdGVtc0J5SUQoaWRzLCBhdXRoKVxuICAgIC50aGVuKGl0ZW1zID0+IHtcbiAgICAgICAgaWYgKCEgaXRlbXMpIHJldHVybiAvLyBoYW5kbGUgZXhwZWN0ZWQgZXJyb3JzXG4gICAgICAgIGNvbnN0IHJlbW92YWxfc3RhdHVzID0gc3RvcmFnZS5vcHRpb25zLnJlbW92YWxfc3RhdHVzXG4gICAgICAgIGNvbnN0IGxvY2tfc3RhdHVzID0gc3RvcmFnZS5vcHRpb25zLmxvY2tfc3RhdHVzXG5cbiAgICAgICAgY29uc3Qga2V5cyA9IGdldE9iamVjdE5hbWVzRm9yVGhpbmcodGhpbmcsIGlzVXNlcilcblxuICAgICAgICBjb25zdCBrbm93bl9yZW1vdmVkID0gc3RvcmFnZVtrZXlzWydyZW1vdmVkJ11dIHx8IHt9XG4gICAgICAgIGNvbnN0IGtub3duX2FwcHJvdmVkID0gc3RvcmFnZVtrZXlzWydhcHByb3ZlZCddXSB8fCB7fVxuICAgICAgICBjb25zdCBrbm93bl9sb2NrZWQgPSBzdG9yYWdlW2tleXNbJ2xvY2tlZCddXSB8fCB7fVxuICAgICAgICBjb25zdCBrbm93bl91bmxvY2tlZCA9IHN0b3JhZ2Vba2V5c1sndW5sb2NrZWQnXV0gfHwge31cbiAgICAgICAgY29uc3QgY2hhbmdlcyA9IHN0b3JhZ2Vba2V5c1snY2hhbmdlcyddXSB8fCBbXVxuICAgICAgICBpZiAoISBpc1VzZXIpIHtcbiAgICAgICAgICAgIGl0ZW1Mb29rdXAgPSB7fVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlbW92ZWQgPSBbXSwgYXBwcm92ZWQgPSBbXSwgbG9ja2VkID0gW10sIHVubG9ja2VkID0gW11cbiAgICAgICAgaXRlbXMuZm9yRWFjaChpdGVtV3JhcCA9PiB7XG4gICAgICAgICAgICBjb25zdCBpdGVtID0gaXRlbVdyYXAuZGF0YVxuICAgICAgICAgICAgaWYgKCEgaXNVc2VyKSB7XG4gICAgICAgICAgICAgICAgaXRlbUxvb2t1cFtpdGVtLm5hbWVdID0gaXRlbVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzUmVtb3ZlZEl0ZW0oaXRlbSkpIHtcbiAgICAgICAgICAgICAgICByZW1vdmVkLnB1c2goaXRlbS5uYW1lKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhcHByb3ZlZC5wdXNoKGl0ZW0ubmFtZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpdGVtLmxvY2tlZCkge1xuICAgICAgICAgICAgICAgIGxvY2tlZC5wdXNoKGl0ZW0ubmFtZSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdW5sb2NrZWQucHVzaChpdGVtLm5hbWUpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC8vIG1hcmsgaXRlbXMgdGhhdCBkbyBub3QgZXhpc3QgaW4gYXJyYXlzXG4gICAgICAgIC8vIGNoYW5nZSBoYXBwZW5zIGlmOlxuICAgICAgICAvLyAgICAgIHRyYWNraW5nIHJlbW92YWxzICYmIGl0ZW0gaXMgcmVtb3ZlZFxuICAgICAgICAvLyAgICAgIHRyYWNraW5nIHJlbW92YWxzICYmIGl0ZW0gd2FzIGluIHJlbW92ZWQsIG5vdyBpbiBhcHByb3ZlZFxuICAgICAgICBjb25zdCBuZXdMb2NhbFN0b3JhZ2VJdGVtcyA9IHt9XG5cbiAgICAgICAgY29uc3QgY2hhbmdlVHlwZXMgPSBbXVxuICAgICAgICBsZXQgbnVtX2NoYW5nZXMgPSAwXG4gICAgICAgIGdldExvY2FsU3RvcmFnZUl0ZW1zKHRoaW5nLCBpc1VzZXIpXG4gICAgICAgIC50aGVuKGV4aXN0aW5nTG9jYWxTdG9yYWdlSXRlbXMgPT4ge1xuICAgICAgICAgICAgaWYgKHJlbW92YWxfc3RhdHVzLnRyYWNrKSB7XG4gICAgICAgICAgICAgICAgbnVtX2NoYW5nZXMgKz0gbWFya0NoYW5nZXMocmVtb3ZlZCwgUkVNT1ZFRCwgJ21vZCByZW1vdmVkJywga25vd25fcmVtb3ZlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHByb3ZlZCwgQVBQUk9WRUQsICdhcHByb3ZlZCcsIGtub3duX2FwcHJvdmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZXMsIGl0ZW1Mb29rdXAsIHJlbW92YWxfc3RhdHVzLm5vdGlmeSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdMb2NhbFN0b3JhZ2VJdGVtcywgY2hhbmdlVHlwZXMsIGlzVXNlciwgc3Vic2NyaWJlZEZyb20sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdMb2NhbFN0b3JhZ2VJdGVtcylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsb2NrX3N0YXR1cy50cmFjaykge1xuICAgICAgICAgICAgICAgIG51bV9jaGFuZ2VzICs9IG1hcmtDaGFuZ2VzKGxvY2tlZCwgTE9DS0VELCAnbG9ja2VkJywga25vd25fbG9ja2VkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVubG9ja2VkLCBVTkxPQ0tFRCwgJ3VubG9ja2VkJywga25vd25fdW5sb2NrZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlcywgaXRlbUxvb2t1cCwgbG9ja19zdGF0dXMubm90aWZ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0xvY2FsU3RvcmFnZUl0ZW1zLCBjaGFuZ2VUeXBlcywgaXNVc2VyLCBzdWJzY3JpYmVkRnJvbSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ0xvY2FsU3RvcmFnZUl0ZW1zKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobnVtX2NoYW5nZXMgJiYgY2hhbmdlVHlwZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY3JlYXRlTm90aWZpY2F0aW9uKFxuICAgICAgICAgICAgICAgICAgICB7bm90aWZpY2F0aW9uSWQ6IHRoaW5nLFxuICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRoaW5nLFxuICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYCR7bnVtX2NoYW5nZXN9IG5ldyBbJHtjaGFuZ2VUeXBlcy5qb2luKCcsICcpfV0gYWN0aW9ucywgY2xpY2sgdG8gdmlld2B9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2hyb21lLnN0b3JhZ2Uuc3luYy5zZXQoe1trZXlzWydyZW1vdmVkJ11dOiB0cmltRGljdF9ieV9udW1iZXJWYWx1ZWRBdHRyaWJ1dGUoa25vd25fcmVtb3ZlZCwgTUFYX1NZTkNfU1RPUkFHRV9JVEVNU19QRVJfT0JKRUNULCAnYycpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtrZXlzWydhcHByb3ZlZCddXTogdHJpbURpY3RfYnlfbnVtYmVyVmFsdWVkQXR0cmlidXRlKGtub3duX2FwcHJvdmVkLCBNQVhfU1lOQ19TVE9SQUdFX0lURU1TX1BFUl9PQkpFQ1QsICdjJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW2tleXNbJ2xvY2tlZCddXTogdHJpbURpY3RfYnlfbnVtYmVyVmFsdWVkQXR0cmlidXRlKGtub3duX2xvY2tlZCwgTUFYX1NZTkNfU1RPUkFHRV9JVEVNU19QRVJfT0JKRUNULCAnYycpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtrZXlzWyd1bmxvY2tlZCddXTogdHJpbURpY3RfYnlfbnVtYmVyVmFsdWVkQXR0cmlidXRlKGtub3duX3VubG9ja2VkLCBNQVhfU1lOQ19TVE9SQUdFX0lURU1TX1BFUl9PQkpFQ1QsICdjJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW2tleXNbJ2NoYW5nZXMnXV06IGNoYW5nZXMuc2xpY2UoLU1BWF9TWU5DX1NUT1JBR0VfQ0hBTkdFUylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sICgpID0+IHtcbiAgICAgICAgICAgICAgICB1cGRhdGVCYWRnZVVuc2VlbkNvdW50KClcbiAgICAgICAgICAgICAgICBhZGRMb2NhbFN0b3JhZ2VJdGVtcyhuZXdMb2NhbFN0b3JhZ2VJdGVtcywgdGhpbmcsIGlzVXNlciwgY2FsbGJhY2spXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgIH0pXG59XG5cbi8vIG5ld0xvY2FsU3RvcmFnZUl0ZW1zIG9wZXJhdGVzIGFzIGEgcmV0dXJuIHZhbHVlXG5mdW5jdGlvbiBtYXJrQ2hhbmdlcyAoYWxlcnRfY3VycmVudF9saXN0LCBhbGVydF90eXBlLCBhbGVydF90ZXh0LCBhbGVydF9rbm93bl9oYXNoLFxuICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbF9jdXJyZW50X2xpc3QsIG5vcm1hbF90eXBlLCBub3JtYWxfdGV4dCwgbm9ybWFsX2tub3duX2hhc2gsXG4gICAgICAgICAgICAgICAgICAgICAgY2hhbmdlcywgaXRlbUxvb2t1cCwgbm90aWZ5LCBuZXdMb2NhbFN0b3JhZ2VJdGVtcywgY2hhbmdlVHlwZXMsXG4gICAgICAgICAgICAgICAgICAgICAgaXNVc2VyLCBzdWJzY3JpYmVkRnJvbSwgZXhpc3RpbmdMb2NhbFN0b3JhZ2VJdGVtcykge1xuICAgIGNvbnN0IGFsZXJ0X3Vuc2Vlbl9pZHMgPSBbXSxcbiAgICAgICAgICBub3JtYWxfdW5zZWVuX2lkcyA9IFtdLFxuICAgICAgICAgIGFsZXJ0X3VzZXJEZWxldGVkX3Vuc2Vlbl9pZHMgPSBbXSxcbiAgICAgICAgICBub3cgPSBNYXRoLmZsb29yKG5ldyBEYXRlKCkvMTAwMClcblxuICAgIGFsZXJ0X2N1cnJlbnRfbGlzdC5mb3JFYWNoKG5hbWUgPT4ge1xuICAgICAgICBjb25zdCBpdGVtID0gaXRlbUxvb2t1cFtuYW1lXVxuICAgICAgICAvLyAxLiBpbiB0aGUgY2FzZSBvZiBhIG5vbi11c2VycGFnZS10cmFja2VkIChpc1VzZXI9ZmFsc2UpIHJlbW92ZWQgY29tbWVudCwgZG9uJ3Qgb3ZlcndyaXRlIGxvY2FsIHN0b3JhZ2UgYi9jXG4gICAgICAgIC8vIGlmIGl0IHdlcmUgb3ZlcndyaXR0ZW4sIGJvZHkgd291bGQgYXBwZWFyIG9uIGhpc3RvcnkgcGFnZSBhcyBbcmVtb3ZlZF1cbiAgICAgICAgLy8gMi4gaW4gdGhlIGNhc2Ugb2YgdXNlcnBhZ2UgdHJhY2tpbmcgKGlzVXNlcj10cnVlKSwgb25seSBuZWVkIHRvIHNhdmUgdGhlIHRleHQgaW4gbG9jYWwgc3RvcmFnZVxuICAgICAgICAvLyB3aGVuIHRoZXJlIGlzIGEgY2hhbmdlLiB1c2VyIHBhZ2UgbG9va3VwIChpdGVtTG9va3VwKSB3aWxsIGhhdmUgb3JpZ2luYWwgdGV4dFxuICAgICAgICBpZiAoISBpc1VzZXIgJiYgISBleGlzdGluZ0xvY2FsU3RvcmFnZUl0ZW1zW25hbWVdKSB7XG4gICAgICAgICAgICBuZXdMb2NhbFN0b3JhZ2VJdGVtc1tuYW1lXSA9IG5ldyBMb2NhbFN0b3JhZ2VJdGVtKHtpdGVtOiBpdGVtLCBvYnNlcnZlZF91dGM6IG5vd30pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEgKG5hbWUgaW4gYWxlcnRfa25vd25faGFzaCkpIHtcbiAgICAgICAgICAgIC8vIG1hcmtVbnNlZW4gaXMgYWx3YXlzIHRydWUgZXhjZXB0IHdoZW4gc3Vic2NyaWJpbmcgdmlhIGEgcmVkZGl0IChub3QgcmV2ZWRkaXQpIHBhZ2UgdG8gYSBuZXcgSUQgZm9yICdvdGhlcidcbiAgICAgICAgICAgIC8vIHN1YnNjcmlwdGlvbnMuIEFzIGxvbmcgYXMgdGhlIGl0ZW0gaXMgbm90ICdyZW1vdmVkJywgdGhlIGN1cnJlbnQgc3RhdGUgaXMgc3RvcmVkIGFzICdzZWVuJyAodW5zZWVuPWZhbHNlKS5cbiAgICAgICAgICAgIC8vIEl0IGlzIGFzc3VtZWQgdGhhdCB1c2VycyBzdWJzY3JpYmluZyBmcm9tIHJldmVkZGl0IHBhZ2VzIHdpbGwgYWxyZWFkeSBoYXZlIHNlZW4gYWxsIHRoZSBjdXJyZW50IG1vZCBhY3Rpb25zLFxuICAgICAgICAgICAgLy8gYW5kIHVzZXJzIHN1YnNjcmliaW5nIGZyb20gYSByZWRkaXQgcGFnZSB3aWxsIGFscmVhZHkga25vdyBhYm91dCBsb2NrZWQgaXRlbXNcbiAgICAgICAgICAgIGxldCBtYXJrVW5zZWVuID0gdHJ1ZVxuICAgICAgICAgICAgaWYgKChzdWJzY3JpYmVkRnJvbSA9PT0gU1VCU0NSSUJFRF9GUk9NX1JFRERJVCAmJiBhbGVydF90eXBlICE9PSBSRU1PVkVEKSB8fFxuICAgICAgICAgICAgICAgICBzdWJzY3JpYmVkRnJvbSA9PT0gU1VCU0NSSUJFRF9GUk9NX1JFVkVERElUKSB7XG4gICAgICAgICAgICAgICAgbWFya1Vuc2VlbiA9IGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhbGVydF9rbm93bl9oYXNoW25hbWVdID0gbmV3IEl0ZW1Gb3JTdG9yYWdlKGl0ZW0uY3JlYXRlZF91dGMsIG1hcmtVbnNlZW4pXG4gICAgICAgICAgICBkZWxldGUgbm9ybWFsX2tub3duX2hhc2hbbmFtZV1cbiAgICAgICAgICAgIGlmIChtYXJrVW5zZWVuKSB7XG4gICAgICAgICAgICAgICAgbGV0IGFsZXJ0X3R5cGVfdmFyID0gYWxlcnRfdHlwZVxuICAgICAgICAgICAgICAgIGlmIChpc1VzZXJEZWxldGVkSXRlbShpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICBhbGVydF90eXBlX3ZhciA9IERFTEVURURcbiAgICAgICAgICAgICAgICAgICAgYWxlcnRfdXNlckRlbGV0ZWRfdW5zZWVuX2lkcy5wdXNoKG5hbWUpXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYWxlcnRfdW5zZWVuX2lkcy5wdXNoKG5hbWUpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNoYW5nZXMucHVzaChuZXcgQ2hhbmdlRm9yU3RvcmFnZSh7aWQ6IG5hbWUsIG9ic2VydmVkX3V0Yzogbm93LCBjaGFuZ2VfdHlwZTogYWxlcnRfdHlwZV92YXJ9KSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc1VzZXIpIHtcbiAgICAgICAgICAgICAgICBuZXdMb2NhbFN0b3JhZ2VJdGVtc1tuYW1lXSA9IG5ldyBMb2NhbFN0b3JhZ2VJdGVtKHtpdGVtOiBpdGVtLCBvYnNlcnZlZF91dGM6IG5vd30pXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KVxuICAgIG5vcm1hbF9jdXJyZW50X2xpc3QuZm9yRWFjaChuYW1lID0+IHtcbiAgICAgICAgY29uc3QgaXRlbSA9IGl0ZW1Mb29rdXBbbmFtZV1cbiAgICAgICAgLy8gc2F2ZSBvcmlnaW5hbCB0ZXh0IGZvciBhbGwgbm9uLXVzZXJwYWdlLXRyYWNrZWQgaXRlbXMgc2luY2UgY29tbWVudCB0ZXh0IGNhbiBkaXNhcHBlYXJcbiAgICAgICAgaWYgKCEgaXNVc2VyICYmICEgZXhpc3RpbmdMb2NhbFN0b3JhZ2VJdGVtc1tuYW1lXSkge1xuICAgICAgICAgICAgbmV3TG9jYWxTdG9yYWdlSXRlbXNbbmFtZV0gPSBuZXcgTG9jYWxTdG9yYWdlSXRlbSh7aXRlbTogaXRlbSwgb2JzZXJ2ZWRfdXRjOiBub3d9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChuYW1lIGluIGFsZXJ0X2tub3duX2hhc2gpIHtcbiAgICAgICAgICAgIG5vcm1hbF9rbm93bl9oYXNoW25hbWVdID0gbmV3IEl0ZW1Gb3JTdG9yYWdlKGl0ZW0uY3JlYXRlZF91dGMsIHRydWUpXG4gICAgICAgICAgICBkZWxldGUgYWxlcnRfa25vd25faGFzaFtuYW1lXVxuXG4gICAgICAgICAgICBjaGFuZ2VzLnB1c2gobmV3IENoYW5nZUZvclN0b3JhZ2Uoe2lkOiBuYW1lLCBvYnNlcnZlZF91dGM6IG5vdywgY2hhbmdlX3R5cGU6IG5vcm1hbF90eXBlfSkpXG4gICAgICAgICAgICBub3JtYWxfdW5zZWVuX2lkcy5wdXNoKG5hbWUpXG5cbiAgICAgICAgICAgIG5ld0xvY2FsU3RvcmFnZUl0ZW1zW25hbWVdID0gbmV3IExvY2FsU3RvcmFnZUl0ZW0oe2l0ZW06IGl0ZW0sIG9ic2VydmVkX3V0Yzogbm93fSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5vcm1hbF9rbm93bl9oYXNoW25hbWVdID0gbmV3IEl0ZW1Gb3JTdG9yYWdlKGl0ZW0uY3JlYXRlZF91dGMsIGZhbHNlKVxuICAgICAgICB9XG4gICAgfSlcbiAgICBjb25zdCBudW1fY2hhbmdlcyA9IGFsZXJ0X3Vuc2Vlbl9pZHMubGVuZ3RoICsgbm9ybWFsX3Vuc2Vlbl9pZHMubGVuZ3RoICsgYWxlcnRfdXNlckRlbGV0ZWRfdW5zZWVuX2lkcy5sZW5ndGhcbiAgICBpZiAobm90aWZ5ICYmIG51bV9jaGFuZ2VzKSB7XG4gICAgICAgIGlmIChhbGVydF91bnNlZW5faWRzLmxlbmd0aCkgY2hhbmdlVHlwZXMucHVzaChhbGVydF90ZXh0KVxuICAgICAgICBpZiAoYWxlcnRfdXNlckRlbGV0ZWRfdW5zZWVuX2lkcy5sZW5ndGgpIGNoYW5nZVR5cGVzLnB1c2goJ3VzZXIgZGVsZXRlZCcpXG4gICAgICAgIGlmIChub3JtYWxfdW5zZWVuX2lkcy5sZW5ndGgpIGNoYW5nZVR5cGVzLnB1c2gobm9ybWFsX3RleHQpXG4gICAgfVxuICAgIHJldHVybiBudW1fY2hhbmdlc1xufVxuIiwiaW1wb3J0IHttYXJrSURzQXNTZWVuSWZTdWJzY3JpYmVkfSBmcm9tICcuL3N0b3JhZ2UuanMnXG5pbXBvcnQge3NldFRleHRBbmRGdW5jdGlvbl9zdWJzY3JpYmUsc2V0VGV4dEFuZEZ1bmN0aW9uX3Vuc3Vic2NyaWJlfSBmcm9tICcuL2NvbnRlbnQtY29tbW9uLmpzJ1xuXG5jb25zdCBpZF9tYXRjaCA9IC9edFsxM11fLisvXG5cbmV4cG9ydCBjb25zdCByZXZkZGl0TW9kaWZpY2F0aW9ucyA9IChzdG9yYWdlLCB1c2VyLCBpc1VzZXJQYWdlLCBpc0luZm9QYWdlKSA9PiB7XG4gICAgaWYgKGlzVXNlclBhZ2UgfHwgaXNJbmZvUGFnZSkge1xuICAgICAgICB3YWl0Rm9yQWRkZWROb2RlX3dpdGhNaW5BdHRWYWx1ZSgnbnVtSXRlbXNMb2FkZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFpbicpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGF0YS1udW1pdGVtc2xvYWRlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmRJRHNGb3JVc2VyQW5kTWFyayhzdG9yYWdlLCB1c2VyLCBpc1VzZXJQYWdlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgIH1cblxuICAgIGNvbnN0IHNlbGVjdG9yX3Bvc3RzID0gJy5wb3N0Om5vdCguZGVsZXRlZCknXG4gICAgY29uc3Qgc2VsZWN0b3JfY29tbWVudHMgPSAnLmNvbW1lbnQtYm9keS1hbmQtbGlua3MnXG4gICAgJChkb2N1bWVudCkuYXJyaXZlKHNlbGVjdG9yX2NvbW1lbnRzLCAoZWxlbWVudCkgPT4ge1xuICAgICAgICBhZGRTdWJzY3JpYmVMaW5rc19yZXZkZGl0X2NvbW1lbnRzKFtlbGVtZW50XSwgc3RvcmFnZS5vdGhlcl9zdWJzY3JpcHRpb25zKVxuICAgIH0pXG4gICAgYWRkU3Vic2NyaWJlTGlua3NfcmV2ZGRpdF9jb21tZW50cygkKHNlbGVjdG9yX2NvbW1lbnRzKSwgc3RvcmFnZS5vdGhlcl9zdWJzY3JpcHRpb25zKVxuICAgICQoZG9jdW1lbnQpLmFycml2ZShzZWxlY3Rvcl9wb3N0cywgKGVsZW1lbnQpID0+IHtcbiAgICAgICAgYWRkU3Vic2NyaWJlTGlua3NfcmV2ZGRpdF9wb3N0cyhbZWxlbWVudF0sIHN0b3JhZ2Uub3RoZXJfc3Vic2NyaXB0aW9ucylcbiAgICB9KVxuICAgIHNldFRpbWVvdXQoKCkgPT4geyAvLyB0aGlzIGRlbGF5IGlzIG5lY2Vzc2FyeSB0byBtYWtlIGJ1dHRvbiBhcHBlYXIgb24gdGhyZWFkLXBhZ2UgcG9zdCBpdGVtcywgbm90IHN1cmUgd2h5XG4gICAgICAgIGFkZFN1YnNjcmliZUxpbmtzX3JldmRkaXRfcG9zdHMoJChzZWxlY3Rvcl9wb3N0cyksIHN0b3JhZ2Uub3RoZXJfc3Vic2NyaXB0aW9ucylcbiAgICB9LCAyMDAwKVxuXG59XG5cbmNvbnN0IGFkZFN1YnNjcmliZUxpbmtzX3JldmRkaXRfY29tbWVudHMgPSAoZWxlbWVudHMsIHN1YnNjcmlwdGlvbnMpID0+IHtcbiAgICAkKGVsZW1lbnRzKS5lYWNoKChpZHgsIHRhcmdldGVkRWxlbWVudCkgPT4ge1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gdGFyZ2V0ZWRFbGVtZW50LnBhcmVudE5vZGVcbiAgICAgICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkZWxldGVkJykpIHJldHVyblxuICAgICAgICBjb25zdCBpZCA9IGVsZW1lbnQuaWRcbiAgICAgICAgY29uc3QgbGlua3MgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb21tZW50LWxpbmtzJylcbiAgICAgICAgbGV0IGNvbW1lbnRCb2R5ID0gJydcbiAgICAgICAgbGV0IGJvZHlFbGVtZW50ID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY29tbWVudC1ib2R5JylcbiAgICAgICAgaWYgKGJvZHlFbGVtZW50ICYmIGlkLm1hdGNoKC9edDFfLykpIHtcbiAgICAgICAgICAgIGNvbW1lbnRCb2R5ID0gYm9keUVsZW1lbnQudGV4dENvbnRlbnRcbiAgICAgICAgfVxuICAgICAgICBsZXQgJG5ld0xpbmsgPSBzZXRUZXh0QW5kRnVuY3Rpb25fc3Vic2NyaWJlKGlkLCAkKGA8YSBocmVmPVwiXCI+YClbMF0sIGNvbW1lbnRCb2R5KVxuICAgICAgICBpZiAoaWQgaW4gc3Vic2NyaXB0aW9ucykge1xuICAgICAgICAgICAgJG5ld0xpbmsgPSBzZXRUZXh0QW5kRnVuY3Rpb25fdW5zdWJzY3JpYmUoaWQsICQoYDxhIGhyZWY9XCJcIj5gKVswXSwgY29tbWVudEJvZHkpXG4gICAgICAgIH1cbiAgICAgICAgJChsaW5rcykuYXBwZW5kKCRuZXdMaW5rKVxuICAgIH0pXG59XG5cbmNvbnN0IGFkZFN1YnNjcmliZUxpbmtzX3JldmRkaXRfcG9zdHMgPSAoZWxlbWVudHMsIHN1YnNjcmlwdGlvbnMpID0+IHtcbiAgICAkKGVsZW1lbnRzKS5lYWNoKChpZHgsIGVsZW1lbnQpID0+IHtcbiAgICAgICAgY29uc3QgaWQgPSBlbGVtZW50LmlkXG4gICAgICAgIGNvbnN0IGxpbmtzID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9zdC1saW5rcycpXG4gICAgICAgIGxldCAkbmV3TGluayA9IHNldFRleHRBbmRGdW5jdGlvbl9zdWJzY3JpYmUoaWQsICQoYDxhIGhyZWY9XCJcIj5gKVswXSlcbiAgICAgICAgaWYgKGlkIGluIHN1YnNjcmlwdGlvbnMpIHtcbiAgICAgICAgICAgICRuZXdMaW5rID0gc2V0VGV4dEFuZEZ1bmN0aW9uX3Vuc3Vic2NyaWJlKGlkLCAkKGA8YSBocmVmPVwiXCI+YClbMF0pXG4gICAgICAgIH1cbiAgICAgICAgJChsaW5rcykuYXBwZW5kKCRuZXdMaW5rKVxuICAgIH0pXG59XG5cbmZ1bmN0aW9uIHdhaXRGb3JBZGRlZE5vZGVfd2l0aE1pbkF0dFZhbHVlKGlkLCBwYXJlbnQsIGF0dHJpYnV0ZSwgbWluQXR0cmlidXRlVmFsdWUsIGRvbmUpIHtcbiAgICBuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbihtdXRhdGlvbnMpIHtcbiAgICAgICAgdmFyIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICAgICAgICBpZiAoZWwgJiYgZWwuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZSkgPj0gbWluQXR0cmlidXRlVmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICB9XG4gICAgfSkub2JzZXJ2ZShwYXJlbnQgfHwgZG9jdW1lbnQsIHtcbiAgICAgICAgY2hpbGRMaXN0OiB0cnVlLFxuICAgICAgICBzdWJ0cmVlOiB0cnVlXG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGZpbmRJRHNGb3JVc2VyQW5kTWFyayhzdG9yYWdlLCB1c2VyLCBpc1VzZXJQYWdlKSB7XG4gICAgY29uc3Qgc2Vlbl9yZW1vdmVkX2lkcyA9IGdldElEc0hhc2hGcm9tU2VsZWN0b3IoJy5jb21tZW50LnJlbW92ZWQsIC5wb3N0LnJlbW92ZWQsIC5jb21tZW50LmRlbGV0ZWQsIC5wb3N0LmRlbGV0ZWQnKVxuICAgIGNvbnN0IHNlZW5fYXBwcm92ZWRfaWRzID0gZ2V0SURzSGFzaEZyb21TZWxlY3RvcignLmNvbW1lbnQ6bm90KC5yZW1vdmVkKSwgLnBvc3Q6bm90KC5yZW1vdmVkKScpXG4gICAgY29uc3Qgc2Vlbl9sb2NrZWRfaWRzID0gZ2V0SURzSGFzaEZyb21TZWxlY3RvcignLmNvbW1lbnQubG9ja2VkLCAucG9zdC5sb2NrZWQnKVxuICAgIGNvbnN0IHNlZW5fdW5sb2NrZWRfaWRzID0gZ2V0SURzSGFzaEZyb21TZWxlY3RvcignLmNvbW1lbnQ6bm90KC5sb2NrZWQpJywgJy5wb3N0Om5vdCgubG9ja2VkKScpXG4gICAgbWFya0lEc0FzU2VlbklmU3Vic2NyaWJlZChzdG9yYWdlLCB1c2VyLCBpc1VzZXJQYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Vlbl9yZW1vdmVkX2lkcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlZW5fYXBwcm92ZWRfaWRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Vlbl9sb2NrZWRfaWRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Vlbl91bmxvY2tlZF9pZHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocykgPT4ge1xuICAgICAgICBjaHJvbWUucnVudGltZS5zZW5kTWVzc2FnZSh7YWN0aW9uOiAndXBkYXRlLWJhZGdlJ30pXG4gICAgfSlcbn1cblxuZnVuY3Rpb24gZ2V0SURzSGFzaEZyb21TZWxlY3RvcihzZWxlY3Rvcikge1xuICAgIGNvbnN0IGhhc2ggPSB7fVxuICAgICQoc2VsZWN0b3IpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnN0IGlkID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ2lkJylcbiAgICAgICAgaGFzaFtpZF0gPSB0aGlzLmdldEF0dHJpYnV0ZSgnZGF0YS1jcmVhdGVkX3V0YycpXG4gICAgfSlcbiAgICByZXR1cm4gaGFzaFxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==