(()=>{var e={3150:function(e,r){var s,g,a;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,g=[e],s=function(e){"use strict";if(!globalThis.chrome?.runtime?.id)throw new Error("This script should only be loaded in a browser extension.");if(void 0===globalThis.browser||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const r="The message port closed before a response was received.",s=e=>{const s={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(s).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class g extends WeakMap{constructor(e,r=void 0){super(r),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const a=e=>e&&"object"==typeof e&&"function"==typeof e.then,n=(r,s)=>(...g)=>{e.runtime.lastError?r.reject(new Error(e.runtime.lastError.message)):s.singleCallbackArg||g.length<=1&&!1!==s.singleCallbackArg?r.resolve(g[0]):r.resolve(g)},m=e=>1==e?"argument":"arguments",t=(e,r)=>function(s,...g){if(g.length<r.minArgs)throw new Error(`Expected at least ${r.minArgs} ${m(r.minArgs)} for ${e}(), got ${g.length}`);if(g.length>r.maxArgs)throw new Error(`Expected at most ${r.maxArgs} ${m(r.maxArgs)} for ${e}(), got ${g.length}`);return new Promise(((a,m)=>{if(r.fallbackToNoCallback)try{s[e](...g,n({resolve:a,reject:m},r))}catch(n){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,n),s[e](...g),r.fallbackToNoCallback=!1,r.noCallback=!0,a()}else r.noCallback?(s[e](...g),a()):s[e](...g,n({resolve:a,reject:m},r))}))},A=(e,r,s)=>new Proxy(r,{apply:(r,g,a)=>s.call(g,e,...a)});let i=Function.call.bind(Object.prototype.hasOwnProperty);const o=(e,r={},s={})=>{let g=Object.create(null),a={has:(r,s)=>s in e||s in g,get(a,n,m){if(n in g)return g[n];if(!(n in e))return;let l=e[n];if("function"==typeof l)if("function"==typeof r[n])l=A(e,e[n],r[n]);else if(i(s,n)){let r=t(n,s[n]);l=A(e,e[n],r)}else l=l.bind(e);else if("object"==typeof l&&null!==l&&(i(r,n)||i(s,n)))l=o(l,r[n],s[n]);else{if(!i(s,"*"))return Object.defineProperty(g,n,{configurable:!0,enumerable:!0,get:()=>e[n],set(r){e[n]=r}}),l;l=o(l,r[n],s["*"])}return g[n]=l,l},set:(r,s,a,n)=>(s in g?g[s]=a:e[s]=a,!0),defineProperty:(e,r,s)=>Reflect.defineProperty(g,r,s),deleteProperty:(e,r)=>Reflect.deleteProperty(g,r)},n=Object.create(e);return new Proxy(n,a)},l=e=>({addListener(r,s,...g){r.addListener(e.get(s),...g)},hasListener:(r,s)=>r.hasListener(e.get(s)),removeListener(r,s){r.removeListener(e.get(s))}}),x=new g((e=>"function"!=typeof e?e:function(r){const s=o(r,{},{getContent:{minArgs:0,maxArgs:0}});e(s)})),c=new g((e=>"function"!=typeof e?e:function(r,s,g){let n,m,t=!1,A=new Promise((e=>{n=function(r){t=!0,e(r)}}));try{m=e(r,s,n)}catch(e){m=Promise.reject(e)}const i=!0!==m&&a(m);if(!0!==m&&!i&&!t)return!1;const o=e=>{e.then((e=>{g(e)}),(e=>{let r;r=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",g({__mozWebExtensionPolyfillReject__:!0,message:r})})).catch((e=>{console.error("Failed to send onMessage rejected reply",e)}))};return o(i?m:A),!0})),d=({reject:s,resolve:g},a)=>{e.runtime.lastError?e.runtime.lastError.message===r?g():s(new Error(e.runtime.lastError.message)):a&&a.__mozWebExtensionPolyfillReject__?s(new Error(a.message)):g(a)},u=(e,r,s,...g)=>{if(g.length<r.minArgs)throw new Error(`Expected at least ${r.minArgs} ${m(r.minArgs)} for ${e}(), got ${g.length}`);if(g.length>r.maxArgs)throw new Error(`Expected at most ${r.maxArgs} ${m(r.maxArgs)} for ${e}(), got ${g.length}`);return new Promise(((e,r)=>{const a=d.bind(null,{resolve:e,reject:r});g.push(a),s.sendMessage(...g)}))},b={devtools:{network:{onRequestFinished:l(x)}},runtime:{onMessage:l(c),onMessageExternal:l(c),sendMessage:u.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:u.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},p={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return s.privacy={network:{"*":p},services:{"*":p},websites:{"*":p}},o(e,b,s)};e.exports=s(chrome)}else e.exports=globalThis.browser},void 0===(a="function"==typeof s?s.apply(r,g):s)||(e.exports=a)},6086:(e,r,s)=>{"use strict";s(3368),s(3150)},9138:(e,r,s)=>{"use strict";s(97),s(3368),s(6086),s(3150);Math.floor(60*Math.random())},97:(e,r,s)=>{"use strict";s(3368),s(3150)},3368:(e,r,s)=>{"use strict";s(6086),s(3150)}},r={};function s(g){var a=r[g];if(void 0!==a)return a.exports;var n=r[g]={exports:{}};return e[g].call(n.exports,n,n.exports,s),n.exports}s.d=(e,r)=>{for(var g in r)s.o(r,g)&&!s.o(e,g)&&Object.defineProperty(e,g,{enumerable:!0,get:r[g]})},s.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),(()=>{"use strict";s(3368),s(6086),s(9138),s(3150)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixNQUNFRCxFQUFPMEgsUUFBVTVILFdBQVdPLE9BRWhDLE9BanZDdUQsMEQseUdDYUVzSCxLQUFLQyxNQUFzQixHQUFoQkQsS0FBS0UsUywyRkNkckVDLEVBQTJCLENBQUMsRUFHaEMsU0FBU0MsRUFBb0JDLEdBRTVCLElBQUlDLEVBQWVILEVBQXlCRSxHQUM1QyxRQUFxQjVHLElBQWpCNkcsRUFDSCxPQUFPQSxFQUFhUCxRQUdyQixJQUFJMUgsRUFBUzhILEVBQXlCRSxHQUFZLENBR2pETixRQUFTLENBQUMsR0FPWCxPQUhBUSxFQUFvQkYsR0FBVXBFLEtBQUs1RCxFQUFPMEgsUUFBUzFILEVBQVFBLEVBQU8wSCxRQUFTSyxHQUdwRS9ILEVBQU8wSCxPQUNmLENDckJBSyxFQUFvQkksRUFBSSxDQUFDVCxFQUFTVSxLQUNqQyxJQUFJLElBQUk1RyxLQUFPNEcsRUFDWEwsRUFBb0JNLEVBQUVELEVBQVk1RyxLQUFTdUcsRUFBb0JNLEVBQUVYLEVBQVNsRyxJQUM1RWxCLE9BQU9rRSxlQUFla0QsRUFBU2xHLEVBQUssQ0FBRWtELFlBQVksRUFBTW5ELElBQUs2RyxFQUFXNUcsSUFFMUUsRUNORHVHLEVBQW9CTSxFQUFJLENBQUNDLEVBQUtoRSxJQUFVaEUsT0FBT0UsVUFBVXFELGVBQWVELEtBQUswRSxFQUFLaEUsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3JldmVkZGl0X3JlYWxfdGltZS8uL25vZGVfbW9kdWxlcy93ZWJleHRlbnNpb24tcG9seWZpbGwvZGlzdC9icm93c2VyLXBvbHlmaWxsLmpzIiwid2VicGFjazovL3JldmVkZGl0X3JlYWxfdGltZS8uL3NyYy9zcmMvbW9uaXRvcmluZy5qcyIsIndlYnBhY2s6Ly9yZXZlZGRpdF9yZWFsX3RpbWUvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vcmV2ZWRkaXRfcmVhbF90aW1lL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9yZXZlZGRpdF9yZWFsX3RpbWUvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCJdLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoXCJ3ZWJleHRlbnNpb24tcG9seWZpbGxcIiwgW1wibW9kdWxlXCJdLCBmYWN0b3J5KTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIGZhY3RvcnkobW9kdWxlKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgbW9kID0ge1xuICAgICAgZXhwb3J0czoge31cbiAgICB9O1xuICAgIGZhY3RvcnkobW9kKTtcbiAgICBnbG9iYWwuYnJvd3NlciA9IG1vZC5leHBvcnRzO1xuICB9XG59KSh0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0aGlzLCBmdW5jdGlvbiAobW9kdWxlKSB7XG4gIC8qIHdlYmV4dGVuc2lvbi1wb2x5ZmlsbCAtIHYwLjEwLjAgLSBGcmkgQXVnIDEyIDIwMjIgMTk6NDI6NDQgKi9cblxuICAvKiAtKi0gTW9kZTogaW5kZW50LXRhYnMtbW9kZTogbmlsOyBqcy1pbmRlbnQtbGV2ZWw6IDIgLSotICovXG5cbiAgLyogdmltOiBzZXQgc3RzPTIgc3c9MiBldCB0dz04MDogKi9cblxuICAvKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gICAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXNcbiAgICogZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy4gKi9cbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgaWYgKCFnbG9iYWxUaGlzLmNocm9tZT8ucnVudGltZT8uaWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIHNjcmlwdCBzaG91bGQgb25seSBiZSBsb2FkZWQgaW4gYSBicm93c2VyIGV4dGVuc2lvbi5cIik7XG4gIH1cblxuICBpZiAodHlwZW9mIGdsb2JhbFRoaXMuYnJvd3NlciA9PT0gXCJ1bmRlZmluZWRcIiB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZ2xvYmFsVGhpcy5icm93c2VyKSAhPT0gT2JqZWN0LnByb3RvdHlwZSkge1xuICAgIGNvbnN0IENIUk9NRV9TRU5EX01FU1NBR0VfQ0FMTEJBQ0tfTk9fUkVTUE9OU0VfTUVTU0FHRSA9IFwiVGhlIG1lc3NhZ2UgcG9ydCBjbG9zZWQgYmVmb3JlIGEgcmVzcG9uc2Ugd2FzIHJlY2VpdmVkLlwiOyAvLyBXcmFwcGluZyB0aGUgYnVsayBvZiB0aGlzIHBvbHlmaWxsIGluIGEgb25lLXRpbWUtdXNlIGZ1bmN0aW9uIGlzIGEgbWlub3JcbiAgICAvLyBvcHRpbWl6YXRpb24gZm9yIEZpcmVmb3guIFNpbmNlIFNwaWRlcm1vbmtleSBkb2VzIG5vdCBmdWxseSBwYXJzZSB0aGVcbiAgICAvLyBjb250ZW50cyBvZiBhIGZ1bmN0aW9uIHVudGlsIHRoZSBmaXJzdCB0aW1lIGl0J3MgY2FsbGVkLCBhbmQgc2luY2UgaXQgd2lsbFxuICAgIC8vIG5ldmVyIGFjdHVhbGx5IG5lZWQgdG8gYmUgY2FsbGVkLCB0aGlzIGFsbG93cyB0aGUgcG9seWZpbGwgdG8gYmUgaW5jbHVkZWRcbiAgICAvLyBpbiBGaXJlZm94IG5lYXJseSBmb3IgZnJlZS5cblxuICAgIGNvbnN0IHdyYXBBUElzID0gZXh0ZW5zaW9uQVBJcyA9PiB7XG4gICAgICAvLyBOT1RFOiBhcGlNZXRhZGF0YSBpcyBhc3NvY2lhdGVkIHRvIHRoZSBjb250ZW50IG9mIHRoZSBhcGktbWV0YWRhdGEuanNvbiBmaWxlXG4gICAgICAvLyBhdCBidWlsZCB0aW1lIGJ5IHJlcGxhY2luZyB0aGUgZm9sbG93aW5nIFwiaW5jbHVkZVwiIHdpdGggdGhlIGNvbnRlbnQgb2YgdGhlXG4gICAgICAvLyBKU09OIGZpbGUuXG4gICAgICBjb25zdCBhcGlNZXRhZGF0YSA9IHtcbiAgICAgICAgXCJhbGFybXNcIjoge1xuICAgICAgICAgIFwiY2xlYXJcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJjbGVhckFsbFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldEFsbFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcImJvb2ttYXJrc1wiOiB7XG4gICAgICAgICAgXCJjcmVhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRDaGlsZHJlblwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldFJlY2VudFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldFN1YlRyZWVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRUcmVlXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAwLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDBcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwibW92ZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMixcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAyXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlbW92ZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlbW92ZVRyZWVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJzZWFyY2hcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJ1cGRhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDIsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJicm93c2VyQWN0aW9uXCI6IHtcbiAgICAgICAgICBcImRpc2FibGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwiZmFsbGJhY2tUb05vQ2FsbGJhY2tcIjogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJlbmFibGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwiZmFsbGJhY2tUb05vQ2FsbGJhY2tcIjogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRCYWRnZUJhY2tncm91bmRDb2xvclwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldEJhZGdlVGV4dFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldFBvcHVwXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiZ2V0VGl0bGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJvcGVuUG9wdXBcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMFxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJzZXRCYWRnZUJhY2tncm91bmRDb2xvclwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJmYWxsYmFja1RvTm9DYWxsYmFja1wiOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInNldEJhZGdlVGV4dFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJmYWxsYmFja1RvTm9DYWxsYmFja1wiOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInNldEljb25cIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJzZXRQb3B1cFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJmYWxsYmFja1RvTm9DYWxsYmFja1wiOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInNldFRpdGxlXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDEsXG4gICAgICAgICAgICBcImZhbGxiYWNrVG9Ob0NhbGxiYWNrXCI6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwiYnJvd3NpbmdEYXRhXCI6IHtcbiAgICAgICAgICBcInJlbW92ZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMixcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAyXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlbW92ZUNhY2hlXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwicmVtb3ZlQ29va2llc1wiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlbW92ZURvd25sb2Fkc1wiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlbW92ZUZvcm1EYXRhXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwicmVtb3ZlSGlzdG9yeVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlbW92ZUxvY2FsU3RvcmFnZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlbW92ZVBhc3N3b3Jkc1wiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlbW92ZVBsdWdpbkRhdGFcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJzZXR0aW5nc1wiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcImNvbW1hbmRzXCI6IHtcbiAgICAgICAgICBcImdldEFsbFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcImNvbnRleHRNZW51c1wiOiB7XG4gICAgICAgICAgXCJyZW1vdmVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJyZW1vdmVBbGxcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMFxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJ1cGRhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDIsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJjb29raWVzXCI6IHtcbiAgICAgICAgICBcImdldFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldEFsbFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldEFsbENvb2tpZVN0b3Jlc1wiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlbW92ZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInNldFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcImRldnRvb2xzXCI6IHtcbiAgICAgICAgICBcImluc3BlY3RlZFdpbmRvd1wiOiB7XG4gICAgICAgICAgICBcImV2YWxcIjoge1xuICAgICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDIsXG4gICAgICAgICAgICAgIFwic2luZ2xlQ2FsbGJhY2tBcmdcIjogZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIFwicGFuZWxzXCI6IHtcbiAgICAgICAgICAgIFwiY3JlYXRlXCI6IHtcbiAgICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDMsXG4gICAgICAgICAgICAgIFwibWF4QXJnc1wiOiAzLFxuICAgICAgICAgICAgICBcInNpbmdsZUNhbGxiYWNrQXJnXCI6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcImVsZW1lbnRzXCI6IHtcbiAgICAgICAgICAgICAgXCJjcmVhdGVTaWRlYmFyUGFuZVwiOiB7XG4gICAgICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJkb3dubG9hZHNcIjoge1xuICAgICAgICAgIFwiY2FuY2VsXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiZG93bmxvYWRcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJlcmFzZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldEZpbGVJY29uXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDJcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwib3BlblwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJmYWxsYmFja1RvTm9DYWxsYmFja1wiOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInBhdXNlXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwicmVtb3ZlRmlsZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlc3VtZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInNlYXJjaFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInNob3dcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwiZmFsbGJhY2tUb05vQ2FsbGJhY2tcIjogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJleHRlbnNpb25cIjoge1xuICAgICAgICAgIFwiaXNBbGxvd2VkRmlsZVNjaGVtZUFjY2Vzc1wiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImlzQWxsb3dlZEluY29nbml0b0FjY2Vzc1wiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcImhpc3RvcnlcIjoge1xuICAgICAgICAgIFwiYWRkVXJsXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiZGVsZXRlQWxsXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAwLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDBcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiZGVsZXRlUmFuZ2VcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJkZWxldGVVcmxcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRWaXNpdHNcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJzZWFyY2hcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJpMThuXCI6IHtcbiAgICAgICAgICBcImRldGVjdExhbmd1YWdlXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiZ2V0QWNjZXB0TGFuZ3VhZ2VzXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAwLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDBcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwiaWRlbnRpdHlcIjoge1xuICAgICAgICAgIFwibGF1bmNoV2ViQXV0aEZsb3dcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJpZGxlXCI6IHtcbiAgICAgICAgICBcInF1ZXJ5U3RhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJtYW5hZ2VtZW50XCI6IHtcbiAgICAgICAgICBcImdldFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldEFsbFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldFNlbGZcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMFxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJzZXRFbmFibGVkXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAyLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDJcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwidW5pbnN0YWxsU2VsZlwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcIm5vdGlmaWNhdGlvbnNcIjoge1xuICAgICAgICAgIFwiY2xlYXJcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJjcmVhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRBbGxcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMFxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRQZXJtaXNzaW9uTGV2ZWxcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMFxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJ1cGRhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDIsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJwYWdlQWN0aW9uXCI6IHtcbiAgICAgICAgICBcImdldFBvcHVwXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiZ2V0VGl0bGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJoaWRlXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDEsXG4gICAgICAgICAgICBcImZhbGxiYWNrVG9Ob0NhbGxiYWNrXCI6IHRydWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwic2V0SWNvblwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInNldFBvcHVwXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDEsXG4gICAgICAgICAgICBcImZhbGxiYWNrVG9Ob0NhbGxiYWNrXCI6IHRydWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwic2V0VGl0bGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwiZmFsbGJhY2tUb05vQ2FsbGJhY2tcIjogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJzaG93XCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDEsXG4gICAgICAgICAgICBcImZhbGxiYWNrVG9Ob0NhbGxiYWNrXCI6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwicGVybWlzc2lvbnNcIjoge1xuICAgICAgICAgIFwiY29udGFpbnNcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRBbGxcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMFxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJyZW1vdmVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJyZXF1ZXN0XCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwicnVudGltZVwiOiB7XG4gICAgICAgICAgXCJnZXRCYWNrZ3JvdW5kUGFnZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldFBsYXRmb3JtSW5mb1wiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcIm9wZW5PcHRpb25zUGFnZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlcXVlc3RVcGRhdGVDaGVja1wiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInNlbmRNZXNzYWdlXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDNcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwic2VuZE5hdGl2ZU1lc3NhZ2VcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDIsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJzZXRVbmluc3RhbGxVUkxcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJzZXNzaW9uc1wiOiB7XG4gICAgICAgICAgXCJnZXREZXZpY2VzXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAwLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiZ2V0UmVjZW50bHlDbG9zZWRcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJyZXN0b3JlXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAwLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwic3RvcmFnZVwiOiB7XG4gICAgICAgICAgXCJsb2NhbFwiOiB7XG4gICAgICAgICAgICBcImNsZWFyXCI6IHtcbiAgICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJnZXRcIjoge1xuICAgICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcImdldEJ5dGVzSW5Vc2VcIjoge1xuICAgICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcInJlbW92ZVwiOiB7XG4gICAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwic2V0XCI6IHtcbiAgICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBcIm1hbmFnZWRcIjoge1xuICAgICAgICAgICAgXCJnZXRcIjoge1xuICAgICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcImdldEJ5dGVzSW5Vc2VcIjoge1xuICAgICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIFwic3luY1wiOiB7XG4gICAgICAgICAgICBcImNsZWFyXCI6IHtcbiAgICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJnZXRcIjoge1xuICAgICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcImdldEJ5dGVzSW5Vc2VcIjoge1xuICAgICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcInJlbW92ZVwiOiB7XG4gICAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwic2V0XCI6IHtcbiAgICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcInRhYnNcIjoge1xuICAgICAgICAgIFwiY2FwdHVyZVZpc2libGVUYWJcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJjcmVhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJkZXRlY3RMYW5ndWFnZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImRpc2NhcmRcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJkdXBsaWNhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJleGVjdXRlU2NyaXB0XCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDJcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiZ2V0XCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiZ2V0Q3VycmVudFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldFpvb21cIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRab29tU2V0dGluZ3NcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnb0JhY2tcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnb0ZvcndhcmRcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJoaWdobGlnaHRcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJpbnNlcnRDU1NcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJtb3ZlXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAyLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDJcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwicXVlcnlcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJyZWxvYWRcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJyZW1vdmVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJyZW1vdmVDU1NcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJzZW5kTWVzc2FnZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMixcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAzXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInNldFpvb21cIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJzZXRab29tU2V0dGluZ3NcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJ1cGRhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJ0b3BTaXRlc1wiOiB7XG4gICAgICAgICAgXCJnZXRcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMFxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJ3ZWJOYXZpZ2F0aW9uXCI6IHtcbiAgICAgICAgICBcImdldEFsbEZyYW1lc1wiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldEZyYW1lXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwid2ViUmVxdWVzdFwiOiB7XG4gICAgICAgICAgXCJoYW5kbGVyQmVoYXZpb3JDaGFuZ2VkXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAwLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDBcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwid2luZG93c1wiOiB7XG4gICAgICAgICAgXCJjcmVhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRBbGxcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRDdXJyZW50XCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAwLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiZ2V0TGFzdEZvY3VzZWRcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJyZW1vdmVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJ1cGRhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDIsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgaWYgKE9iamVjdC5rZXlzKGFwaU1ldGFkYXRhKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYXBpLW1ldGFkYXRhLmpzb24gaGFzIG5vdCBiZWVuIGluY2x1ZGVkIGluIGJyb3dzZXItcG9seWZpbGxcIik7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIEEgV2Vha01hcCBzdWJjbGFzcyB3aGljaCBjcmVhdGVzIGFuZCBzdG9yZXMgYSB2YWx1ZSBmb3IgYW55IGtleSB3aGljaCBkb2VzXG4gICAgICAgKiBub3QgZXhpc3Qgd2hlbiBhY2Nlc3NlZCwgYnV0IGJlaGF2ZXMgZXhhY3RseSBhcyBhbiBvcmRpbmFyeSBXZWFrTWFwXG4gICAgICAgKiBvdGhlcndpc2UuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtmdW5jdGlvbn0gY3JlYXRlSXRlbVxuICAgICAgICogICAgICAgIEEgZnVuY3Rpb24gd2hpY2ggd2lsbCBiZSBjYWxsZWQgaW4gb3JkZXIgdG8gY3JlYXRlIHRoZSB2YWx1ZSBmb3IgYW55XG4gICAgICAgKiAgICAgICAga2V5IHdoaWNoIGRvZXMgbm90IGV4aXN0LCB0aGUgZmlyc3QgdGltZSBpdCBpcyBhY2Nlc3NlZC4gVGhlXG4gICAgICAgKiAgICAgICAgZnVuY3Rpb24gcmVjZWl2ZXMsIGFzIGl0cyBvbmx5IGFyZ3VtZW50LCB0aGUga2V5IGJlaW5nIGNyZWF0ZWQuXG4gICAgICAgKi9cblxuXG4gICAgICBjbGFzcyBEZWZhdWx0V2Vha01hcCBleHRlbmRzIFdlYWtNYXAge1xuICAgICAgICBjb25zdHJ1Y3RvcihjcmVhdGVJdGVtLCBpdGVtcyA9IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHN1cGVyKGl0ZW1zKTtcbiAgICAgICAgICB0aGlzLmNyZWF0ZUl0ZW0gPSBjcmVhdGVJdGVtO1xuICAgICAgICB9XG5cbiAgICAgICAgZ2V0KGtleSkge1xuICAgICAgICAgIGlmICghdGhpcy5oYXMoa2V5KSkge1xuICAgICAgICAgICAgdGhpcy5zZXQoa2V5LCB0aGlzLmNyZWF0ZUl0ZW0oa2V5KSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHN1cGVyLmdldChrZXkpO1xuICAgICAgICB9XG5cbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBvYmplY3QgaXMgYW4gb2JqZWN0IHdpdGggYSBgdGhlbmAgbWV0aG9kLCBhbmQgY2FuXG4gICAgICAgKiB0aGVyZWZvcmUgYmUgYXNzdW1lZCB0byBiZWhhdmUgYXMgYSBQcm9taXNlLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHRlc3QuXG4gICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgdmFsdWUgaXMgdGhlbmFibGUuXG4gICAgICAgKi9cblxuXG4gICAgICBjb25zdCBpc1RoZW5hYmxlID0gdmFsdWUgPT4ge1xuICAgICAgICByZXR1cm4gdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiB2YWx1ZS50aGVuID09PSBcImZ1bmN0aW9uXCI7XG4gICAgICB9O1xuICAgICAgLyoqXG4gICAgICAgKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgZnVuY3Rpb24gd2hpY2gsIHdoZW4gY2FsbGVkLCB3aWxsIHJlc29sdmUgb3IgcmVqZWN0XG4gICAgICAgKiB0aGUgZ2l2ZW4gcHJvbWlzZSBiYXNlZCBvbiBob3cgaXQgaXMgY2FsbGVkOlxuICAgICAgICpcbiAgICAgICAqIC0gSWYsIHdoZW4gY2FsbGVkLCBgY2hyb21lLnJ1bnRpbWUubGFzdEVycm9yYCBjb250YWlucyBhIG5vbi1udWxsIG9iamVjdCxcbiAgICAgICAqICAgdGhlIHByb21pc2UgaXMgcmVqZWN0ZWQgd2l0aCB0aGF0IHZhbHVlLlxuICAgICAgICogLSBJZiB0aGUgZnVuY3Rpb24gaXMgY2FsbGVkIHdpdGggZXhhY3RseSBvbmUgYXJndW1lbnQsIHRoZSBwcm9taXNlIGlzXG4gICAgICAgKiAgIHJlc29sdmVkIHRvIHRoYXQgdmFsdWUuXG4gICAgICAgKiAtIE90aGVyd2lzZSwgdGhlIHByb21pc2UgaXMgcmVzb2x2ZWQgdG8gYW4gYXJyYXkgY29udGFpbmluZyBhbGwgb2YgdGhlXG4gICAgICAgKiAgIGZ1bmN0aW9uJ3MgYXJndW1lbnRzLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBwcm9taXNlXG4gICAgICAgKiAgICAgICAgQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHJlc29sdXRpb24gYW5kIHJlamVjdGlvbiBmdW5jdGlvbnMgb2YgYVxuICAgICAgICogICAgICAgIHByb21pc2UuXG4gICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBwcm9taXNlLnJlc29sdmVcbiAgICAgICAqICAgICAgICBUaGUgcHJvbWlzZSdzIHJlc29sdXRpb24gZnVuY3Rpb24uXG4gICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBwcm9taXNlLnJlamVjdFxuICAgICAgICogICAgICAgIFRoZSBwcm9taXNlJ3MgcmVqZWN0aW9uIGZ1bmN0aW9uLlxuICAgICAgICogQHBhcmFtIHtvYmplY3R9IG1ldGFkYXRhXG4gICAgICAgKiAgICAgICAgTWV0YWRhdGEgYWJvdXQgdGhlIHdyYXBwZWQgbWV0aG9kIHdoaWNoIGhhcyBjcmVhdGVkIHRoZSBjYWxsYmFjay5cbiAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gbWV0YWRhdGEuc2luZ2xlQ2FsbGJhY2tBcmdcbiAgICAgICAqICAgICAgICBXaGV0aGVyIG9yIG5vdCB0aGUgcHJvbWlzZSBpcyByZXNvbHZlZCB3aXRoIG9ubHkgdGhlIGZpcnN0XG4gICAgICAgKiAgICAgICAgYXJndW1lbnQgb2YgdGhlIGNhbGxiYWNrLCBhbHRlcm5hdGl2ZWx5IGFuIGFycmF5IG9mIGFsbCB0aGVcbiAgICAgICAqICAgICAgICBjYWxsYmFjayBhcmd1bWVudHMgaXMgcmVzb2x2ZWQuIEJ5IGRlZmF1bHQsIGlmIHRoZSBjYWxsYmFja1xuICAgICAgICogICAgICAgIGZ1bmN0aW9uIGlzIGludm9rZWQgd2l0aCBvbmx5IGEgc2luZ2xlIGFyZ3VtZW50LCB0aGF0IHdpbGwgYmVcbiAgICAgICAqICAgICAgICByZXNvbHZlZCB0byB0aGUgcHJvbWlzZSwgd2hpbGUgYWxsIGFyZ3VtZW50cyB3aWxsIGJlIHJlc29sdmVkIGFzXG4gICAgICAgKiAgICAgICAgYW4gYXJyYXkgaWYgbXVsdGlwbGUgYXJlIGdpdmVuLlxuICAgICAgICpcbiAgICAgICAqIEByZXR1cm5zIHtmdW5jdGlvbn1cbiAgICAgICAqICAgICAgICBUaGUgZ2VuZXJhdGVkIGNhbGxiYWNrIGZ1bmN0aW9uLlxuICAgICAgICovXG5cblxuICAgICAgY29uc3QgbWFrZUNhbGxiYWNrID0gKHByb21pc2UsIG1ldGFkYXRhKSA9PiB7XG4gICAgICAgIHJldHVybiAoLi4uY2FsbGJhY2tBcmdzKSA9PiB7XG4gICAgICAgICAgaWYgKGV4dGVuc2lvbkFQSXMucnVudGltZS5sYXN0RXJyb3IpIHtcbiAgICAgICAgICAgIHByb21pc2UucmVqZWN0KG5ldyBFcnJvcihleHRlbnNpb25BUElzLnJ1bnRpbWUubGFzdEVycm9yLm1lc3NhZ2UpKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKG1ldGFkYXRhLnNpbmdsZUNhbGxiYWNrQXJnIHx8IGNhbGxiYWNrQXJncy5sZW5ndGggPD0gMSAmJiBtZXRhZGF0YS5zaW5nbGVDYWxsYmFja0FyZyAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHByb21pc2UucmVzb2x2ZShjYWxsYmFja0FyZ3NbMF0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcm9taXNlLnJlc29sdmUoY2FsbGJhY2tBcmdzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9O1xuXG4gICAgICBjb25zdCBwbHVyYWxpemVBcmd1bWVudHMgPSBudW1BcmdzID0+IG51bUFyZ3MgPT0gMSA/IFwiYXJndW1lbnRcIiA6IFwiYXJndW1lbnRzXCI7XG4gICAgICAvKipcbiAgICAgICAqIENyZWF0ZXMgYSB3cmFwcGVyIGZ1bmN0aW9uIGZvciBhIG1ldGhvZCB3aXRoIHRoZSBnaXZlbiBuYW1lIGFuZCBtZXRhZGF0YS5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgICAgICogICAgICAgIFRoZSBuYW1lIG9mIHRoZSBtZXRob2Qgd2hpY2ggaXMgYmVpbmcgd3JhcHBlZC5cbiAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBtZXRhZGF0YVxuICAgICAgICogICAgICAgIE1ldGFkYXRhIGFib3V0IHRoZSBtZXRob2QgYmVpbmcgd3JhcHBlZC5cbiAgICAgICAqIEBwYXJhbSB7aW50ZWdlcn0gbWV0YWRhdGEubWluQXJnc1xuICAgICAgICogICAgICAgIFRoZSBtaW5pbXVtIG51bWJlciBvZiBhcmd1bWVudHMgd2hpY2ggbXVzdCBiZSBwYXNzZWQgdG8gdGhlXG4gICAgICAgKiAgICAgICAgZnVuY3Rpb24uIElmIGNhbGxlZCB3aXRoIGZld2VyIHRoYW4gdGhpcyBudW1iZXIgb2YgYXJndW1lbnRzLCB0aGVcbiAgICAgICAqICAgICAgICB3cmFwcGVyIHdpbGwgcmFpc2UgYW4gZXhjZXB0aW9uLlxuICAgICAgICogQHBhcmFtIHtpbnRlZ2VyfSBtZXRhZGF0YS5tYXhBcmdzXG4gICAgICAgKiAgICAgICAgVGhlIG1heGltdW0gbnVtYmVyIG9mIGFyZ3VtZW50cyB3aGljaCBtYXkgYmUgcGFzc2VkIHRvIHRoZVxuICAgICAgICogICAgICAgIGZ1bmN0aW9uLiBJZiBjYWxsZWQgd2l0aCBtb3JlIHRoYW4gdGhpcyBudW1iZXIgb2YgYXJndW1lbnRzLCB0aGVcbiAgICAgICAqICAgICAgICB3cmFwcGVyIHdpbGwgcmFpc2UgYW4gZXhjZXB0aW9uLlxuICAgICAgICogQHBhcmFtIHtib29sZWFufSBtZXRhZGF0YS5zaW5nbGVDYWxsYmFja0FyZ1xuICAgICAgICogICAgICAgIFdoZXRoZXIgb3Igbm90IHRoZSBwcm9taXNlIGlzIHJlc29sdmVkIHdpdGggb25seSB0aGUgZmlyc3RcbiAgICAgICAqICAgICAgICBhcmd1bWVudCBvZiB0aGUgY2FsbGJhY2ssIGFsdGVybmF0aXZlbHkgYW4gYXJyYXkgb2YgYWxsIHRoZVxuICAgICAgICogICAgICAgIGNhbGxiYWNrIGFyZ3VtZW50cyBpcyByZXNvbHZlZC4gQnkgZGVmYXVsdCwgaWYgdGhlIGNhbGxiYWNrXG4gICAgICAgKiAgICAgICAgZnVuY3Rpb24gaXMgaW52b2tlZCB3aXRoIG9ubHkgYSBzaW5nbGUgYXJndW1lbnQsIHRoYXQgd2lsbCBiZVxuICAgICAgICogICAgICAgIHJlc29sdmVkIHRvIHRoZSBwcm9taXNlLCB3aGlsZSBhbGwgYXJndW1lbnRzIHdpbGwgYmUgcmVzb2x2ZWQgYXNcbiAgICAgICAqICAgICAgICBhbiBhcnJheSBpZiBtdWx0aXBsZSBhcmUgZ2l2ZW4uXG4gICAgICAgKlxuICAgICAgICogQHJldHVybnMge2Z1bmN0aW9uKG9iamVjdCwgLi4uKil9XG4gICAgICAgKiAgICAgICBUaGUgZ2VuZXJhdGVkIHdyYXBwZXIgZnVuY3Rpb24uXG4gICAgICAgKi9cblxuXG4gICAgICBjb25zdCB3cmFwQXN5bmNGdW5jdGlvbiA9IChuYW1lLCBtZXRhZGF0YSkgPT4ge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gYXN5bmNGdW5jdGlvbldyYXBwZXIodGFyZ2V0LCAuLi5hcmdzKSB7XG4gICAgICAgICAgaWYgKGFyZ3MubGVuZ3RoIDwgbWV0YWRhdGEubWluQXJncykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCBhdCBsZWFzdCAke21ldGFkYXRhLm1pbkFyZ3N9ICR7cGx1cmFsaXplQXJndW1lbnRzKG1ldGFkYXRhLm1pbkFyZ3MpfSBmb3IgJHtuYW1lfSgpLCBnb3QgJHthcmdzLmxlbmd0aH1gKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoYXJncy5sZW5ndGggPiBtZXRhZGF0YS5tYXhBcmdzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIGF0IG1vc3QgJHttZXRhZGF0YS5tYXhBcmdzfSAke3BsdXJhbGl6ZUFyZ3VtZW50cyhtZXRhZGF0YS5tYXhBcmdzKX0gZm9yICR7bmFtZX0oKSwgZ290ICR7YXJncy5sZW5ndGh9YCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGlmIChtZXRhZGF0YS5mYWxsYmFja1RvTm9DYWxsYmFjaykge1xuICAgICAgICAgICAgICAvLyBUaGlzIEFQSSBtZXRob2QgaGFzIGN1cnJlbnRseSBubyBjYWxsYmFjayBvbiBDaHJvbWUsIGJ1dCBpdCByZXR1cm4gYSBwcm9taXNlIG9uIEZpcmVmb3gsXG4gICAgICAgICAgICAgIC8vIGFuZCBzbyB0aGUgcG9seWZpbGwgd2lsbCB0cnkgdG8gY2FsbCBpdCB3aXRoIGEgY2FsbGJhY2sgZmlyc3QsIGFuZCBpdCB3aWxsIGZhbGxiYWNrXG4gICAgICAgICAgICAgIC8vIHRvIG5vdCBwYXNzaW5nIHRoZSBjYWxsYmFjayBpZiB0aGUgZmlyc3QgY2FsbCBmYWlscy5cbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0YXJnZXRbbmFtZV0oLi4uYXJncywgbWFrZUNhbGxiYWNrKHtcbiAgICAgICAgICAgICAgICAgIHJlc29sdmUsXG4gICAgICAgICAgICAgICAgICByZWplY3RcbiAgICAgICAgICAgICAgICB9LCBtZXRhZGF0YSkpO1xuICAgICAgICAgICAgICB9IGNhdGNoIChjYkVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGAke25hbWV9IEFQSSBtZXRob2QgZG9lc24ndCBzZWVtIHRvIHN1cHBvcnQgdGhlIGNhbGxiYWNrIHBhcmFtZXRlciwgYCArIFwiZmFsbGluZyBiYWNrIHRvIGNhbGwgaXQgd2l0aG91dCBhIGNhbGxiYWNrOiBcIiwgY2JFcnJvcik7XG4gICAgICAgICAgICAgICAgdGFyZ2V0W25hbWVdKC4uLmFyZ3MpOyAvLyBVcGRhdGUgdGhlIEFQSSBtZXRob2QgbWV0YWRhdGEsIHNvIHRoYXQgdGhlIG5leHQgQVBJIGNhbGxzIHdpbGwgbm90IHRyeSB0b1xuICAgICAgICAgICAgICAgIC8vIHVzZSB0aGUgdW5zdXBwb3J0ZWQgY2FsbGJhY2sgYW55bW9yZS5cblxuICAgICAgICAgICAgICAgIG1ldGFkYXRhLmZhbGxiYWNrVG9Ob0NhbGxiYWNrID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgbWV0YWRhdGEubm9DYWxsYmFjayA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG1ldGFkYXRhLm5vQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgdGFyZ2V0W25hbWVdKC4uLmFyZ3MpO1xuICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0YXJnZXRbbmFtZV0oLi4uYXJncywgbWFrZUNhbGxiYWNrKHtcbiAgICAgICAgICAgICAgICByZXNvbHZlLFxuICAgICAgICAgICAgICAgIHJlamVjdFxuICAgICAgICAgICAgICB9LCBtZXRhZGF0YSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICAgIC8qKlxuICAgICAgICogV3JhcHMgYW4gZXhpc3RpbmcgbWV0aG9kIG9mIHRoZSB0YXJnZXQgb2JqZWN0LCBzbyB0aGF0IGNhbGxzIHRvIGl0IGFyZVxuICAgICAgICogaW50ZXJjZXB0ZWQgYnkgdGhlIGdpdmVuIHdyYXBwZXIgZnVuY3Rpb24uIFRoZSB3cmFwcGVyIGZ1bmN0aW9uIHJlY2VpdmVzLFxuICAgICAgICogYXMgaXRzIGZpcnN0IGFyZ3VtZW50LCB0aGUgb3JpZ2luYWwgYHRhcmdldGAgb2JqZWN0LCBmb2xsb3dlZCBieSBlYWNoIG9mXG4gICAgICAgKiB0aGUgYXJndW1lbnRzIHBhc3NlZCB0byB0aGUgb3JpZ2luYWwgbWV0aG9kLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSB0YXJnZXRcbiAgICAgICAqICAgICAgICBUaGUgb3JpZ2luYWwgdGFyZ2V0IG9iamVjdCB0aGF0IHRoZSB3cmFwcGVkIG1ldGhvZCBiZWxvbmdzIHRvLlxuICAgICAgICogQHBhcmFtIHtmdW5jdGlvbn0gbWV0aG9kXG4gICAgICAgKiAgICAgICAgVGhlIG1ldGhvZCBiZWluZyB3cmFwcGVkLiBUaGlzIGlzIHVzZWQgYXMgdGhlIHRhcmdldCBvZiB0aGUgUHJveHlcbiAgICAgICAqICAgICAgICBvYmplY3Qgd2hpY2ggaXMgY3JlYXRlZCB0byB3cmFwIHRoZSBtZXRob2QuXG4gICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSB3cmFwcGVyXG4gICAgICAgKiAgICAgICAgVGhlIHdyYXBwZXIgZnVuY3Rpb24gd2hpY2ggaXMgY2FsbGVkIGluIHBsYWNlIG9mIGEgZGlyZWN0IGludm9jYXRpb25cbiAgICAgICAqICAgICAgICBvZiB0aGUgd3JhcHBlZCBtZXRob2QuXG4gICAgICAgKlxuICAgICAgICogQHJldHVybnMge1Byb3h5PGZ1bmN0aW9uPn1cbiAgICAgICAqICAgICAgICBBIFByb3h5IG9iamVjdCBmb3IgdGhlIGdpdmVuIG1ldGhvZCwgd2hpY2ggaW52b2tlcyB0aGUgZ2l2ZW4gd3JhcHBlclxuICAgICAgICogICAgICAgIG1ldGhvZCBpbiBpdHMgcGxhY2UuXG4gICAgICAgKi9cblxuXG4gICAgICBjb25zdCB3cmFwTWV0aG9kID0gKHRhcmdldCwgbWV0aG9kLCB3cmFwcGVyKSA9PiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJveHkobWV0aG9kLCB7XG4gICAgICAgICAgYXBwbHkodGFyZ2V0TWV0aG9kLCB0aGlzT2JqLCBhcmdzKSB7XG4gICAgICAgICAgICByZXR1cm4gd3JhcHBlci5jYWxsKHRoaXNPYmosIHRhcmdldCwgLi4uYXJncyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgbGV0IGhhc093blByb3BlcnR5ID0gRnVuY3Rpb24uY2FsbC5iaW5kKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkpO1xuICAgICAgLyoqXG4gICAgICAgKiBXcmFwcyBhbiBvYmplY3QgaW4gYSBQcm94eSB3aGljaCBpbnRlcmNlcHRzIGFuZCB3cmFwcyBjZXJ0YWluIG1ldGhvZHNcbiAgICAgICAqIGJhc2VkIG9uIHRoZSBnaXZlbiBgd3JhcHBlcnNgIGFuZCBgbWV0YWRhdGFgIG9iamVjdHMuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtvYmplY3R9IHRhcmdldFxuICAgICAgICogICAgICAgIFRoZSB0YXJnZXQgb2JqZWN0IHRvIHdyYXAuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtvYmplY3R9IFt3cmFwcGVycyA9IHt9XVxuICAgICAgICogICAgICAgIEFuIG9iamVjdCB0cmVlIGNvbnRhaW5pbmcgd3JhcHBlciBmdW5jdGlvbnMgZm9yIHNwZWNpYWwgY2FzZXMuIEFueVxuICAgICAgICogICAgICAgIGZ1bmN0aW9uIHByZXNlbnQgaW4gdGhpcyBvYmplY3QgdHJlZSBpcyBjYWxsZWQgaW4gcGxhY2Ugb2YgdGhlXG4gICAgICAgKiAgICAgICAgbWV0aG9kIGluIHRoZSBzYW1lIGxvY2F0aW9uIGluIHRoZSBgdGFyZ2V0YCBvYmplY3QgdHJlZS4gVGhlc2VcbiAgICAgICAqICAgICAgICB3cmFwcGVyIG1ldGhvZHMgYXJlIGludm9rZWQgYXMgZGVzY3JpYmVkIGluIHtAc2VlIHdyYXBNZXRob2R9LlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbbWV0YWRhdGEgPSB7fV1cbiAgICAgICAqICAgICAgICBBbiBvYmplY3QgdHJlZSBjb250YWluaW5nIG1ldGFkYXRhIHVzZWQgdG8gYXV0b21hdGljYWxseSBnZW5lcmF0ZVxuICAgICAgICogICAgICAgIFByb21pc2UtYmFzZWQgd3JhcHBlciBmdW5jdGlvbnMgZm9yIGFzeW5jaHJvbm91cy4gQW55IGZ1bmN0aW9uIGluXG4gICAgICAgKiAgICAgICAgdGhlIGB0YXJnZXRgIG9iamVjdCB0cmVlIHdoaWNoIGhhcyBhIGNvcnJlc3BvbmRpbmcgbWV0YWRhdGEgb2JqZWN0XG4gICAgICAgKiAgICAgICAgaW4gdGhlIHNhbWUgbG9jYXRpb24gaW4gdGhlIGBtZXRhZGF0YWAgdHJlZSBpcyByZXBsYWNlZCB3aXRoIGFuXG4gICAgICAgKiAgICAgICAgYXV0b21hdGljYWxseS1nZW5lcmF0ZWQgd3JhcHBlciBmdW5jdGlvbiwgYXMgZGVzY3JpYmVkIGluXG4gICAgICAgKiAgICAgICAge0BzZWUgd3JhcEFzeW5jRnVuY3Rpb259XG4gICAgICAgKlxuICAgICAgICogQHJldHVybnMge1Byb3h5PG9iamVjdD59XG4gICAgICAgKi9cblxuICAgICAgY29uc3Qgd3JhcE9iamVjdCA9ICh0YXJnZXQsIHdyYXBwZXJzID0ge30sIG1ldGFkYXRhID0ge30pID0+IHtcbiAgICAgICAgbGV0IGNhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgbGV0IGhhbmRsZXJzID0ge1xuICAgICAgICAgIGhhcyhwcm94eVRhcmdldCwgcHJvcCkge1xuICAgICAgICAgICAgcmV0dXJuIHByb3AgaW4gdGFyZ2V0IHx8IHByb3AgaW4gY2FjaGU7XG4gICAgICAgICAgfSxcblxuICAgICAgICAgIGdldChwcm94eVRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpIHtcbiAgICAgICAgICAgIGlmIChwcm9wIGluIGNhY2hlKSB7XG4gICAgICAgICAgICAgIHJldHVybiBjYWNoZVtwcm9wXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCEocHJvcCBpbiB0YXJnZXQpKSB7XG4gICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCB2YWx1ZSA9IHRhcmdldFtwcm9wXTtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBtZXRob2Qgb24gdGhlIHVuZGVybHlpbmcgb2JqZWN0LiBDaGVjayBpZiB3ZSBuZWVkIHRvIGRvXG4gICAgICAgICAgICAgIC8vIGFueSB3cmFwcGluZy5cbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiB3cmFwcGVyc1twcm9wXSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgLy8gV2UgaGF2ZSBhIHNwZWNpYWwtY2FzZSB3cmFwcGVyIGZvciB0aGlzIG1ldGhvZC5cbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHdyYXBNZXRob2QodGFyZ2V0LCB0YXJnZXRbcHJvcF0sIHdyYXBwZXJzW3Byb3BdKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChoYXNPd25Qcm9wZXJ0eShtZXRhZGF0YSwgcHJvcCkpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGFuIGFzeW5jIG1ldGhvZCB0aGF0IHdlIGhhdmUgbWV0YWRhdGEgZm9yLiBDcmVhdGUgYVxuICAgICAgICAgICAgICAgIC8vIFByb21pc2Ugd3JhcHBlciBmb3IgaXQuXG4gICAgICAgICAgICAgICAgbGV0IHdyYXBwZXIgPSB3cmFwQXN5bmNGdW5jdGlvbihwcm9wLCBtZXRhZGF0YVtwcm9wXSk7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSB3cmFwTWV0aG9kKHRhcmdldCwgdGFyZ2V0W3Byb3BdLCB3cmFwcGVyKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGEgbWV0aG9kIHRoYXQgd2UgZG9uJ3Qga25vdyBvciBjYXJlIGFib3V0LiBSZXR1cm4gdGhlXG4gICAgICAgICAgICAgICAgLy8gb3JpZ2luYWwgbWV0aG9kLCBib3VuZCB0byB0aGUgdW5kZXJseWluZyBvYmplY3QuXG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5iaW5kKHRhcmdldCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmIHZhbHVlICE9PSBudWxsICYmIChoYXNPd25Qcm9wZXJ0eSh3cmFwcGVycywgcHJvcCkgfHwgaGFzT3duUHJvcGVydHkobWV0YWRhdGEsIHByb3ApKSkge1xuICAgICAgICAgICAgICAvLyBUaGlzIGlzIGFuIG9iamVjdCB0aGF0IHdlIG5lZWQgdG8gZG8gc29tZSB3cmFwcGluZyBmb3IgdGhlIGNoaWxkcmVuXG4gICAgICAgICAgICAgIC8vIG9mLiBDcmVhdGUgYSBzdWItb2JqZWN0IHdyYXBwZXIgZm9yIGl0IHdpdGggdGhlIGFwcHJvcHJpYXRlIGNoaWxkXG4gICAgICAgICAgICAgIC8vIG1ldGFkYXRhLlxuICAgICAgICAgICAgICB2YWx1ZSA9IHdyYXBPYmplY3QodmFsdWUsIHdyYXBwZXJzW3Byb3BdLCBtZXRhZGF0YVtwcm9wXSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGhhc093blByb3BlcnR5KG1ldGFkYXRhLCBcIipcIikpIHtcbiAgICAgICAgICAgICAgLy8gV3JhcCBhbGwgcHJvcGVydGllcyBpbiAqIG5hbWVzcGFjZS5cbiAgICAgICAgICAgICAgdmFsdWUgPSB3cmFwT2JqZWN0KHZhbHVlLCB3cmFwcGVyc1twcm9wXSwgbWV0YWRhdGFbXCIqXCJdKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIFdlIGRvbid0IG5lZWQgdG8gZG8gYW55IHdyYXBwaW5nIGZvciB0aGlzIHByb3BlcnR5LFxuICAgICAgICAgICAgICAvLyBzbyBqdXN0IGZvcndhcmQgYWxsIGFjY2VzcyB0byB0aGUgdW5kZXJseWluZyBvYmplY3QuXG4gICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjYWNoZSwgcHJvcCwge1xuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXG4gICAgICAgICAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldFtwcm9wXTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgc2V0KHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICB0YXJnZXRbcHJvcF0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2FjaGVbcHJvcF0gPSB2YWx1ZTtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICB9LFxuXG4gICAgICAgICAgc2V0KHByb3h5VGFyZ2V0LCBwcm9wLCB2YWx1ZSwgcmVjZWl2ZXIpIHtcbiAgICAgICAgICAgIGlmIChwcm9wIGluIGNhY2hlKSB7XG4gICAgICAgICAgICAgIGNhY2hlW3Byb3BdID0gdmFsdWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0YXJnZXRbcHJvcF0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfSxcblxuICAgICAgICAgIGRlZmluZVByb3BlcnR5KHByb3h5VGFyZ2V0LCBwcm9wLCBkZXNjKSB7XG4gICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eShjYWNoZSwgcHJvcCwgZGVzYyk7XG4gICAgICAgICAgfSxcblxuICAgICAgICAgIGRlbGV0ZVByb3BlcnR5KHByb3h5VGFyZ2V0LCBwcm9wKSB7XG4gICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5kZWxldGVQcm9wZXJ0eShjYWNoZSwgcHJvcCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgIH07IC8vIFBlciBjb250cmFjdCBvZiB0aGUgUHJveHkgQVBJLCB0aGUgXCJnZXRcIiBwcm94eSBoYW5kbGVyIG11c3QgcmV0dXJuIHRoZVxuICAgICAgICAvLyBvcmlnaW5hbCB2YWx1ZSBvZiB0aGUgdGFyZ2V0IGlmIHRoYXQgdmFsdWUgaXMgZGVjbGFyZWQgcmVhZC1vbmx5IGFuZFxuICAgICAgICAvLyBub24tY29uZmlndXJhYmxlLiBGb3IgdGhpcyByZWFzb24sIHdlIGNyZWF0ZSBhbiBvYmplY3Qgd2l0aCB0aGVcbiAgICAgICAgLy8gcHJvdG90eXBlIHNldCB0byBgdGFyZ2V0YCBpbnN0ZWFkIG9mIHVzaW5nIGB0YXJnZXRgIGRpcmVjdGx5LlxuICAgICAgICAvLyBPdGhlcndpc2Ugd2UgY2Fubm90IHJldHVybiBhIGN1c3RvbSBvYmplY3QgZm9yIEFQSXMgdGhhdFxuICAgICAgICAvLyBhcmUgZGVjbGFyZWQgcmVhZC1vbmx5IGFuZCBub24tY29uZmlndXJhYmxlLCBzdWNoIGFzIGBjaHJvbWUuZGV2dG9vbHNgLlxuICAgICAgICAvL1xuICAgICAgICAvLyBUaGUgcHJveHkgaGFuZGxlcnMgdGhlbXNlbHZlcyB3aWxsIHN0aWxsIHVzZSB0aGUgb3JpZ2luYWwgYHRhcmdldGBcbiAgICAgICAgLy8gaW5zdGVhZCBvZiB0aGUgYHByb3h5VGFyZ2V0YCwgc28gdGhhdCB0aGUgbWV0aG9kcyBhbmQgcHJvcGVydGllcyBhcmVcbiAgICAgICAgLy8gZGVyZWZlcmVuY2VkIHZpYSB0aGUgb3JpZ2luYWwgdGFyZ2V0cy5cblxuICAgICAgICBsZXQgcHJveHlUYXJnZXQgPSBPYmplY3QuY3JlYXRlKHRhcmdldCk7XG4gICAgICAgIHJldHVybiBuZXcgUHJveHkocHJveHlUYXJnZXQsIGhhbmRsZXJzKTtcbiAgICAgIH07XG4gICAgICAvKipcbiAgICAgICAqIENyZWF0ZXMgYSBzZXQgb2Ygd3JhcHBlciBmdW5jdGlvbnMgZm9yIGFuIGV2ZW50IG9iamVjdCwgd2hpY2ggaGFuZGxlc1xuICAgICAgICogd3JhcHBpbmcgb2YgbGlzdGVuZXIgZnVuY3Rpb25zIHRoYXQgdGhvc2UgbWVzc2FnZXMgYXJlIHBhc3NlZC5cbiAgICAgICAqXG4gICAgICAgKiBBIHNpbmdsZSB3cmFwcGVyIGlzIGNyZWF0ZWQgZm9yIGVhY2ggbGlzdGVuZXIgZnVuY3Rpb24sIGFuZCBzdG9yZWQgaW4gYVxuICAgICAgICogbWFwLiBTdWJzZXF1ZW50IGNhbGxzIHRvIGBhZGRMaXN0ZW5lcmAsIGBoYXNMaXN0ZW5lcmAsIG9yIGByZW1vdmVMaXN0ZW5lcmBcbiAgICAgICAqIHJldHJpZXZlIHRoZSBvcmlnaW5hbCB3cmFwcGVyLCBzbyB0aGF0ICBhdHRlbXB0cyB0byByZW1vdmUgYVxuICAgICAgICogcHJldmlvdXNseS1hZGRlZCBsaXN0ZW5lciB3b3JrIGFzIGV4cGVjdGVkLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7RGVmYXVsdFdlYWtNYXA8ZnVuY3Rpb24sIGZ1bmN0aW9uPn0gd3JhcHBlck1hcFxuICAgICAgICogICAgICAgIEEgRGVmYXVsdFdlYWtNYXAgb2JqZWN0IHdoaWNoIHdpbGwgY3JlYXRlIHRoZSBhcHByb3ByaWF0ZSB3cmFwcGVyXG4gICAgICAgKiAgICAgICAgZm9yIGEgZ2l2ZW4gbGlzdGVuZXIgZnVuY3Rpb24gd2hlbiBvbmUgZG9lcyBub3QgZXhpc3QsIGFuZCByZXRyaWV2ZVxuICAgICAgICogICAgICAgIGFuIGV4aXN0aW5nIG9uZSB3aGVuIGl0IGRvZXMuXG4gICAgICAgKlxuICAgICAgICogQHJldHVybnMge29iamVjdH1cbiAgICAgICAqL1xuXG5cbiAgICAgIGNvbnN0IHdyYXBFdmVudCA9IHdyYXBwZXJNYXAgPT4gKHtcbiAgICAgICAgYWRkTGlzdGVuZXIodGFyZ2V0LCBsaXN0ZW5lciwgLi4uYXJncykge1xuICAgICAgICAgIHRhcmdldC5hZGRMaXN0ZW5lcih3cmFwcGVyTWFwLmdldChsaXN0ZW5lciksIC4uLmFyZ3MpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGhhc0xpc3RlbmVyKHRhcmdldCwgbGlzdGVuZXIpIHtcbiAgICAgICAgICByZXR1cm4gdGFyZ2V0Lmhhc0xpc3RlbmVyKHdyYXBwZXJNYXAuZ2V0KGxpc3RlbmVyKSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVtb3ZlTGlzdGVuZXIodGFyZ2V0LCBsaXN0ZW5lcikge1xuICAgICAgICAgIHRhcmdldC5yZW1vdmVMaXN0ZW5lcih3cmFwcGVyTWFwLmdldChsaXN0ZW5lcikpO1xuICAgICAgICB9XG5cbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBvblJlcXVlc3RGaW5pc2hlZFdyYXBwZXJzID0gbmV3IERlZmF1bHRXZWFrTWFwKGxpc3RlbmVyID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lciAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgcmV0dXJuIGxpc3RlbmVyO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXcmFwcyBhbiBvblJlcXVlc3RGaW5pc2hlZCBsaXN0ZW5lciBmdW5jdGlvbiBzbyB0aGF0IGl0IHdpbGwgcmV0dXJuIGFcbiAgICAgICAgICogYGdldENvbnRlbnQoKWAgcHJvcGVydHkgd2hpY2ggcmV0dXJucyBhIGBQcm9taXNlYCByYXRoZXIgdGhhbiB1c2luZyBhXG4gICAgICAgICAqIGNhbGxiYWNrIEFQSS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IHJlcVxuICAgICAgICAgKiAgICAgICAgVGhlIEhBUiBlbnRyeSBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBuZXR3b3JrIHJlcXVlc3QuXG4gICAgICAgICAqL1xuXG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIG9uUmVxdWVzdEZpbmlzaGVkKHJlcSkge1xuICAgICAgICAgIGNvbnN0IHdyYXBwZWRSZXEgPSB3cmFwT2JqZWN0KHJlcSwge31cbiAgICAgICAgICAvKiB3cmFwcGVycyAqL1xuICAgICAgICAgICwge1xuICAgICAgICAgICAgZ2V0Q29udGVudDoge1xuICAgICAgICAgICAgICBtaW5BcmdzOiAwLFxuICAgICAgICAgICAgICBtYXhBcmdzOiAwXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgbGlzdGVuZXIod3JhcHBlZFJlcSk7XG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICAgIGNvbnN0IG9uTWVzc2FnZVdyYXBwZXJzID0gbmV3IERlZmF1bHRXZWFrTWFwKGxpc3RlbmVyID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lciAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgcmV0dXJuIGxpc3RlbmVyO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXcmFwcyBhIG1lc3NhZ2UgbGlzdGVuZXIgZnVuY3Rpb24gc28gdGhhdCBpdCBtYXkgc2VuZCByZXNwb25zZXMgYmFzZWQgb25cbiAgICAgICAgICogaXRzIHJldHVybiB2YWx1ZSwgcmF0aGVyIHRoYW4gYnkgcmV0dXJuaW5nIGEgc2VudGluZWwgdmFsdWUgYW5kIGNhbGxpbmcgYVxuICAgICAgICAgKiBjYWxsYmFjay4gSWYgdGhlIGxpc3RlbmVyIGZ1bmN0aW9uIHJldHVybnMgYSBQcm9taXNlLCB0aGUgcmVzcG9uc2UgaXNcbiAgICAgICAgICogc2VudCB3aGVuIHRoZSBwcm9taXNlIGVpdGhlciByZXNvbHZlcyBvciByZWplY3RzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0geyp9IG1lc3NhZ2VcbiAgICAgICAgICogICAgICAgIFRoZSBtZXNzYWdlIHNlbnQgYnkgdGhlIG90aGVyIGVuZCBvZiB0aGUgY2hhbm5lbC5cbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IHNlbmRlclxuICAgICAgICAgKiAgICAgICAgRGV0YWlscyBhYm91dCB0aGUgc2VuZGVyIG9mIHRoZSBtZXNzYWdlLlxuICAgICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCopfSBzZW5kUmVzcG9uc2VcbiAgICAgICAgICogICAgICAgIEEgY2FsbGJhY2sgd2hpY2gsIHdoZW4gY2FsbGVkIHdpdGggYW4gYXJiaXRyYXJ5IGFyZ3VtZW50LCBzZW5kc1xuICAgICAgICAgKiAgICAgICAgdGhhdCB2YWx1ZSBhcyBhIHJlc3BvbnNlLlxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgICAgICogICAgICAgIFRydWUgaWYgdGhlIHdyYXBwZWQgbGlzdGVuZXIgcmV0dXJuZWQgYSBQcm9taXNlLCB3aGljaCB3aWxsIGxhdGVyXG4gICAgICAgICAqICAgICAgICB5aWVsZCBhIHJlc3BvbnNlLiBGYWxzZSBvdGhlcndpc2UuXG4gICAgICAgICAqL1xuXG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIG9uTWVzc2FnZShtZXNzYWdlLCBzZW5kZXIsIHNlbmRSZXNwb25zZSkge1xuICAgICAgICAgIGxldCBkaWRDYWxsU2VuZFJlc3BvbnNlID0gZmFsc2U7XG4gICAgICAgICAgbGV0IHdyYXBwZWRTZW5kUmVzcG9uc2U7XG4gICAgICAgICAgbGV0IHNlbmRSZXNwb25zZVByb21pc2UgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICAgIHdyYXBwZWRTZW5kUmVzcG9uc2UgPSBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgZGlkQ2FsbFNlbmRSZXNwb25zZSA9IHRydWU7XG4gICAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBsZXQgcmVzdWx0O1xuXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IGxpc3RlbmVyKG1lc3NhZ2UsIHNlbmRlciwgd3JhcHBlZFNlbmRSZXNwb25zZSk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICByZXN1bHQgPSBQcm9taXNlLnJlamVjdChlcnIpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGlzUmVzdWx0VGhlbmFibGUgPSByZXN1bHQgIT09IHRydWUgJiYgaXNUaGVuYWJsZShyZXN1bHQpOyAvLyBJZiB0aGUgbGlzdGVuZXIgZGlkbid0IHJldHVybmVkIHRydWUgb3IgYSBQcm9taXNlLCBvciBjYWxsZWRcbiAgICAgICAgICAvLyB3cmFwcGVkU2VuZFJlc3BvbnNlIHN5bmNocm9ub3VzbHksIHdlIGNhbiBleGl0IGVhcmxpZXJcbiAgICAgICAgICAvLyBiZWNhdXNlIHRoZXJlIHdpbGwgYmUgbm8gcmVzcG9uc2Ugc2VudCBmcm9tIHRoaXMgbGlzdGVuZXIuXG5cbiAgICAgICAgICBpZiAocmVzdWx0ICE9PSB0cnVlICYmICFpc1Jlc3VsdFRoZW5hYmxlICYmICFkaWRDYWxsU2VuZFJlc3BvbnNlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfSAvLyBBIHNtYWxsIGhlbHBlciB0byBzZW5kIHRoZSBtZXNzYWdlIGlmIHRoZSBwcm9taXNlIHJlc29sdmVzXG4gICAgICAgICAgLy8gYW5kIGFuIGVycm9yIGlmIHRoZSBwcm9taXNlIHJlamVjdHMgKGEgd3JhcHBlZCBzZW5kTWVzc2FnZSBoYXNcbiAgICAgICAgICAvLyB0byB0cmFuc2xhdGUgdGhlIG1lc3NhZ2UgaW50byBhIHJlc29sdmVkIHByb21pc2Ugb3IgYSByZWplY3RlZFxuICAgICAgICAgIC8vIHByb21pc2UpLlxuXG5cbiAgICAgICAgICBjb25zdCBzZW5kUHJvbWlzZWRSZXN1bHQgPSBwcm9taXNlID0+IHtcbiAgICAgICAgICAgIHByb21pc2UudGhlbihtc2cgPT4ge1xuICAgICAgICAgICAgICAvLyBzZW5kIHRoZSBtZXNzYWdlIHZhbHVlLlxuICAgICAgICAgICAgICBzZW5kUmVzcG9uc2UobXNnKTtcbiAgICAgICAgICAgIH0sIGVycm9yID0+IHtcbiAgICAgICAgICAgICAgLy8gU2VuZCBhIEpTT04gcmVwcmVzZW50YXRpb24gb2YgdGhlIGVycm9yIGlmIHRoZSByZWplY3RlZCB2YWx1ZVxuICAgICAgICAgICAgICAvLyBpcyBhbiBpbnN0YW5jZSBvZiBlcnJvciwgb3IgdGhlIG9iamVjdCBpdHNlbGYgb3RoZXJ3aXNlLlxuICAgICAgICAgICAgICBsZXQgbWVzc2FnZTtcblxuICAgICAgICAgICAgICBpZiAoZXJyb3IgJiYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgfHwgdHlwZW9mIGVycm9yLm1lc3NhZ2UgPT09IFwic3RyaW5nXCIpKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IFwiQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZFwiO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgc2VuZFJlc3BvbnNlKHtcbiAgICAgICAgICAgICAgICBfX21veldlYkV4dGVuc2lvblBvbHlmaWxsUmVqZWN0X186IHRydWUsXG4gICAgICAgICAgICAgICAgbWVzc2FnZVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICAgIC8vIFByaW50IGFuIGVycm9yIG9uIHRoZSBjb25zb2xlIGlmIHVuYWJsZSB0byBzZW5kIHRoZSByZXNwb25zZS5cbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBzZW5kIG9uTWVzc2FnZSByZWplY3RlZCByZXBseVwiLCBlcnIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfTsgLy8gSWYgdGhlIGxpc3RlbmVyIHJldHVybmVkIGEgUHJvbWlzZSwgc2VuZCB0aGUgcmVzb2x2ZWQgdmFsdWUgYXMgYVxuICAgICAgICAgIC8vIHJlc3VsdCwgb3RoZXJ3aXNlIHdhaXQgdGhlIHByb21pc2UgcmVsYXRlZCB0byB0aGUgd3JhcHBlZFNlbmRSZXNwb25zZVxuICAgICAgICAgIC8vIGNhbGxiYWNrIHRvIHJlc29sdmUgYW5kIHNlbmQgaXQgYXMgYSByZXNwb25zZS5cblxuXG4gICAgICAgICAgaWYgKGlzUmVzdWx0VGhlbmFibGUpIHtcbiAgICAgICAgICAgIHNlbmRQcm9taXNlZFJlc3VsdChyZXN1bHQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZW5kUHJvbWlzZWRSZXN1bHQoc2VuZFJlc3BvbnNlUHJvbWlzZSk7XG4gICAgICAgICAgfSAvLyBMZXQgQ2hyb21lIGtub3cgdGhhdCB0aGUgbGlzdGVuZXIgaXMgcmVwbHlpbmcuXG5cblxuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9O1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHdyYXBwZWRTZW5kTWVzc2FnZUNhbGxiYWNrID0gKHtcbiAgICAgICAgcmVqZWN0LFxuICAgICAgICByZXNvbHZlXG4gICAgICB9LCByZXBseSkgPT4ge1xuICAgICAgICBpZiAoZXh0ZW5zaW9uQVBJcy5ydW50aW1lLmxhc3RFcnJvcikge1xuICAgICAgICAgIC8vIERldGVjdCB3aGVuIG5vbmUgb2YgdGhlIGxpc3RlbmVycyByZXBsaWVkIHRvIHRoZSBzZW5kTWVzc2FnZSBjYWxsIGFuZCByZXNvbHZlXG4gICAgICAgICAgLy8gdGhlIHByb21pc2UgdG8gdW5kZWZpbmVkIGFzIGluIEZpcmVmb3guXG4gICAgICAgICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9tb3ppbGxhL3dlYmV4dGVuc2lvbi1wb2x5ZmlsbC9pc3N1ZXMvMTMwXG4gICAgICAgICAgaWYgKGV4dGVuc2lvbkFQSXMucnVudGltZS5sYXN0RXJyb3IubWVzc2FnZSA9PT0gQ0hST01FX1NFTkRfTUVTU0FHRV9DQUxMQkFDS19OT19SRVNQT05TRV9NRVNTQUdFKSB7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoZXh0ZW5zaW9uQVBJcy5ydW50aW1lLmxhc3RFcnJvci5tZXNzYWdlKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHJlcGx5ICYmIHJlcGx5Ll9fbW96V2ViRXh0ZW5zaW9uUG9seWZpbGxSZWplY3RfXykge1xuICAgICAgICAgIC8vIENvbnZlcnQgYmFjayB0aGUgSlNPTiByZXByZXNlbnRhdGlvbiBvZiB0aGUgZXJyb3IgaW50b1xuICAgICAgICAgIC8vIGFuIEVycm9yIGluc3RhbmNlLlxuICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IocmVwbHkubWVzc2FnZSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc29sdmUocmVwbHkpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBjb25zdCB3cmFwcGVkU2VuZE1lc3NhZ2UgPSAobmFtZSwgbWV0YWRhdGEsIGFwaU5hbWVzcGFjZU9iaiwgLi4uYXJncykgPT4ge1xuICAgICAgICBpZiAoYXJncy5sZW5ndGggPCBtZXRhZGF0YS5taW5BcmdzKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCBhdCBsZWFzdCAke21ldGFkYXRhLm1pbkFyZ3N9ICR7cGx1cmFsaXplQXJndW1lbnRzKG1ldGFkYXRhLm1pbkFyZ3MpfSBmb3IgJHtuYW1lfSgpLCBnb3QgJHthcmdzLmxlbmd0aH1gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhcmdzLmxlbmd0aCA+IG1ldGFkYXRhLm1heEFyZ3MpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIGF0IG1vc3QgJHttZXRhZGF0YS5tYXhBcmdzfSAke3BsdXJhbGl6ZUFyZ3VtZW50cyhtZXRhZGF0YS5tYXhBcmdzKX0gZm9yICR7bmFtZX0oKSwgZ290ICR7YXJncy5sZW5ndGh9YCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHdyYXBwZWRDYiA9IHdyYXBwZWRTZW5kTWVzc2FnZUNhbGxiYWNrLmJpbmQobnVsbCwge1xuICAgICAgICAgICAgcmVzb2x2ZSxcbiAgICAgICAgICAgIHJlamVjdFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGFyZ3MucHVzaCh3cmFwcGVkQ2IpO1xuICAgICAgICAgIGFwaU5hbWVzcGFjZU9iai5zZW5kTWVzc2FnZSguLi5hcmdzKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICBjb25zdCBzdGF0aWNXcmFwcGVycyA9IHtcbiAgICAgICAgZGV2dG9vbHM6IHtcbiAgICAgICAgICBuZXR3b3JrOiB7XG4gICAgICAgICAgICBvblJlcXVlc3RGaW5pc2hlZDogd3JhcEV2ZW50KG9uUmVxdWVzdEZpbmlzaGVkV3JhcHBlcnMpXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBydW50aW1lOiB7XG4gICAgICAgICAgb25NZXNzYWdlOiB3cmFwRXZlbnQob25NZXNzYWdlV3JhcHBlcnMpLFxuICAgICAgICAgIG9uTWVzc2FnZUV4dGVybmFsOiB3cmFwRXZlbnQob25NZXNzYWdlV3JhcHBlcnMpLFxuICAgICAgICAgIHNlbmRNZXNzYWdlOiB3cmFwcGVkU2VuZE1lc3NhZ2UuYmluZChudWxsLCBcInNlbmRNZXNzYWdlXCIsIHtcbiAgICAgICAgICAgIG1pbkFyZ3M6IDEsXG4gICAgICAgICAgICBtYXhBcmdzOiAzXG4gICAgICAgICAgfSlcbiAgICAgICAgfSxcbiAgICAgICAgdGFiczoge1xuICAgICAgICAgIHNlbmRNZXNzYWdlOiB3cmFwcGVkU2VuZE1lc3NhZ2UuYmluZChudWxsLCBcInNlbmRNZXNzYWdlXCIsIHtcbiAgICAgICAgICAgIG1pbkFyZ3M6IDIsXG4gICAgICAgICAgICBtYXhBcmdzOiAzXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGNvbnN0IHNldHRpbmdNZXRhZGF0YSA9IHtcbiAgICAgICAgY2xlYXI6IHtcbiAgICAgICAgICBtaW5BcmdzOiAxLFxuICAgICAgICAgIG1heEFyZ3M6IDFcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0OiB7XG4gICAgICAgICAgbWluQXJnczogMSxcbiAgICAgICAgICBtYXhBcmdzOiAxXG4gICAgICAgIH0sXG4gICAgICAgIHNldDoge1xuICAgICAgICAgIG1pbkFyZ3M6IDEsXG4gICAgICAgICAgbWF4QXJnczogMVxuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgYXBpTWV0YWRhdGEucHJpdmFjeSA9IHtcbiAgICAgICAgbmV0d29yazoge1xuICAgICAgICAgIFwiKlwiOiBzZXR0aW5nTWV0YWRhdGFcbiAgICAgICAgfSxcbiAgICAgICAgc2VydmljZXM6IHtcbiAgICAgICAgICBcIipcIjogc2V0dGluZ01ldGFkYXRhXG4gICAgICAgIH0sXG4gICAgICAgIHdlYnNpdGVzOiB7XG4gICAgICAgICAgXCIqXCI6IHNldHRpbmdNZXRhZGF0YVxuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgcmV0dXJuIHdyYXBPYmplY3QoZXh0ZW5zaW9uQVBJcywgc3RhdGljV3JhcHBlcnMsIGFwaU1ldGFkYXRhKTtcbiAgICB9OyAvLyBUaGUgYnVpbGQgcHJvY2VzcyBhZGRzIGEgVU1EIHdyYXBwZXIgYXJvdW5kIHRoaXMgZmlsZSwgd2hpY2ggbWFrZXMgdGhlXG4gICAgLy8gYG1vZHVsZWAgdmFyaWFibGUgYXZhaWxhYmxlLlxuXG5cbiAgICBtb2R1bGUuZXhwb3J0cyA9IHdyYXBBUElzKGNocm9tZSk7XG4gIH0gZWxzZSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBnbG9iYWxUaGlzLmJyb3dzZXI7XG4gIH1cbn0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YnJvd3Nlci1wb2x5ZmlsbC5qcy5tYXBcbiIsImltcG9ydCB7bG9va3VwSXRlbXNCeUlELCBsb29rdXBJdGVtc0J5VXNlciwgbG9va3VwSXRlbXNCeUxvZ2dlZEluVXNlciwgbG9va3VwSXRlbXNCeUxvZ2dlZEluVXNlcldpdGhBdXRoLCBnZXRBdXRoLCBnZXRMb2dnZWRpblVzZXIsIHN0b3JlUmVkZGl0Q29va2llc30gZnJvbSAnLi9yZXF1ZXN0cy5qcydcbmltcG9ydCB7UkVNT1ZFRCwgREVMRVRFRCwgQVBQUk9WRUQsIExPQ0tFRCwgVU5MT0NLRUQsIEVESVRFRCxcbiAgICAgICAgYWRkTG9jYWxTdG9yYWdlSXRlbXMsIGdldExvY2FsU3RvcmFnZUl0ZW1zLFxuICAgICAgICBNQVhfU1lOQ19TVE9SQUdFX0lURU1TX1BFUl9PQkpFQ1QsIE1BWF9TWU5DX1NUT1JBR0VfQ0hBTkdFUywgU0VFTl9DT1VOVF9ERUZBVUxULFxuICAgICAgICBnZXRPYmplY3ROYW1lc0ZvclRoaW5nLCBnZXRVc2VySW5pdCB9IGZyb20gJy4vc3RvcmFnZS5qcydcbmltcG9ydCB7Y3JlYXRlTm90aWZpY2F0aW9uLCB1cGRhdGVCYWRnZVVuc2VlbkNvdW50LCB0cmltRGljdF9ieV9udW1iZXJWYWx1ZWRBdHRyaWJ1dGUsXG4gICAgICAgIGlzVXNlckRlbGV0ZWRJdGVtLCBpc1JlbW92ZWRJdGVtLCBpc0NvbW1lbnQsXG4gICAgICAgIEl0ZW1Gb3JTdG9yYWdlLCBMb2NhbFN0b3JhZ2VJdGVtLCBDaGFuZ2VGb3JTdG9yYWdlLCBzZXRXYXJuaW5nQmFkZ2V9IGZyb20gJy4vY29tbW9uLmpzJ1xuaW1wb3J0IGJyb3dzZXIgZnJvbSAnd2ViZXh0ZW5zaW9uLXBvbHlmaWxsJ1xuXG5cbmNvbnN0IFNVQlNDUklCRURfRlJPTV9SRURESVQgPSAwXG5jb25zdCBTVUJTQ1JJQkVEX0ZST01fUkVWRURESVQgPSAxXG5jb25zdCBTVUJTQ1JJQkVEX0ZST01fTkEgPSAyXG5cbmNvbnN0IFRBUkdFVF9TRUVOX0NPVU5UX0ZPUl9QUkVWSU9VU0xZX1JFQ09SREVEX0NIQU5HRSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDYwKSs2MFxuXG5leHBvcnQgY29uc3Qgc2V0Q3VycmVudFN0YXRlRm9ySWQgPSAoaWQsIHN1YnNjcmliZWRGcm9tVVJMKSA9PiB7XG4gICAgbGV0IHN1YnNjcmliZWRGcm9tID0gU1VCU0NSSUJFRF9GUk9NX1JFRERJVFxuICAgIGlmIChzdWJzY3JpYmVkRnJvbVVSTC5tYXRjaCgvXmh0dHBzOlxcL1xcL3d3dy5yZXZlZGRpdC5jb20vKSkge1xuICAgICAgICBzdWJzY3JpYmVkRnJvbSA9IFNVQlNDUklCRURfRlJPTV9SRVZFRERJVFxuICAgIH1cbiAgICByZXR1cm4gY2hyb21lLnN0b3JhZ2Uuc3luYy5nZXQobnVsbCwgZnVuY3Rpb24gKHN0b3JhZ2UpIHtcbiAgICAgICAgZ2V0QXV0aCgpXG4gICAgICAgIC50aGVuKChhdXRoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gY2hlY2tGb3JDaGFuZ2VzX3RoaW5nX2J5SWQoW2lkXSwgJ290aGVyJywgZmFsc2UsIGF1dGgsIHN0b3JhZ2UsIHN1YnNjcmliZWRGcm9tLCB7fSlcbiAgICAgICAgfSlcbiAgICB9KVxufVxuXG5jb25zdCBNSU5fUVVBUkFOVElORURfQ0hFQ0tfSU5URVJWQUxfSU5fU0VDT05EUyA9IDIwKig2MCo2MCoyNClcblxuZXhwb3J0IGNvbnN0IGNoZWNrRm9yQ2hhbmdlcyA9ICgpID0+IHtcbiAgICBjaHJvbWUuc3RvcmFnZS5zeW5jLmdldChudWxsLCBmdW5jdGlvbiAoc3RvcmFnZSkge1xuICAgICAgICB2YXIgb3RoZXIgPSBPYmplY3Qua2V5cyhzdG9yYWdlLm90aGVyX3N1YnNjcmlwdGlvbnMpXG4gICAgICAgIGNvbnN0IG5vdyA9IE1hdGguZmxvb3IobmV3IERhdGUoKS8xMDAwKVxuICAgICAgICBcbiAgICAgICAgLy8gY2hlY2sgZm9yIHF1YXJhbnRpbmVkIGNvbnRlbnQgb25jZSBpbiBhd2hpbGUgYW5kIGVuYWJsZSBtb25pdG9yX3F1YXJhbnRpbmVkIGlmIHNvbWUgaXMgZm91bmRcbiAgICAgICAgLy8gYmVjYXVzZSB1c2VycyBtYXkgbm90IGtub3cgdG8gZW5hYmxlIHRoaXMgb3B0aW9uXG4gICAgICAgIC8vIHRoZSBvcHRpb24gaXMgb2ZmIGJ5IGRlZmF1bHQgYmVjYXVzZSBpdCBjYW4gYXBwZWFyIHRvIGNhdXNlIGFuIG9jY2FzaW9uYWwgbG9nb3V0XG4gICAgICAgIGlmICghIHN0b3JhZ2UubGFzdF9jaGVja19xdWFyYW50aW5lZFxuICAgICAgICAgICAgfHwgKG5vdyAtIHN0b3JhZ2UubGFzdF9jaGVja19xdWFyYW50aW5lZCkgPiBNSU5fUVVBUkFOVElORURfQ0hFQ0tfSU5URVJWQUxfSU5fU0VDT05EUyApIHtcbiAgICAgICAgICAgIHN0b3JhZ2UudGVtcFZhcl9tb25pdG9yX3F1YXJhbnRpbmVkID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBPbmx5IGdldCBPQXV0aCBhdXRoIGlmIHVzZXIgaGFzIHByb3ZpZGVkIGEgY3VzdG9tIGNsaWVudCBJRFxuICAgICAgICBjb25zdCBuZWVkc09BdXRoID0gc3RvcmFnZS5vcHRpb25zLmN1c3RvbV9jbGllbnRpZCAmJiBzdG9yYWdlLm9wdGlvbnMuY3VzdG9tX2NsaWVudGlkICE9PSAnJ1xuICAgICAgICBjb25zdCBhdXRoUHJvbWlzZSA9IG5lZWRzT0F1dGggPyBnZXRBdXRoKHN0b3JhZ2UudGVtcFZhcl9tb25pdG9yX3F1YXJhbnRpbmVkKSA6IFByb21pc2UucmVzb2x2ZSgnbm9uZScpXG4gICAgICAgIFxuICAgICAgICBsZXQgY2FjaGVkQXV0aFxuICAgICAgICBhdXRoUHJvbWlzZS50aGVuKChhdXRoKSA9PiB7XG4gICAgICAgICAgICBjYWNoZWRBdXRoID0gYXV0aFxuICAgICAgICAgICAgLy8gQWx3YXlzIGNoZWNrIGZvciBsb2dnZWQtaW4gdXNlciwgcmVnYXJkbGVzcyBvZiBzdWJzY3JpcHRpb24gc3RhdHVzXG4gICAgICAgICAgICByZXR1cm4gY2hlY2tGb3JDaGFuZ2VzX2xvZ2dlZEluVXNlcihhdXRoLCBzdG9yYWdlKVxuICAgICAgICB9KVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAvLyBBbHNvIGNoZWNrIG90aGVyIHN1YnNjcmlwdGlvbnMgaWYgYW55IGV4aXN0XG4gICAgICAgICAgICBpZiAob3RoZXIubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoZWNrRm9yQ2hhbmdlc19vdGhlcihjYWNoZWRBdXRoLCBzdG9yYWdlKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXdTdG9yYWdlID0ge2xhc3RfY2hlY2s6IG5vd31cbiAgICAgICAgICAgIGlmIChzdG9yYWdlLnRlbXBWYXJfbW9uaXRvcl9xdWFyYW50aW5lZCkge1xuICAgICAgICAgICAgICAgIG5ld1N0b3JhZ2UubGFzdF9jaGVja19xdWFyYW50aW5lZCA9IG5vd1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0b3JhZ2UudGVtcFZhcl9xdWFyYW50aW5lZF9jb250ZW50X2ZvdW5kKSB7XG4gICAgICAgICAgICAgICAgbmV3U3RvcmFnZS5vcHRpb25zID0gc3RvcmFnZS5vcHRpb25zXG4gICAgICAgICAgICAgICAgbmV3U3RvcmFnZS5vcHRpb25zLm1vbml0b3JfcXVhcmFudGluZWQgPSB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaHJvbWUuc3RvcmFnZS5zeW5jLnNldChuZXdTdG9yYWdlKVxuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIGluIGNoZWNrRm9yQ2hhbmdlczonLCBlcnJvcilcbiAgICAgICAgICAgIC8vIENsZWFyIHdhcm5pbmcgYmFkZ2Ugb24gZXJyb3JcbiAgICAgICAgICAgIHVwZGF0ZUJhZGdlVW5zZWVuQ291bnQoKVxuICAgICAgICB9KVxuICAgIH0pXG59XG5cbmNvbnN0IGNoZWNrRm9yQ2hhbmdlc19sb2dnZWRJblVzZXIgPSBhc3luYyAoYXV0aCwgc3RvcmFnZSkgPT4ge1xuICAgIC8vIEZpcnN0IGdldCB0aGUgY3VycmVudCBsb2dnZWQtaW4gdXNlclxuICAgIHJldHVybiBnZXRMb2dnZWRpblVzZXIoKVxuICAgIC50aGVuKGxvZ2dlZEluVXNlciA9PiB7XG4gICAgICAgIGlmICghbG9nZ2VkSW5Vc2VyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnTm8gbG9nZ2VkLWluIHVzZXIgZm91bmQsIHNraXBwaW5nIHVzZXIgbW9uaXRvcmluZycpXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICAvLyBSZW1lbWJlciB0aGUgbGFzdCBkZXRlY3RlZCBsb2dnZWQtaW4gdXNlciBmb3IgcG9wdXAgZGlzcGxheSB3aXRob3V0IGV4dHJhIG5ldHdvcmsgY2FsbHNcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNocm9tZS5zdG9yYWdlLmxvY2FsLnNldCh7bGFzdF9sb2dnZWRfaW5fdXNlcjogbG9nZ2VkSW5Vc2VyfSlcbiAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgICAgXG4gICAgICAgIC8vIEFsd2F5cyBtb25pdG9yIHRoZSBjdXJyZW50bHkgbG9nZ2VkLWluIHVzZXIsIHJlZ2FyZGxlc3Mgb2Ygc3Vic2NyaXB0aW9uIHN0YXR1c1xuICAgICAgICAvLyBFbnN1cmUgc3RvcmFnZSBrZXlzIGV4aXN0IGZvciB0aGUgbG9nZ2VkLWluIHVzZXJcbiAgICAgICAgY29uc3QgdXNlckluaXQgPSBnZXRVc2VySW5pdChsb2dnZWRJblVzZXIpXG4gICAgICAgIGNocm9tZS5zdG9yYWdlLnN5bmMuZ2V0KE9iamVjdC5rZXlzKHVzZXJJbml0KSwgKGV4aXN0aW5nS2V5cykgPT4ge1xuICAgICAgICAgICAgY29uc3Qga2V5c1RvQ3JlYXRlID0ge31cbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHVzZXJJbml0KS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCEoa2V5IGluIGV4aXN0aW5nS2V5cykpIHtcbiAgICAgICAgICAgICAgICAgICAga2V5c1RvQ3JlYXRlW2tleV0gPSB1c2VySW5pdFtrZXldXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhrZXlzVG9DcmVhdGUpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjaHJvbWUuc3RvcmFnZS5zeW5jLnNldChrZXlzVG9DcmVhdGUpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICAvLyBVc2UgbWVzc2FnZSBwYXNzaW5nIHRvIGdldCBpdGVtcyBmcm9tIGNvbnRlbnQgc2NyaXB0IGNvbnRleHRcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIC8vIFRyeSB0byBmaW5kIGEgUmVkZGl0IHRhYiB0byBtYWtlIHRoZSByZXF1ZXN0IGZyb21cbiAgICAgICAgICAgIGNocm9tZS50YWJzLnF1ZXJ5KHt1cmw6IFsnKjovLyoucmVkZGl0LmNvbS8qJ119LCAodGFicykgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0YWJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBVc2Ugc3RvcmVkIGNvb2tpZXMgYXMgZmFsbGJhY2tcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgndXNlX3N0b3JlZF9jb29raWVzJylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHdlIGhhdmUgYSBzdXBwb3J0ZWQgc3ViZG9tYWluICh3d3cucmVkZGl0LmNvbSBvciBvbGQucmVkZGl0LmNvbSlcbiAgICAgICAgICAgICAgICBjb25zdCBzdXBwb3J0ZWRUYWJzID0gdGFicy5maWx0ZXIodGFiID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaG9zdG5hbWUgPSBuZXcgVVJMKHRhYi51cmwpLmhvc3RuYW1lXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBob3N0bmFtZSA9PT0gJ3d3dy5yZWRkaXQuY29tJyB8fCBob3N0bmFtZSA9PT0gJ29sZC5yZWRkaXQuY29tJ1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKHN1cHBvcnRlZFRhYnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdObyBzdXBwb3J0ZWQgUmVkZGl0IHN1YmRvbWFpbnMgZm91bmQgKHd3dy5yZWRkaXQuY29tIG9yIG9sZC5yZWRkaXQuY29tKScpXG4gICAgICAgICAgICAgICAgICAgIC8vIFRyeSB0byB1c2Ugc3RvcmVkIGNvb2tpZXMgYXMgZmFsbGJhY2tcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgndXNlX3N0b3JlZF9jb29raWVzJylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFVzZSB0aGUgZmlyc3Qgc3VwcG9ydGVkIFJlZGRpdCB0YWJcbiAgICAgICAgICAgICAgICBjb25zdCB0YWIgPSBzdXBwb3J0ZWRUYWJzWzBdXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gU3RvcmUgY29va2llcyBmb3IgZnV0dXJlIHVzZSB3aGVuIG5vIHRhYnMgYXJlIG9wZW5cbiAgICAgICAgICAgICAgICBzdG9yZVJlZGRpdENvb2tpZXMoKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNocm9tZS50YWJzLnNlbmRNZXNzYWdlKHRhYi5pZCwge2FjdGlvbjogJ2dldC1sb2dnZWQtaW4tdXNlci1pdGVtcyd9LCAocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNocm9tZS5ydW50aW1lLmxhc3RFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVjZWl2aW5nIGVuZCBkb2VzIG5vdCBleGlzdCwgZmFsbCBiYWNrIGdyYWNlZnVsbHkgYW5kIHNldCB3YXJuaW5nIGJhZGdlXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRXJyb3Igc2VuZGluZyBtZXNzYWdlIHRvIGNvbnRlbnQgc2NyaXB0OicsIGNocm9tZS5ydW50aW1lLmxhc3RFcnJvcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFdhcm5pbmdCYWRnZSgnbmVlZHNfdXNlcicpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCd1c2Vfc3RvcmVkX2Nvb2tpZXMnKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSlcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oaXRlbXMgPT4ge1xuICAgICAgICAgICAgaWYgKCEgaXRlbXMpIHJldHVybiAvLyBoYW5kbGUgZXhwZWN0ZWQgZXJyb3JzXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEhhbmRsZSBzdG9yZWQgY29va2llcyBjYXNlXG4gICAgICAgICAgICBpZiAoaXRlbXMgPT09ICd1c2Vfc3RvcmVkX2Nvb2tpZXMnKSB7XG4gICAgICAgICAgICAgICAgLy8gVHJ5IHRvIGZldGNoIGl0ZW1zIHVzaW5nIHN0b3JlZCBjb29raWVzXG4gICAgICAgICAgICAgICAgcmV0dXJuIGxvb2t1cEl0ZW1zQnlMb2dnZWRJblVzZXJXaXRoQXV0aCgnJywgJ25ldycsICcnLCBzdG9yYWdlLm9wdGlvbnMubW9uaXRvcl9xdWFyYW50aW5lZCwgc3RvcmFnZS50ZW1wVmFyX21vbml0b3JfcXVhcmFudGluZWQsIGF1dGgpXG4gICAgICAgICAgICAgICAgLnRoZW4oc3RvcmVkSXRlbXMgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoISBzdG9yZWRJdGVtcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RvcmVkIGNvb2tpZXMgYWxzbyBmYWlsZWQg4oaSIGtlZXAgeWVsbG93IGJhZGdlIHRvIGluZGljYXRlIGF0dGVudGlvbiBuZWVkZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFdhcm5pbmdCYWRnZSgnbmVlZHNfdXNlcicpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLy8gaGFuZGxlIGV4cGVjdGVkIGVycm9yc1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBpZHMgPSBbXVxuICAgICAgICAgICAgICAgICAgICBsZXQgcXVhcmFudGluZWRfc3VicmVkZGl0cyA9IG5ldyBTZXQoKVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpdGVtTG9va3VwID0ge31cbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0b3JlZEl0ZW1zLnVzZXIgJiYgc3RvcmVkSXRlbXMudXNlci5pdGVtcykgeyAvLyBmb3JtYXQgZnJvbSBjcmVkMi5yZXZlZGRpdC5jb21cbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlZEl0ZW1zID0gc3RvcmVkSXRlbXMudXNlci5pdGVtc1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHN0b3JlZEl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5kYXRhICYmIGl0ZW0uZGF0YS5uYW1lKSB7IC8vIGZvcm1hdCBmcm9tIHJlZGRpdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gPSBpdGVtLmRhdGFcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlkcy5wdXNoKGl0ZW0ubmFtZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1Mb29rdXBbaXRlbS5uYW1lXSA9IGl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLnF1YXJhbnRpbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWFyYW50aW5lZF9zdWJyZWRkaXRzLmFkZChpdGVtLnN1YnJlZGRpdClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9yYWdlLnRlbXBWYXJfcXVhcmFudGluZWRfY29udGVudF9mb3VuZCA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNoZWNrRm9yQ2hhbmdlc190aGluZ19ieUlkKGlkcywgbG9nZ2VkSW5Vc2VyLCB0cnVlLCBhdXRoLCBzdG9yYWdlLCBTVUJTQ1JJQkVEX0ZST01fTkEsIGl0ZW1Mb29rdXAsIEFycmF5LmZyb20ocXVhcmFudGluZWRfc3VicmVkZGl0cykpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIGlkcyA9IFtdXG4gICAgICAgICAgICBsZXQgcXVhcmFudGluZWRfc3VicmVkZGl0cyA9IG5ldyBTZXQoKVxuICAgICAgICAgICAgY29uc3QgaXRlbUxvb2t1cCA9IHt9XG4gICAgICAgICAgICBpZiAoaXRlbXMudXNlciAmJiBpdGVtcy51c2VyLml0ZW1zKSB7IC8vIGZvcm1hdCBmcm9tIGNyZWQyLnJldmVkZGl0LmNvbVxuICAgICAgICAgICAgICAgIGl0ZW1zID0gaXRlbXMudXNlci5pdGVtc1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5kYXRhICYmIGl0ZW0uZGF0YS5uYW1lKSB7IC8vIGZvcm1hdCBmcm9tIHJlZGRpdFxuICAgICAgICAgICAgICAgICAgICBpdGVtID0gaXRlbS5kYXRhXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlkcy5wdXNoKGl0ZW0ubmFtZSlcbiAgICAgICAgICAgICAgICBpdGVtTG9va3VwW2l0ZW0ubmFtZV0gPSBpdGVtXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0ucXVhcmFudGluZSkge1xuICAgICAgICAgICAgICAgICAgICBxdWFyYW50aW5lZF9zdWJyZWRkaXRzLmFkZChpdGVtLnN1YnJlZGRpdClcbiAgICAgICAgICAgICAgICAgICAgc3RvcmFnZS50ZW1wVmFyX3F1YXJhbnRpbmVkX2NvbnRlbnRfZm91bmQgPSB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHJldHVybiBjaGVja0ZvckNoYW5nZXNfdGhpbmdfYnlJZChpZHMsIGxvZ2dlZEluVXNlciwgdHJ1ZSwgYXV0aCwgc3RvcmFnZSwgU1VCU0NSSUJFRF9GUk9NX05BLCBpdGVtTG9va3VwLCBBcnJheS5mcm9tKHF1YXJhbnRpbmVkX3N1YnJlZGRpdHMpKVxuICAgICAgICB9KVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAvLyBDbGVhciB3YXJuaW5nIGJhZGdlIGFuZCBlcnJvciBzdGF0ZSBpZiB3ZSBzdWNjZXNzZnVsbHkgcHJvY2Vzc2VkIGl0ZW1zXG4gICAgICAgICAgICBjaHJvbWUuc3RvcmFnZS5sb2NhbC5yZW1vdmUoJ2Vycm9yX3N0YXR1cycsICgpID0+IHtcbiAgICAgICAgICAgICAgICB1cGRhdGVCYWRnZVVuc2VlbkNvdW50KClcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfSlcbiAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgaW4gY2hlY2tGb3JDaGFuZ2VzX2xvZ2dlZEluVXNlcjonLCBlcnJvcilcbiAgICB9KVxufVxuXG5mdW5jdGlvbiBjaGVja0ZvckNoYW5nZXNfb3RoZXIoYXV0aCwgc3RvcmFnZSkge1xuICAgIGNvbnN0IGlkcyA9IE9iamVjdC5rZXlzKHN0b3JhZ2Uub3RoZXJfc3Vic2NyaXB0aW9ucylcbiAgICBpZiAoaWRzLmxlbmd0aCkge1xuICAgICAgICBjaGVja0ZvckNoYW5nZXNfdGhpbmdfYnlJZChpZHMsICdvdGhlcicsIGZhbHNlLCBhdXRoLCBzdG9yYWdlLCBTVUJTQ1JJQkVEX0ZST01fTkEpXG4gICAgfVxufVxuXG5jb25zdCBjaGVja0ZvckNoYW5nZXNfdGhpbmdfYnlJZCA9IGFzeW5jIChpZHMsIHRoaW5nLCBpc1VzZXIsIGF1dGgsIHN0b3JhZ2UsIHN1YnNjcmliZWRGcm9tLCBpdGVtTG9va3VwID0ge30sIHF1YXJhbnRpbmVkX3N1YnJlZGRpdHMgPSBbXSkgPT4ge1xuICAgIGxldCBwcm9taXNlXG4gICAgY29uc3QgbW9uaXRvcl9xdWFyYW50aW5lZCA9IHN0b3JhZ2Uub3B0aW9ucy5tb25pdG9yX3F1YXJhbnRpbmVkXG4gICAgaWYgKGxvY2F0aW9uLnByb3RvY29sLm1hdGNoKC9eaHR0cC8pKSB7XG4gICAgICAgIC8vIHRoaXMgY29uZGl0aW9uIGlzIGZvciB3aGVuIHRoZSBjb2RlIGlzIGFjdGl2YXRlZCB2aWEgYSBjb250ZW50IHNjcmlwdCAoZS5nLiB0aGUgc3Vic2NyaWJlIGJ1dHRvbikgYW5kIGJyb3dzZXIuY29va2llcyBpcyB1bmF2YWlsYWJsZVxuICAgICAgICBwcm9taXNlID0gYnJvd3Nlci5ydW50aW1lLnNlbmRNZXNzYWdlKHthY3Rpb246ICdnZXQtcmVkZGl0LWl0ZW1zLWJ5LWlkJywgaWRzLCBtb25pdG9yX3F1YXJhbnRpbmVkfSlcbiAgICB9IGVsc2Uge1xuICAgICAgICBwcm9taXNlID0gbG9va3VwSXRlbXNCeUlEKGlkcywgYXV0aCwgbW9uaXRvcl9xdWFyYW50aW5lZCwgc3RvcmFnZS50ZW1wVmFyX21vbml0b3JfcXVhcmFudGluZWQsIHF1YXJhbnRpbmVkX3N1YnJlZGRpdHMpXG4gICAgfVxuICAgIHJldHVybiBwcm9taXNlXG4gICAgLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgaWYgKCEgcmVzdWx0KSByZXR1cm4gLy8gaGFuZGxlIGV4cGVjdGVkIGVycm9yc1xuICAgICAgICBjb25zdCBpdGVtcyA9IEFycmF5LmlzQXJyYXkocmVzdWx0KSA/IHJlc3VsdCA6IHJlc3VsdC5pdGVtc1xuICAgICAgICBpZiAoISBpdGVtcykgcmV0dXJuIC8vIGhhbmRsZSBleHBlY3RlZCBlcnJvcnMgZnJvbSBvYmpcbiAgICAgICAgY29uc3QgcmVtb3ZhbF9zdGF0dXMgPSBzdG9yYWdlLm9wdGlvbnMucmVtb3ZhbF9zdGF0dXNcbiAgICAgICAgY29uc3QgbG9ja19zdGF0dXMgPSBzdG9yYWdlLm9wdGlvbnMubG9ja19zdGF0dXNcbiAgICAgICAgY29uc3QgdGFyZ2V0X3NlZW5fY291bnQgPSBzdG9yYWdlLm9wdGlvbnMuc2Vlbl9jb3VudCB8fCBTRUVOX0NPVU5UX0RFRkFVTFRcbiAgICAgICAgY29uc3Qga2V5cyA9IGdldE9iamVjdE5hbWVzRm9yVGhpbmcodGhpbmcsIGlzVXNlcilcblxuICAgICAgICBjb25zdCBrbm93bl9yZW1vdmVkID0gc3RvcmFnZVtrZXlzWydyZW1vdmVkJ11dIHx8IHt9XG4gICAgICAgIGNvbnN0IGtub3duX2FwcHJvdmVkID0gc3RvcmFnZVtrZXlzWydhcHByb3ZlZCddXSB8fCB7fVxuICAgICAgICBjb25zdCBrbm93bl9sb2NrZWQgPSBzdG9yYWdlW2tleXNbJ2xvY2tlZCddXSB8fCB7fVxuICAgICAgICBjb25zdCBrbm93bl91bmxvY2tlZCA9IHN0b3JhZ2Vba2V5c1sndW5sb2NrZWQnXV0gfHwge31cbiAgICAgICAgY29uc3QgY2hhbmdlcyA9IHN0b3JhZ2Vba2V5c1snY2hhbmdlcyddXSB8fCBbXVxuICAgICAgICBpZiAoISBpc1VzZXIpIHtcbiAgICAgICAgICAgIGl0ZW1Mb29rdXAgPSB7fVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlbW92ZWQgPSBbXSwgYXBwcm92ZWQgPSBbXSwgbG9ja2VkID0gW10sIHVubG9ja2VkID0gW11cbiAgICAgICAgaXRlbXMuZm9yRWFjaChpdGVtV3JhcCA9PiB7XG4gICAgICAgICAgICBjb25zdCBpdGVtID0gaXRlbVdyYXAuZGF0YVxuICAgICAgICAgICAgaWYgKCEgaXNVc2VyKSB7XG4gICAgICAgICAgICAgICAgaXRlbUxvb2t1cFtpdGVtLm5hbWVdID0gaXRlbVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzUmVtb3ZlZEl0ZW0oaXRlbSkpIHtcbiAgICAgICAgICAgICAgICByZW1vdmVkLnB1c2goaXRlbS5uYW1lKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhcHByb3ZlZC5wdXNoKGl0ZW0ubmFtZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpdGVtLmxvY2tlZCkge1xuICAgICAgICAgICAgICAgIGxvY2tlZC5wdXNoKGl0ZW0ubmFtZSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdW5sb2NrZWQucHVzaChpdGVtLm5hbWUpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC8vIG1hcmsgaXRlbXMgdGhhdCBkbyBub3QgZXhpc3QgaW4gYXJyYXlzXG4gICAgICAgIC8vIGNoYW5nZSBoYXBwZW5zIGlmOlxuICAgICAgICAvLyAgICAgIHRyYWNraW5nIHJlbW92YWxzICYmIGl0ZW0gaXMgcmVtb3ZlZFxuICAgICAgICAvLyAgICAgIHRyYWNraW5nIHJlbW92YWxzICYmIGl0ZW0gd2FzIGluIHJlbW92ZWQsIG5vdyBpbiBhcHByb3ZlZFxuICAgICAgICBjb25zdCBuZXdMb2NhbFN0b3JhZ2VJdGVtcyA9IHt9XG5cbiAgICAgICAgY29uc3QgY2hhbmdlVHlwZXMgPSBbXVxuICAgICAgICBsZXQgbnVtX2NoYW5nZXMgPSAwXG4gICAgICAgIHJldHVybiBnZXRMb2NhbFN0b3JhZ2VJdGVtcyh0aGluZywgaXNVc2VyKVxuICAgICAgICAudGhlbihleGlzdGluZ0xvY2FsU3RvcmFnZUl0ZW1zID0+IHtcbiAgICAgICAgICAgIGlmIChyZW1vdmFsX3N0YXR1cy50cmFjaykge1xuICAgICAgICAgICAgICAgIG51bV9jaGFuZ2VzICs9IG1hcmtDaGFuZ2VzKHJlbW92ZWQsIFJFTU9WRUQsICdtb2QgcmVtb3ZlZCcsIGtub3duX3JlbW92ZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwcm92ZWQsIEFQUFJPVkVELCAnYXBwcm92ZWQnLCBrbm93bl9hcHByb3ZlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VzLCBpdGVtTG9va3VwLCByZW1vdmFsX3N0YXR1cy5ub3RpZnksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TG9jYWxTdG9yYWdlSXRlbXMsIGNoYW5nZVR5cGVzLCBpc1VzZXIsIHN1YnNjcmliZWRGcm9tLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nTG9jYWxTdG9yYWdlSXRlbXMsIHRhcmdldF9zZWVuX2NvdW50KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGxvY2tfc3RhdHVzLnRyYWNrKSB7XG4gICAgICAgICAgICAgICAgbnVtX2NoYW5nZXMgKz0gbWFya0NoYW5nZXMobG9ja2VkLCBMT0NLRUQsICdsb2NrZWQnLCBrbm93bl9sb2NrZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5sb2NrZWQsIFVOTE9DS0VELCAndW5sb2NrZWQnLCBrbm93bl91bmxvY2tlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VzLCBpdGVtTG9va3VwLCBsb2NrX3N0YXR1cy5ub3RpZnksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TG9jYWxTdG9yYWdlSXRlbXMsIGNoYW5nZVR5cGVzLCBpc1VzZXIsIHN1YnNjcmliZWRGcm9tLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nTG9jYWxTdG9yYWdlSXRlbXMsIHRhcmdldF9zZWVuX2NvdW50KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG51bV9jaGFuZ2VzICYmIGNoYW5nZVR5cGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBDcmVhdGluZyBub3RpZmljYXRpb24gZm9yICR7dGhpbmd9OiAke251bV9jaGFuZ2VzfSBjaGFuZ2VzIG9mIHR5cGUgJHtjaGFuZ2VUeXBlcy5qb2luKCcsICcpfWApXG4gICAgICAgICAgICAgICAgY3JlYXRlTm90aWZpY2F0aW9uKFxuICAgICAgICAgICAgICAgICAgICB7bm90aWZpY2F0aW9uSWQ6IHRoaW5nLFxuICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRoaW5nLFxuICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYCR7bnVtX2NoYW5nZXN9IG5ldyBbJHtjaGFuZ2VUeXBlcy5qb2luKCcsICcpfV0gYWN0aW9ucywgY2xpY2sgdG8gdmlld2B9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNocm9tZS5zdG9yYWdlLnN5bmMuc2V0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBba2V5c1sncmVtb3ZlZCddXTogdHJpbURpY3RfYnlfbnVtYmVyVmFsdWVkQXR0cmlidXRlKGtub3duX3JlbW92ZWQsIE1BWF9TWU5DX1NUT1JBR0VfSVRFTVNfUEVSX09CSkVDVCwgJ2MnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBba2V5c1snYXBwcm92ZWQnXV06IHRyaW1EaWN0X2J5X251bWJlclZhbHVlZEF0dHJpYnV0ZShrbm93bl9hcHByb3ZlZCwgTUFYX1NZTkNfU1RPUkFHRV9JVEVNU19QRVJfT0JKRUNULCAnYycpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtrZXlzWydsb2NrZWQnXV06IHRyaW1EaWN0X2J5X251bWJlclZhbHVlZEF0dHJpYnV0ZShrbm93bl9sb2NrZWQsIE1BWF9TWU5DX1NUT1JBR0VfSVRFTVNfUEVSX09CSkVDVCwgJ2MnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBba2V5c1sndW5sb2NrZWQnXV06IHRyaW1EaWN0X2J5X251bWJlclZhbHVlZEF0dHJpYnV0ZShrbm93bl91bmxvY2tlZCwgTUFYX1NZTkNfU1RPUkFHRV9JVEVNU19QRVJfT0JKRUNULCAnYycpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtrZXlzWydjaGFuZ2VzJ11dOiBjaGFuZ2VzLnNsaWNlKC1NQVhfU1lOQ19TVE9SQUdFX0NIQU5HRVMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdXBkYXRlQmFkZ2VVbnNlZW5Db3VudCgpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFkZExvY2FsU3RvcmFnZUl0ZW1zKG5ld0xvY2FsU3RvcmFnZUl0ZW1zLCB0aGluZywgaXNVc2VyKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9KVxufVxuXG5jb25zdCBjaGFuZ2VJc1ByZXZpb3VzbHlSZWNvcmRlZCA9IChuYW1lLCBjaGFuZ2VfdHlwZSwgY2hhbmdlcykgPT4ge1xuICAgIGZvciAoY29uc3QgY2hhbmdlIG9mIGNoYW5nZXMpIHtcbiAgICAgICAgbGV0IGNoYW5nZV9vYmogPSBjaGFuZ2VcbiAgICAgICAgaWYgKCEgKGNoYW5nZV9vYmogaW5zdGFuY2VvZiBDaGFuZ2VGb3JTdG9yYWdlKSkge1xuICAgICAgICAgICAgY2hhbmdlX29iaiA9IG5ldyBDaGFuZ2VGb3JTdG9yYWdlKHtvYmplY3Q6IGNoYW5nZX0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNoYW5nZV9vYmouZ2V0SUQoKSA9PT0gbmFtZSAmJiBjaGFuZ2VfdHlwZSA9PT0gY2hhbmdlX29iai5nZXRDaGFuZ2VUeXBlSW50ZXJuYWwoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2Vcbn1cblxuXG4vLyBuZXdMb2NhbFN0b3JhZ2VJdGVtcyBvcGVyYXRlcyBhcyBhIHJldHVybiB2YWx1ZVxuZnVuY3Rpb24gbWFya0NoYW5nZXMgKGFsZXJ0X2N1cnJlbnRfbGlzdCwgYWxlcnRfdHlwZSwgYWxlcnRfdGV4dCwgYWxlcnRfa25vd25faGFzaCxcbiAgICAgICAgICAgICAgICAgICAgICBub3JtYWxfY3VycmVudF9saXN0LCBub3JtYWxfdHlwZSwgbm9ybWFsX3RleHQsIG5vcm1hbF9rbm93bl9oYXNoLFxuICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZXMsIGl0ZW1Mb29rdXAsIG5vdGlmeSwgbmV3TG9jYWxTdG9yYWdlSXRlbXMsIGNoYW5nZVR5cGVzLFxuICAgICAgICAgICAgICAgICAgICAgIGlzVXNlciwgc3Vic2NyaWJlZEZyb20sIGV4aXN0aW5nTG9jYWxTdG9yYWdlSXRlbXMsIHRhcmdldF9zZWVuX2NvdW50KSB7XG4gICAgY29uc3QgYWxlcnRfdW5zZWVuX2lkcyA9IFtdLFxuICAgICAgICAgIG5vcm1hbF91bnNlZW5faWRzID0gW10sXG4gICAgICAgICAgYWxlcnRfdXNlckRlbGV0ZWRfdW5zZWVuX2lkcyA9IFtdLFxuICAgICAgICAgIG5vdyA9IE1hdGguZmxvb3IobmV3IERhdGUoKS8xMDAwKVxuXG4gICAgYWxlcnRfY3VycmVudF9saXN0LmZvckVhY2gobmFtZSA9PiB7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSBpdGVtTG9va3VwW25hbWVdXG4gICAgICAgIC8vIDEuIGluIHRoZSBjYXNlIG9mIGEgbm9uLXVzZXJwYWdlLXRyYWNrZWQgKGlzVXNlcj1mYWxzZSkgcmVtb3ZlZCBjb21tZW50LCBkb24ndCBvdmVyd3JpdGUgbG9jYWwgc3RvcmFnZSBiL2NcbiAgICAgICAgLy8gaWYgaXQgd2VyZSBvdmVyd3JpdHRlbiwgYm9keSB3b3VsZCBhcHBlYXIgb24gaGlzdG9yeSBwYWdlIGFzIFtyZW1vdmVkXVxuICAgICAgICAvLyAyLiBpbiB0aGUgY2FzZSBvZiB1c2VycGFnZSB0cmFja2luZyAoaXNVc2VyPXRydWUpLCBvbmx5IG5lZWQgdG8gc2F2ZSB0aGUgdGV4dCBpbiBsb2NhbCBzdG9yYWdlXG4gICAgICAgIC8vIHdoZW4gdGhlcmUgaXMgYSBjaGFuZ2UuIHVzZXIgcGFnZSBsb29rdXAgKGl0ZW1Mb29rdXApIHdpbGwgaGF2ZSBvcmlnaW5hbCB0ZXh0XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nTG9jYWxTdG9yYWdlSXRlbSA9IGV4aXN0aW5nTG9jYWxTdG9yYWdlSXRlbXNbbmFtZV1cbiAgICAgICAgaWYgKCEgaXNVc2VyICYmICEgZXhpc3RpbmdMb2NhbFN0b3JhZ2VJdGVtKSB7XG4gICAgICAgICAgICBuZXdMb2NhbFN0b3JhZ2VJdGVtc1tuYW1lXSA9IG5ldyBMb2NhbFN0b3JhZ2VJdGVtKHtpdGVtOiBpdGVtLCBvYnNlcnZlZF91dGM6IG5vd30pXG4gICAgICAgIH0gZWxzZSBpZiAoZXhpc3RpbmdMb2NhbFN0b3JhZ2VJdGVtKSB7XG4gICAgICAgICAgICAvLyByZXNldCBzZWVuX2NvdW50IHNvIHRoYXQgaXRlbXMgb2JzZXJ2ZWQgYXMgYXBwcm92ZWQvbm9ybWFsIG11c3QgYmUgY29uc2VjdXRpdmVseSBzZWVuIHcvdGhhdCBzdGF0ZVxuICAgICAgICAgICAgLy8gTm90ZTogVGhlIHZhciBzZWVuX2NvdW50IGlzIHJlYWxseSBhICdzZWVuIGFzIG5vcm1hbCcgY291bnQsIGJ1dCB3ZSBkb24ndCBuZWVkIGFuIGFsZXJ0X3NlZW5fY291bnRcbiAgICAgICAgICAgIGNvbnN0IG5ld0xvY2FsU3RvcmFnZUl0ZW0gPSBuZXcgTG9jYWxTdG9yYWdlSXRlbSh7b2JqZWN0OiBleGlzdGluZ0xvY2FsU3RvcmFnZUl0ZW19KVxuICAgICAgICAgICAgbmV3TG9jYWxTdG9yYWdlSXRlbS5yZXNldFNlZW5Db3VudCgpXG4gICAgICAgICAgICBuZXdMb2NhbFN0b3JhZ2VJdGVtc1tuYW1lXSA9IG5ld0xvY2FsU3RvcmFnZUl0ZW1cbiAgICAgICAgfVxuICAgICAgICBpZiAoISAobmFtZSBpbiBhbGVydF9rbm93bl9oYXNoKSkge1xuICAgICAgICAgICAgLy8gbWFya1Vuc2VlbiBpcyBhbHdheXMgdHJ1ZSBleGNlcHQgd2hlbiBzdWJzY3JpYmluZyB2aWEgYSByZWRkaXQgKG5vdCByZXZlZGRpdCkgcGFnZSB0byBhIG5ldyBJRCBmb3IgJ290aGVyJ1xuICAgICAgICAgICAgLy8gc3Vic2NyaXB0aW9ucy4gQXMgbG9uZyBhcyB0aGUgaXRlbSBpcyBub3QgJ3JlbW92ZWQnLCB0aGUgY3VycmVudCBzdGF0ZSBpcyBzdG9yZWQgYXMgJ3NlZW4nICh1bnNlZW49ZmFsc2UpLlxuICAgICAgICAgICAgLy8gSXQgaXMgYXNzdW1lZCB0aGF0IHVzZXJzIHN1YnNjcmliaW5nIGZyb20gcmV2ZWRkaXQgcGFnZXMgd2lsbCBhbHJlYWR5IGhhdmUgc2VlbiBhbGwgdGhlIGN1cnJlbnQgbW9kIGFjdGlvbnMsXG4gICAgICAgICAgICAvLyBhbmQgdXNlcnMgc3Vic2NyaWJpbmcgZnJvbSBhIHJlZGRpdCBwYWdlIHdpbGwgYWxyZWFkeSBrbm93IGFib3V0IGxvY2tlZCBpdGVtc1xuICAgICAgICAgICAgbGV0IG1hcmtVbnNlZW4gPSB0cnVlXG4gICAgICAgICAgICBpZiAoKHN1YnNjcmliZWRGcm9tID09PSBTVUJTQ1JJQkVEX0ZST01fUkVERElUICYmIGFsZXJ0X3R5cGUgIT09IFJFTU9WRUQpIHx8XG4gICAgICAgICAgICAgICAgIHN1YnNjcmliZWRGcm9tID09PSBTVUJTQ1JJQkVEX0ZST01fUkVWRURESVQpIHtcbiAgICAgICAgICAgICAgICBtYXJrVW5zZWVuID0gZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFsZXJ0X2tub3duX2hhc2hbbmFtZV0gPSBuZXcgSXRlbUZvclN0b3JhZ2UoXG4gICAgICAgICAgICAgICAgaXRlbS5jcmVhdGVkX3V0YyxcbiAgICAgICAgICAgICAgICBtYXJrVW5zZWVuLFxuICAgICAgICAgICAgICAgIChpc0NvbW1lbnQoaXRlbS5uYW1lKSAmJiBpdGVtLmxpbmtfaWQpID8gaXRlbS5saW5rX2lkIDogdW5kZWZpbmVkXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBkZWxldGUgbm9ybWFsX2tub3duX2hhc2hbbmFtZV1cbiAgICAgICAgICAgIGlmIChtYXJrVW5zZWVuKSB7XG4gICAgICAgICAgICAgICAgbGV0IGFsZXJ0X3R5cGVfdmFyID0gYWxlcnRfdHlwZVxuICAgICAgICAgICAgICAgIGlmIChpc1VzZXJEZWxldGVkSXRlbShpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICBhbGVydF90eXBlX3ZhciA9IERFTEVURURcbiAgICAgICAgICAgICAgICAgICAgYWxlcnRfdXNlckRlbGV0ZWRfdW5zZWVuX2lkcy5wdXNoKG5hbWUpXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYWxlcnRfdW5zZWVuX2lkcy5wdXNoKG5hbWUpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNoYW5nZXMucHVzaChuZXcgQ2hhbmdlRm9yU3RvcmFnZSh7aWQ6IG5hbWUsIG9ic2VydmVkX3V0Yzogbm93LCBjaGFuZ2VfdHlwZTogYWxlcnRfdHlwZV92YXJ9KSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc1VzZXIpIHtcbiAgICAgICAgICAgICAgICBuZXdMb2NhbFN0b3JhZ2VJdGVtc1tuYW1lXSA9IG5ldyBMb2NhbFN0b3JhZ2VJdGVtKHtpdGVtOiBpdGVtLCBvYnNlcnZlZF91dGM6IG5vd30pXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KVxuICAgIG5vcm1hbF9jdXJyZW50X2xpc3QuZm9yRWFjaChuYW1lID0+IHtcbiAgICAgICAgY29uc3QgaXRlbSA9IGl0ZW1Mb29rdXBbbmFtZV1cbiAgICAgICAgLy8gc2F2ZSBvcmlnaW5hbCB0ZXh0IGZvciBhbGwgbm9uLXVzZXJwYWdlLXRyYWNrZWQgaXRlbXMgc2luY2UgY29tbWVudCB0ZXh0IGNhbiBkaXNhcHBlYXJcbiAgICAgICAgaWYgKCEgaXNVc2VyICYmICEgZXhpc3RpbmdMb2NhbFN0b3JhZ2VJdGVtc1tuYW1lXSkge1xuICAgICAgICAgICAgbmV3TG9jYWxTdG9yYWdlSXRlbXNbbmFtZV0gPSBuZXcgTG9jYWxTdG9yYWdlSXRlbSh7aXRlbTogaXRlbSwgb2JzZXJ2ZWRfdXRjOiBub3d9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChuYW1lIGluIGFsZXJ0X2tub3duX2hhc2gpIHtcbiAgICAgICAgICAgIGNvbnN0IHRoaXNfbG9jYWxTdG9yYWdlSXRlbSA9IG5ldyBMb2NhbFN0b3JhZ2VJdGVtKHtvYmplY3Q6IGV4aXN0aW5nTG9jYWxTdG9yYWdlSXRlbXNbbmFtZV19KVxuICAgICAgICAgICAgLy8gVHJhY2sgdGhlIHNlZW4gY291bnQsIGFrYSAnb2JzZXJ2ZWQgc2FtZSBzdGF0dXMnIGNvdW50XG4gICAgICAgICAgICAvLyBEb2luZyBzbyBhbGxvd3Mgc2VuZGluZyBhbiBhbGVydCBvbmx5IGFmdGVyIE4gdGltZXMgYSBuZXcgc3RhdHVzIGhhcyBiZWVuIG9ic2VydmVkLlxuICAgICAgICAgICAgLy8gU2VlOiBodHRwczovL3d3dy5yZWRkaXQuY29tL3IvcmV2ZWRkaXQvY29tbWVudHMvemM3dGNtL3JldmVkZGl0X3NlbmRpbmdfcmVwZXRpdGl2ZV9ub3RpZmljYXRpb25zL1xuICAgICAgICAgICAgY29uc3Qgc2Vlbl9jb3VudCA9IHRoaXNfbG9jYWxTdG9yYWdlSXRlbS5pbmNyZW1lbnRTZWVuQ291bnQoKVxuICAgICAgICAgICAgaWYgKHNlZW5fY291bnQgPj0gdGFyZ2V0X3NlZW5fY291bnQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGFuZ2VfaXNfcHJldmlvdXNseV9yZWNvcmRlZCA9IGNoYW5nZUlzUHJldmlvdXNseVJlY29yZGVkKG5hbWUsIG5vcm1hbF90eXBlLCBjaGFuZ2VzKVxuICAgICAgICAgICAgICAgIC8vIFRvIHByZXZlbnQgcmVwZWF0IG5vdGlmaWNhdGlvbnMsIHdob3NlIG5vbi1kZXRlcm1pbmlzdGljIGNhdXNlIEkgaGF2ZW4ndCB5ZXQgZmlndXJlZCBvdXQsXG4gICAgICAgICAgICAgICAgLy8gb25seSBub3RpZnkgYWJvdXQgdGhlIHNlY29uZCBvYnNlcnZlZCBjaGFuZ2UgaW4gc3RhdHVzIGJhY2sgdG8gJ25vcm1hbCcgKGFwcHJvdmVkL3VubG9ja2VkKVxuICAgICAgICAgICAgICAgIC8vIGlmIGEgaGlnaGVyIHRocmVzaG9sZCBvZiBjb25zZWN1dGl2ZSBub3JtYWwgc3RhdHVzZXMgaGFzIGJlZW4gb2JzZXJ2ZWRcbiAgICAgICAgICAgICAgICBpZiAoISBjaGFuZ2VfaXNfcHJldmlvdXNseV9yZWNvcmRlZCB8fCBzZWVuX2NvdW50ID49IFRBUkdFVF9TRUVOX0NPVU5UX0ZPUl9QUkVWSU9VU0xZX1JFQ09SREVEX0NIQU5HRSkge1xuICAgICAgICAgICAgICAgICAgICBub3JtYWxfa25vd25faGFzaFtuYW1lXSA9IG5ldyBJdGVtRm9yU3RvcmFnZShcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uY3JlYXRlZF91dGMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgKGlzQ29tbWVudChpdGVtLm5hbWUpICYmIGl0ZW0ubGlua19pZCkgPyBpdGVtLmxpbmtfaWQgOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgYWxlcnRfa25vd25faGFzaFtuYW1lXVxuXG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZXMucHVzaChuZXcgQ2hhbmdlRm9yU3RvcmFnZSh7aWQ6IG5hbWUsIG9ic2VydmVkX3V0Yzogbm93LCBjaGFuZ2VfdHlwZTogbm9ybWFsX3R5cGUsIHNlZW5fY291bnR9KSlcbiAgICAgICAgICAgICAgICAgICAgbm9ybWFsX3Vuc2Vlbl9pZHMucHVzaChuYW1lKVxuXG4gICAgICAgICAgICAgICAgICAgIG5ld0xvY2FsU3RvcmFnZUl0ZW1zW25hbWVdID0gbmV3IExvY2FsU3RvcmFnZUl0ZW0oe2l0ZW06IGl0ZW0sIG9ic2VydmVkX3V0Yzogbm93fSlcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBuZXdMb2NhbFN0b3JhZ2VJdGVtc1tuYW1lXSA9IHRoaXNfbG9jYWxTdG9yYWdlSXRlbVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3TG9jYWxTdG9yYWdlSXRlbXNbbmFtZV0gPSB0aGlzX2xvY2FsU3RvcmFnZUl0ZW1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5vcm1hbF9rbm93bl9oYXNoW25hbWVdID0gbmV3IEl0ZW1Gb3JTdG9yYWdlKFxuICAgICAgICAgICAgICAgIGl0ZW0uY3JlYXRlZF91dGMsXG4gICAgICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICAgICAgKGlzQ29tbWVudChpdGVtLm5hbWUpICYmIGl0ZW0ubGlua19pZCkgPyBpdGVtLmxpbmtfaWQgOiB1bmRlZmluZWRcbiAgICAgICAgICAgIClcbiAgICAgICAgfVxuICAgIH0pXG4gICAgY29uc3QgbnVtX2NoYW5nZXMgPSBhbGVydF91bnNlZW5faWRzLmxlbmd0aCArIG5vcm1hbF91bnNlZW5faWRzLmxlbmd0aCArIGFsZXJ0X3VzZXJEZWxldGVkX3Vuc2Vlbl9pZHMubGVuZ3RoXG4gICAgaWYgKG5vdGlmeSAmJiBudW1fY2hhbmdlcykge1xuICAgICAgICBpZiAoYWxlcnRfdW5zZWVuX2lkcy5sZW5ndGgpIGNoYW5nZVR5cGVzLnB1c2goYWxlcnRfdGV4dClcbiAgICAgICAgaWYgKGFsZXJ0X3VzZXJEZWxldGVkX3Vuc2Vlbl9pZHMubGVuZ3RoKSBjaGFuZ2VUeXBlcy5wdXNoKCd1c2VyIGRlbGV0ZWQnKVxuICAgICAgICBpZiAobm9ybWFsX3Vuc2Vlbl9pZHMubGVuZ3RoKSBjaGFuZ2VUeXBlcy5wdXNoKG5vcm1hbF90ZXh0KVxuICAgIH1cbiAgICByZXR1cm4gbnVtX2NoYW5nZXNcbn1cbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIl0sIm5hbWVzIjpbImdsb2JhbFRoaXMiLCJzZWxmIiwibW9kdWxlIiwiY2hyb21lIiwicnVudGltZSIsImlkIiwiRXJyb3IiLCJicm93c2VyIiwiT2JqZWN0IiwiZ2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJDSFJPTUVfU0VORF9NRVNTQUdFX0NBTExCQUNLX05PX1JFU1BPTlNFX01FU1NBR0UiLCJ3cmFwQVBJcyIsImV4dGVuc2lvbkFQSXMiLCJhcGlNZXRhZGF0YSIsImtleXMiLCJsZW5ndGgiLCJEZWZhdWx0V2Vha01hcCIsIldlYWtNYXAiLCJjb25zdHJ1Y3RvciIsImNyZWF0ZUl0ZW0iLCJpdGVtcyIsInVuZGVmaW5lZCIsInN1cGVyIiwidGhpcyIsImdldCIsImtleSIsImhhcyIsInNldCIsImlzVGhlbmFibGUiLCJ2YWx1ZSIsInRoZW4iLCJtYWtlQ2FsbGJhY2siLCJwcm9taXNlIiwibWV0YWRhdGEiLCJjYWxsYmFja0FyZ3MiLCJsYXN0RXJyb3IiLCJyZWplY3QiLCJtZXNzYWdlIiwic2luZ2xlQ2FsbGJhY2tBcmciLCJyZXNvbHZlIiwicGx1cmFsaXplQXJndW1lbnRzIiwibnVtQXJncyIsIndyYXBBc3luY0Z1bmN0aW9uIiwibmFtZSIsInRhcmdldCIsImFyZ3MiLCJtaW5BcmdzIiwibWF4QXJncyIsIlByb21pc2UiLCJmYWxsYmFja1RvTm9DYWxsYmFjayIsImNiRXJyb3IiLCJjb25zb2xlIiwid2FybiIsIm5vQ2FsbGJhY2siLCJ3cmFwTWV0aG9kIiwibWV0aG9kIiwid3JhcHBlciIsIlByb3h5IiwiYXBwbHkiLCJ0YXJnZXRNZXRob2QiLCJ0aGlzT2JqIiwiY2FsbCIsImhhc093blByb3BlcnR5IiwiRnVuY3Rpb24iLCJiaW5kIiwid3JhcE9iamVjdCIsIndyYXBwZXJzIiwiY2FjaGUiLCJjcmVhdGUiLCJoYW5kbGVycyIsInByb3h5VGFyZ2V0IiwicHJvcCIsInJlY2VpdmVyIiwiZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZGVzYyIsIlJlZmxlY3QiLCJkZWxldGVQcm9wZXJ0eSIsIndyYXBFdmVudCIsIndyYXBwZXJNYXAiLCJhZGRMaXN0ZW5lciIsImxpc3RlbmVyIiwiaGFzTGlzdGVuZXIiLCJyZW1vdmVMaXN0ZW5lciIsIm9uUmVxdWVzdEZpbmlzaGVkV3JhcHBlcnMiLCJyZXEiLCJ3cmFwcGVkUmVxIiwiZ2V0Q29udGVudCIsIm9uTWVzc2FnZVdyYXBwZXJzIiwic2VuZGVyIiwic2VuZFJlc3BvbnNlIiwid3JhcHBlZFNlbmRSZXNwb25zZSIsInJlc3VsdCIsImRpZENhbGxTZW5kUmVzcG9uc2UiLCJzZW5kUmVzcG9uc2VQcm9taXNlIiwicmVzcG9uc2UiLCJlcnIiLCJpc1Jlc3VsdFRoZW5hYmxlIiwic2VuZFByb21pc2VkUmVzdWx0IiwibXNnIiwiZXJyb3IiLCJfX21veldlYkV4dGVuc2lvblBvbHlmaWxsUmVqZWN0X18iLCJjYXRjaCIsIndyYXBwZWRTZW5kTWVzc2FnZUNhbGxiYWNrIiwicmVwbHkiLCJ3cmFwcGVkU2VuZE1lc3NhZ2UiLCJhcGlOYW1lc3BhY2VPYmoiLCJ3cmFwcGVkQ2IiLCJwdXNoIiwic2VuZE1lc3NhZ2UiLCJzdGF0aWNXcmFwcGVycyIsImRldnRvb2xzIiwibmV0d29yayIsIm9uUmVxdWVzdEZpbmlzaGVkIiwib25NZXNzYWdlIiwib25NZXNzYWdlRXh0ZXJuYWwiLCJ0YWJzIiwic2V0dGluZ01ldGFkYXRhIiwiY2xlYXIiLCJwcml2YWN5Iiwic2VydmljZXMiLCJ3ZWJzaXRlcyIsImV4cG9ydHMiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZCIsImRlZmluaXRpb24iLCJvIiwib2JqIl0sInNvdXJjZVJvb3QiOiIifQ==