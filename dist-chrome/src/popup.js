!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=11)}([function(e,t,n){"use strict";n.r(t),n.d(t,"INTERVAL_DEFAULT",function(){return u}),n.d(t,"MAX_SYNC_STORAGE_ITEMS_PER_OBJECT",function(){return s}),n.d(t,"MAX_SYNC_STORAGE_CHANGES",function(){return a}),n.d(t,"MAX_OTHER_SUBSCRIPTIONS",function(){return d}),n.d(t,"REMOVED",function(){return f}),n.d(t,"APPROVED",function(){return l}),n.d(t,"LOCKED",function(){return h}),n.d(t,"UNLOCKED",function(){return g}),n.d(t,"EDITED",function(){return p}),n.d(t,"DELETED",function(){return b}),n.d(t,"getObjectNamesForThing",function(){return _}),n.d(t,"markEverythingAsSeen",function(){return w}),n.d(t,"markThingAsSeen",function(){return k}),n.d(t,"setStorageUpdateBadge",function(){return E}),n.d(t,"markIDsAsSeenIfSubscribed",function(){return S}),n.d(t,"subscribeId",function(){return T}),n.d(t,"unsubscribeId",function(){return I}),n.d(t,"getSubscribedIds",function(){return A}),n.d(t,"subscribeUser",function(){return D}),n.d(t,"unsubscribeUser",function(){return C}),n.d(t,"initStorage",function(){return M}),n.d(t,"getSubscribedUsers_withSeenAndUnseenIDs",function(){return U}),n.d(t,"getSubscribedUsers_withUnseenIDs",function(){return R}),n.d(t,"getUnseenIDs_thing",function(){return P}),n.d(t,"getIDs_thing",function(){return L}),n.d(t,"getLocalStorageItems",function(){return x}),n.d(t,"saveLocalStorageItems",function(){return N}),n.d(t,"addLocalStorageItems",function(){return F}),n.d(t,"getItemFromLocalStorage",function(){return $}),n.d(t,"getAllChanges",function(){return B}),n.d(t,"getOptions",function(){return V}),n.d(t,"saveOptions",function(){return G});var r=n(1);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(n,!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=1,s=130,a=100,d=100,f=1,l=2,h=3,g=4,p=5,b=6,m={changes:[],removed:{},approved:{},locked:{},unlocked:{}},v=function(e,t,n){return n?e+"_u_"+t:e+"_"+t},y=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Object.keys(m).forEach(function(r){e[v(r,t,n)]=m[r]})},_=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n={};return Object.keys(m).forEach(function(r){n[r]=v(r,e,t)}),n},O=function(e){var t={};return y(t,e,!0),t},w=function(){return browser.storage.sync.get(null).then(function(e){return Object.keys(e.user_subscriptions).forEach(function(t){k(e,t,!0)}),k(e,"other",!1),E(e)})},k=function(e,t,n){var r=_(t,n);delete r.changes;var o=[];Object.values(r).forEach(function(e){o.push(e)}),o.forEach(function(t){Object.values(e[t]).forEach(function(e){e.u=!1})})},E=function(e){return browser.storage.sync.set(e).then(function(e){return browser.runtime.sendMessage({action:"update-badge"})})},j=function(e,t,n,o,c){var i=e[t[n]];Object.keys(o).forEach(function(e){e in i?i[e].u=!1:c&&(i[e]=new r.ItemForStorage(o[e],!1))})},S=function(e,t,n,r,o,c,i){var u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:function(){},s=_(t,n);delete s.changes;var a=e.user_subscriptions[t];!a&&n||(j(e,s,"removed",r,n),j(e,s,"approved",o,n),j(e,s,"locked",c,n),j(e,s,"unlocked",i,n),chrome.storage.sync.set(e,u))},T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n="other_subscriptions";chrome.storage.sync.get(n,function(o){o[n][e]={t:Math.floor((new Date).getTime()/1e3)};var c=Object(r.trimDict_by_numberValuedAttribute)(o[n],d,"t");chrome.storage.sync.set(i({},n,c),t)})},I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n="other_subscriptions",r=_("other",!1);delete r.changes,chrome.storage.sync.get(Object.values(r).concat(n),function(o){delete o[n][e],Object.values(r).forEach(function(t){e in o[t]&&delete o[t][e]}),chrome.storage.sync.set(o,function(){chrome.runtime.sendMessage({action:"update-badge"},t)})})},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t="other_subscriptions";chrome.storage.sync.get(t,function(n){e(Object.keys(n[t]))})},D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=O(e);chrome.storage.sync.get("user_subscriptions",function(o){var i=o.user_subscriptions;e in i?n("already subscribed to this user"):Object.keys(i).length<5?(i[e]=!0,chrome.storage.sync.set(c({user_subscriptions:i},r),t)):n("maximum number of subscriptions reached")})},C=function(e,t){var n=Object.keys(O(e));chrome.storage.sync.get("user_subscriptions",function(r){var o=r.user_subscriptions;delete o[e],chrome.storage.sync.set({user_subscriptions:o},function(){chrome.storage.sync.remove(n,function(){var n=v("items",e,!0);chrome.runtime.sendMessage({action:"update-badge"}),chrome.storage.local.remove(n,t)})})})},M=function(e){chrome.storage.sync.get(null,function(t){var n;0===Object.keys(t).length?chrome.storage.sync.set((y(n={user_subscriptions:{},other_subscriptions:{},options:{interval:u,custom_clientid:"",removal_status:{track:!0,notify:!0},lock_status:{track:!0,notify:!0}}},"other",!1),n),e):e()})},U=function(e){chrome.storage.sync.get(null,function(t){var n=Object.keys(t.user_subscriptions),r={};n.forEach(function(e){r[e]=L(e,!0,t)}),r.other=L("other",!1,t),e(r,t)})},R=function(e){chrome.storage.sync.get(null,function(t){var n=Object.keys(t.user_subscriptions),r={};n.forEach(function(e){r[e]=P(e,!0,t)}),r.other=P("other",!1,t),e(r)})},P=function(e,t,n){return L(e,t,n).unseen},L=function(e,t,n){var r=n.options.removal_status.track,o=n.options.lock_status.track,c={},i={},u=[],s=_(e,t);return r&&u.push(s.removed,s.approved),o&&u.push(s.locked,s.unlocked),u.forEach(function(e){Object.keys(n[e]).forEach(function(t){n[e][t].u?c[t]=!0:i[t]=!0})}),{unseen:Object.keys(c),seen:Object.keys(i)}},x=function(e,t){var n=v("items",e,t);return browser.storage.local.get(i({},n,{})).then(function(e){return e[n]})},N=function(e,t,n){var r=v("items",e,t);return browser.storage.local.set(i({},r,n))},F=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},o=v("items",t,n);chrome.storage.local.get(i({},o,{}),function(t){var n=t[o];Object.keys(e).forEach(function(t){n[t]=e[t]});var c=n;Object.keys(n).length>500&&(c=trimDictOfItems_by_utcAttribute(n,500,"o")),chrome.storage.local.set(i({},o,c),r)})},$=function(e,t,n,o){var c=v("items",e,t);return c in o&&n in o[c]?new r.LocalStorageItem({object:o[c][n]}):""},B=function(e){chrome.storage.sync.get("user_subscriptions",function(t){var n=[v("changes","other",!1)],r={changes_other:"other"};Object.keys(t.user_subscriptions).forEach(function(e){var t=v("changes",e,!0);n.push(t),r[t]=e}),chrome.storage.sync.get(n,function(t){var o={};n.forEach(function(e){e in t&&t[e].length&&(o[r[e]]=t[e])}),e(o)})})},V=function(e){return browser.storage.sync.get(["user_subscriptions","other_subscriptions","options"]).then(function(t){var n=Object.keys(t.user_subscriptions),r=Object.keys(t.other_subscriptions),o=t.options;return e(n,r,o)}).catch(console.log)},G=function(e,t,n,r,o,c,i){chrome.storage.sync.set({options:{interval:e,custom_clientid:t,removal_status:{track:n,notify:r},lock_status:{track:o,notify:c}}},i)}},function(e,t,n){"use strict";n.r(t),n.d(t,"ALARM_NAME",function(){return u}),n.d(t,"createTab",function(){return s}),n.d(t,"getFullIDsFromURL",function(){return a}),n.d(t,"getFullIDsFromPath",function(){return l}),n.d(t,"reformatRedditText",function(){return h}),n.d(t,"isRemovedItem",function(){return g}),n.d(t,"isComment",function(){return p}),n.d(t,"isRemovedComment",function(){return b}),n.d(t,"isUserDeletedComment",function(){return m}),n.d(t,"isUserDeletedPost",function(){return v}),n.d(t,"isUserDeletedItem",function(){return y}),n.d(t,"isRemovedPost",function(){return _}),n.d(t,"trimDict_by_numberValuedAttribute",function(){return O}),n.d(t,"sortDict_by_numberValuedAttribute",function(){return w}),n.d(t,"ItemForStorage",function(){return k}),n.d(t,"ChangeForStorage",function(){return E}),n.d(t,"LocalStorageItem",function(){return j}),n.d(t,"setAlarm",function(){return S}),n.d(t,"alphaLowerSort",function(){return T}),n.d(t,"goToOptions",function(){return I}),n.d(t,"showError",function(){return A}),n.d(t,"pprint",function(){return D}),n.d(t,"getPrettyTimeLength",function(){return C}),n.d(t,"getPrettyDate",function(){return M}),n.d(t,"createNotification",function(){return U}),n.d(t,"updateBadgeUnseenCount",function(){return R});var r=n(0);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}var u="notifyme",s=function(e){chrome.tabs.create({url:e},function(t){t?chrome.windows.update(t.windowId,{focused:!0}):chrome.windows.create({url:e},function(e){chrome.windows.update(e.id,{focused:!0})})})},a=function(e){var t=e.replace(/https:\/\/[^/]*re(ve)?ddit.com/,"");return l(t)},d=/^\/(r|user)\/([^/]+)\/comments\/([^/]+)\/[^/]*(?:\/([^/?&#]+))?/,f=/^\/user\/([^/?&#]+)\/?/,l=function(e){var t=void 0,n=void 0,r=void 0,o=void 0,c=e.match(d),i=e.match(f);c?("user"===c[1]?r=c[2]:o=c[2],c[3]&&(t="t3_"+c[3]),c[4]&&(n="t1_"+c[4])):i&&(r=i[1]);return[t,n,r,o]},h=function(e){return e.replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/\s+/g," ").substr(0,300)},g=function(e){return p(e.name)?b(e):_(e)},p=function(e){return"t1"===e.substr(0,2)},b=function(e){return("[removed]"===e.body.replace(/\\/g,"")||"[deleted]"===e.body.replace(/\\/g,""))&&"[deleted]"===e.author.replace(/\\/g,"")},m=function(e){return"[deleted]"===e.body.replace(/\\/g,"")&&"[deleted]"===e.author.replace(/\\/g,"")},v=function(e){return!e.is_robot_indexable&&"[deleted]"===e.author.replace(/\\/g,"")},y=function(e){return p(e.name)?m(e):v(e)},_=function(e){return!e.is_robot_indexable},O=function(e,t,n){var r=w(e,n).slice(0,t),o={};return r.forEach(function(e){o[e[0]]=e[1]}),o},w=function(e,t){var n=Object.keys(e).map(function(t){return[t,e[t]]});return n.sort(function(e,n){return n[1][t]-e[1][t]}),n},k=function(){function e(t,n){o(this,e),this.c=t,this.u=n}return i(e,[{key:"getCreatedUTC",value:function(){return this.c}},{key:"getUnseen",value:function(){return this.u}}]),e}(),E=function(){function e(t){var n=t.id,r=void 0===n?null:n,c=t.observed_utc,i=void 0===c?null:c,u=t.change_type,s=void 0===u?null:u,a=t.object,d=void 0===a?null:a;o(this,e),d?(this.i=d.i,this.o=d.o,this.g=d.g):(this.i=r,this.o=i,this.g=s)}return i(e,[{key:"getID",value:function(){return this.i}},{key:"getObservedUTC",value:function(){return this.o}},{key:"getChangeType",value:function(){switch(this.g){case r.REMOVED:return"mod removed";case r.DELETED:return"user deleted";case r.APPROVED:return"approved";case r.LOCKED:return"locked";case r.UNLOCKED:return"unlocked";case r.EDITED:return"edited"}}}]),e}(),j=function(){function e(t){var n=t.item,r=void 0===n?null:n,c=t.observed_utc,i=void 0===c?null:c,u=t.object,s=void 0===u?null:u;if(o(this,e),s)this.t=s.t,this.o=s.o,this.c=s.c;else{var a="";a=p(r.name)?h(r.body):r.title,this.t=a,this.o=i,this.c=r.created_utc}}return i(e,[{key:"setText",value:function(e){this.t=h(e)}},{key:"getText",value:function(){return this.t}},{key:"getObservedUTC",value:function(){return this.o}},{key:"getCreatedUTC",value:function(){return this.c}}]),e}();function S(e){chrome.alarms.clear(u),chrome.alarms.create(u,{delayInMinutes:1,periodInMinutes:e})}function T(e,t){var n=e.toLowerCase(),r=t.toLowerCase();return n<r?-1:n>r?1:0}function I(){chrome.runtime.openOptionsPage?(chrome.runtime.openOptionsPage(),window.close()):window.open(chrome.runtime.getURL("/src/options.html"))}function A(e,t){$('<div class="rr-error">'+e+"</div>").appendTo(t).delay(2400).fadeTo(400,0,function(){$(this).remove()})}function D(e){console.log(JSON.stringify(e,null,"\t"))}var C=function(e){var t=[[60,"second","seconds"],[60,"minute","minutes"],[24,"hour","hours"],[7,"day","days"],[365/12/7,"week","weeks"],[12,"month","months"],[10,"year","years"],[10,"decade","decades"],[10,"century","centuries"],[10,"millenium","millenia"]];if(e<60)return e+" seconds";for(var n=e,r=0;r<t.length;r++){var o=t[r][0],c=t[r][1],i=t[r][2];if(n<o){var u=n-Math.floor(n),s=Math.round(u*t[r-1][0]);if(t[r-1][0]===s&&(n+=1,s=0),(Math.floor(n)>1||0==Math.floor(n))&&(c=i),r>1&&s>0){var a=t[r-1][1];s>1&&(a=t[r-1][2]),c+=", "+String(s)+" "+a}return String(Math.floor(n))+" "+c}n/=o}},M=function(e){var t=Math.floor((new Date).getTime()/1e3)-e;return C(t)+" ago"},U=function(e){var t=e.notificationId,n=e.title,r=e.message;location.protocol.match(/^http/)?chrome.runtime.sendMessage({action:"create-notification",options:{notificationId:t,title:n,message:r}}):chrome.notifications.create(t,{type:"basic",iconUrl:"/icons/128.png",title:n,message:r})},R=function(){location.protocol.match(/^http/)?chrome.runtime.sendMessage({action:"update-badge"}):Object(r.getSubscribedUsers_withUnseenIDs)(function(e){var t=0;Object.values(e).forEach(function(e){t+=e.length});var n=t.toString();0==t&&(n=""),chrome.browserAction.setBadgeBackgroundColor({color:"red"}),chrome.browserAction.setBadgeText({text:n})})}},function(e,t,n){"use strict";n.r(t),n.d(t,"lookupItemsByID",function(){return c}),n.d(t,"lookupItemsByUser",function(){return i}),n.d(t,"handleFetchErrors",function(){return u}),n.d(t,"getRedditData",function(){return s}),n.d(t,"getRedditToken",function(){return a}),n.d(t,"getAuth",function(){return d}),n.d(t,"getLocalAuth",function(){return f}),n.d(t,"getCookie",function(){return l}),n.d(t,"getLocalOrAppAuth",function(){return g}),n.d(t,"getLoggedinUser",function(){return p});var r=n(0);function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var c=function(e,t){var n,r={id:e,raw_json:1},c="?"+Object.keys(r).map(function(e){return"".concat(e,"=").concat(r[e])}).join("&");return(n=window).fetch.apply(n,o(h("api/info",c,t))).then(u).then(s).catch(console.log)},i=function(e,t,n,r,c){var i,a={limit:100,sort:n,raw_json:1};t&&(a.after=t),r&&(a.t=r);var d="user/".concat(e,"/overview.json"),f="?"+Object.keys(a).map(function(e){return"".concat(e,"=").concat(a[e])}).join("&");return(i=window).fetch.apply(i,o(h(d,f,c))).then(u).then(s).catch(console.log)},u=function(e){if(!e.ok)throw Error(e.statusText);return e.json()},s=function(e){if(!e||!e.data||!e.data.children)throw Error("reddit data is not defined");return e.data.children},a=function(e){if(!e||!e.access_token)throw Error("access token is not defined");return e.access_token},d=function(){return Object(r.getOptions)(function(e,t,n){var r="SEw1uvRd6kxFEw";if(n.custom_clientid&&"testing"===(r=n.custom_clientid))return"none";var o={headers:{Authorization:"Basic ".concat(window.btoa("".concat(r,":"))),"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},method:"POST",body:"grant_type=".concat(encodeURIComponent("https://oauth.reddit.com/grants/installed_client"),"&device_id=DO_NOT_TRACK_THIS_DEVICE")};return window.fetch("https://www.reddit.com/api/v1/access_token",o).then(u).then(a).then(function(e){return{headers:{Authorization:"bearer ".concat(e)}}}).catch(console.log)})},f=function(){return window.fetch("https://mod.reddit.com/mail/all").then(function(e){l({url:"https://mod.reddit.com",name:"token"}).then(function(e){if(e){var t=new RegExp("[^A-Za-z0-9+/].*?$"),n=e.value.replace(t,""),r=atob(n),o=JSON.parse(r);return"accessToken"in o&&o.accessToken?{headers:{Authorization:"bearer ".concat(o.accessToken)}}:null}return null})})},l=function(e){var t=e.url,n=e.name;return location.protocol.match(/^http/)?browser.runtime.sendMessage({action:"get-cookie",options:{url:t,name:n}}).then(function(e){return e.cookie}):browser.cookies.get({url:t,name:n})},h=function(e,t,n){if(n&&"none"!==n)return["https://oauth.reddit.com/"+e+t,n];var r="https://www.reddit.com/"+e;return"api/info"===e&&(r+=".json"),[r+=t]},g=function(){return f().then(function(e){return e||d()}).catch(console.log)},p=function(){return window.fetch("https://www.reddit.com/api/me.json").then(u).then(b).catch(console.log)},b=function(e){if(!e||!e.data||!e.data.name)throw Error("reddit username is not defined");return e.data.name}},,function(e,t,n){"use strict";n.d(t,"b",function(){return d}),n.d(t,"a",function(){return f});var r=n(2),o=n(0),c=n(1);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=0,s=1,a=2,d=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},o=u;t.match(/^https:\/\/www.reveddit.com/)&&(o=s),chrome.storage.sync.get(null,function(t){Object(r.getAuth)().then(function(r){l([e],"other",!1,r,t,o,{},n)})})},f=function(){chrome.storage.sync.get(null,function(e){var t=Object.keys(e.user_subscriptions),n=Object.keys(e.other_subscriptions);(t.length||n.length)&&Object(r.getAuth)().then(function(n){!function(e,t){var n=Object.keys(t.other_subscriptions);n.length&&l(n,"other",!1,e,t,a)}(n,e),function e(t,n,o){if(t.length){var c=t[0];Object(r.lookupItemsByUser)(c,"","new","",n).then(function(r){if(r){var i=[],u={};r.forEach(function(e){i.push(e.data.name),u[e.data.name]=e.data}),l(i,c,!0,n,o,a,u,function(){e(t.slice(1),n,o)})}})}}(t,n,e)})})};function l(e,t,n,u,s,a){var d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},f=arguments.length>7&&void 0!==arguments[7]?arguments[7]:function(){};Object(r.lookupItemsByID)(e,u).then(function(e){if(e){var r=s.options.removal_status,u=s.options.lock_status,l=Object(o.getObjectNamesForThing)(t,n),g=s[l.removed]||{},p=s[l.approved]||{},b=s[l.locked]||{},m=s[l.unlocked]||{},v=s[l.changes]||[];n||(d={});var y=[],_=[],O=[],w=[];e.forEach(function(e){var t=e.data;n||(d[t.name]=t),Object(c.isRemovedItem)(t)?y.push(t.name):_.push(t.name),t.locked?O.push(t.name):w.push(t.name)});var k={},E=[],j=0;Object(o.getLocalStorageItems)(t,n).then(function(e){var s;r.track&&(j+=h(y,o.REMOVED,"mod removed",g,_,o.APPROVED,"approved",p,v,d,r.notify,k,E,n,a,e)),u.track&&(j+=h(O,o.LOCKED,"locked",b,w,o.UNLOCKED,"unlocked",m,v,d,u.notify,k,E,n,a,e)),j&&E.length&&Object(c.createNotification)({notificationId:t,title:t,message:"".concat(j," new [").concat(E.join(", "),"] actions, click to view")}),chrome.storage.sync.set((i(s={},l.removed,Object(c.trimDict_by_numberValuedAttribute)(g,o.MAX_SYNC_STORAGE_ITEMS_PER_OBJECT,"c")),i(s,l.approved,Object(c.trimDict_by_numberValuedAttribute)(p,o.MAX_SYNC_STORAGE_ITEMS_PER_OBJECT,"c")),i(s,l.locked,Object(c.trimDict_by_numberValuedAttribute)(b,o.MAX_SYNC_STORAGE_ITEMS_PER_OBJECT,"c")),i(s,l.unlocked,Object(c.trimDict_by_numberValuedAttribute)(m,o.MAX_SYNC_STORAGE_ITEMS_PER_OBJECT,"c")),i(s,l.changes,v.slice(-o.MAX_SYNC_STORAGE_CHANGES)),s),function(){Object(c.updateBadgeUnseenCount)(),Object(o.addLocalStorageItems)(k,t,n,f)})})}})}function h(e,t,n,r,i,a,d,f,l,h,g,p,b,m,v,y){var _=[],O=[],w=[],k=Math.floor(new Date/1e3);e.forEach(function(e){var n=h[e];if(m||y[e]||(p[e]=new c.LocalStorageItem({item:n,observed_utc:k})),!(e in r)){var i=!0;if((v===u&&t!==o.REMOVED||v===s)&&(i=!1),r[e]=new c.ItemForStorage(n.created_utc,i),delete f[e],i){var a=t;Object(c.isUserDeletedItem)(n)?(a=o.DELETED,w.push(e)):_.push(e),l.push(new c.ChangeForStorage({id:e,observed_utc:k,change_type:a}))}m&&(p[e]=new c.LocalStorageItem({item:n,observed_utc:k}))}}),i.forEach(function(e){var t=h[e];m||y[e]||(p[e]=new c.LocalStorageItem({item:t,observed_utc:k})),e in r?(f[e]=new c.ItemForStorage(t.created_utc,!0),delete r[e],l.push(new c.ChangeForStorage({id:e,observed_utc:k,change_type:a})),O.push(e),p[e]=new c.LocalStorageItem({item:t,observed_utc:k})):f[e]=new c.ItemForStorage(t.created_utc,!1)});var E=_.length+O.length+w.length;return g&&E&&(_.length&&b.push(n),w.length&&b.push("user deleted"),O.length&&b.push(d)),E}},,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(1),o=n(0),c=n(4);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,c=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,c=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw c}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function u(){$("#popup").empty(),$(' <div id="switches"></div>\n        <div id="rr-input">\n            <input type="text" id="user" placeholder="username">\n            <button id="rr-go">go</button>\n        </div>\n        <div style="clear:both"></div>\n        <div><a class="blue-link" id="go-to-options" href="/src/options.html">options</a></div>\n        <div style="clear:both"></div>\n        <div><a href="#" class="clear-notifications blue-link">clear notifications</a></div>\n        <div style="clear:both"></div>\n    ').appendTo("#popup"),$(".clear-notifications").click(function(){Object(o.markEverythingAsSeen)().then(function(e){u()})}),$("#go-to-options").click(r.goToOptions),Object(o.getSubscribedUsers_withSeenAndUnseenIDs)(function(e,t){var n=e.other;delete e.other,Object.keys(e).length>0&&$('<div class="num-unseen"># unseen</div>').appendTo("#popup"),Object.keys(e).forEach(function(t){!function(e,t){var n="";t.length&&(n="?show=".concat(t.join(","),"&removal_status=all"));var r="https://www.reveddit.com/user/".concat(e).concat(n);f(e,!0,"".concat(t.length),r)}(t,e[t].unseen)}),$("<hr>").appendTo("#popup"),function(e,t){var n="/src/other.html";e.length&&(n="https://www.reveddit.com/info?id=".concat(e.join(","),"&removal_status=all"));f("other",!1,"".concat(e.length," / ").concat(t),n)}(n.unseen,Object.keys(t.other_subscriptions).length),$("<hr>").appendTo("#popup"),$('<a target="_blank" class="blue-link" id="go-to-history" href="/src/history.html">history</a>').click(s).wrap('<div id="bottom">').parent().appendTo("#popup")}),chrome.storage.sync.get(null,function(e){chrome.tabs.query({active:!0,currentWindow:!0},function(t){var n=t[0].url;if(n){var o=i(Object(r.getFullIDsFromURL)(n),3),c=o[0],u=o[1],s=o[2];u&&a({comment:u},e,n),c&&a({post:c},e,n),s&&a({user:s},e,n)}})});var e=$("#user");e.focus(),e.bind("enterKey",function(){d()}),e.keyup(function(e){13==e.keyCode&&$(this).trigger("enterKey")}),$("#rr-go").click(function(){d()})}u();var s=function(e){window.open(e.target.href),window.close()};function a(e,t,n){var r=e.post,i=e.comment,s=e.user,a="",d="",f=void 0,l=void 0;if(i)a=i,d="comment";else if(r)a=r,d="post";else{if(!s)return;a=s,d="user"}i||r?(f=o.subscribeId,l=o.unsubscribeId):(f=o.subscribeUser,l=o.unsubscribeUser);var h="toggle-".concat(d),g="text-label-".concat(d);$("#switches").append('\n        <span class="text-label" id="'.concat(g,'"><span class="un">un</span>subscribed ').concat(d,'</span>\n        <div class="switch">\n            <input id="').concat(h,'" class="cmn-toggle cmn-toggle-round-flat" type="checkbox">\n            <label for="').concat(h,'"></label>\n        </div>\n        <div style="clear:both"></div>\n    '));var p=$("#".concat(g)),b=$("#".concat(h));function m(){b.prop("checked")?(p.addClass("set"),p.find(".un").css("visibility","hidden")):(p.removeClass("set"),p.find(".un").css("visibility",""))}b.change(function(e){var t=f;b.prop("checked")||(t=l),t(a,function(){chrome.runtime.sendMessage({action:"update-badge"}),m(),t===f&&(i||r)?Object(c.b)(a,n,function(){u()}):u()})}),(r||i)&&a in t.other_subscriptions&&(b.prop("checked",!0),m()),s&&s in t.user_subscriptions&&(b.prop("checked",!0),m()),p.click(function(e){b.prop("checked",!b.prop("checked")).change()})}function d(){var e=$("#user").val().trim();e&&chrome.tabs.create({url:"https://www.reveddit.com/user/".concat(e)})}function f(e,t,n,r){var c=$('<div><span class="unseen">'.concat(n," </span> </div>")),i=$('<a class="blue-link" target="_blank" href="'.concat(r,'">').concat(e,"</a>"));i.click(function(n){n.preventDefault(),chrome.storage.sync.get(null,function(r){Object(o.markThingAsSeen)(r,e,t),Object(o.setStorageUpdateBadge)(r).then(function(e){chrome.tabs.create({url:n.target.href}),window.close()})})}),i.appendTo(c),c.appendTo("#popup")}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NyYy9zdG9yYWdlLmpzIiwid2VicGFjazovLy8uL3NyYy9zcmMvY29tbW9uLmpzIiwid2VicGFjazovLy8uL3NyYy9zcmMvcmVxdWVzdHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NyYy9tb25pdG9yaW5nLmpzIiwid2VicGFjazovLy8uL3NyYy9zcmMvcG9wdXAuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJJTlRFUlZBTF9ERUZBVUxUIiwiTUFYX1NZTkNfU1RPUkFHRV9JVEVNU19QRVJfT0JKRUNUIiwiTUFYX1NZTkNfU1RPUkFHRV9DSEFOR0VTIiwiTUFYX09USEVSX1NVQlNDUklQVElPTlMiLCJSRU1PVkVEIiwiQVBQUk9WRUQiLCJMT0NLRUQiLCJVTkxPQ0tFRCIsIkVESVRFRCIsIkRFTEVURUQiLCJ0cmFja1R5cGVzIiwiY2hhbmdlcyIsInJlbW92ZWQiLCJhcHByb3ZlZCIsImxvY2tlZCIsInVubG9ja2VkIiwiZ2V0T2JqZWN0TmFtZSIsInR5cGUiLCJ0aGluZyIsImlzVXNlciIsImFkZFRyYWNrVHlwZXMiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJrZXlzIiwiZm9yRWFjaCIsImdldE9iamVjdE5hbWVzRm9yVGhpbmciLCJuYW1lcyIsImdldFVzZXJJbml0IiwidXNlciIsInJlc3VsdCIsIm1hcmtFdmVyeXRoaW5nQXNTZWVuIiwiYnJvd3NlciIsInN0b3JhZ2UiLCJzeW5jIiwidGhlbiIsInVzZXJfc3Vic2NyaXB0aW9ucyIsIm1hcmtUaGluZ0FzU2VlbiIsInNldFN0b3JhZ2VVcGRhdGVCYWRnZSIsImZ1bGxLZXluYW1lcyIsInZhbHVlcyIsImZ1bGxLZXluYW1lIiwicHVzaCIsIml0ZW0iLCJ1Iiwic2V0IiwicmVzIiwicnVudGltZSIsInNlbmRNZXNzYWdlIiwiYWN0aW9uIiwibWFya1NlZW5Gb3JTdG9yYWdlS2V5Iiwic3RvcmFnZV9rZXlzIiwiaWRzIiwiaXNfdXNlciIsInN0b3JhZ2VfaXRlbSIsImlkIiwiSXRlbUZvclN0b3JhZ2UiLCJtYXJrSURzQXNTZWVuSWZTdWJzY3JpYmVkIiwicmVtb3ZlZF9pZHMiLCJhcHByb3ZlZF9pZHMiLCJsb2NrZWRfaWRzIiwidW5sb2NrZWRfaWRzIiwiY2FsbGJhY2siLCJ1c2VyX3N1YnNjcmliZWQiLCJjaHJvbWUiLCJzdWJzY3JpYmVJZCIsIk1hdGgiLCJmbG9vciIsIkRhdGUiLCJnZXRUaW1lIiwiaXRlbXNUb1NhdmUiLCJ0cmltRGljdF9ieV9udW1iZXJWYWx1ZWRBdHRyaWJ1dGUiLCJfZGVmaW5lUHJvcGVydHkiLCJ1bnN1YnNjcmliZUlkIiwibWFpbktleSIsIm90aGVyS2V5cyIsImNvbmNhdCIsImdldFN1YnNjcmliZWRJZHMiLCJzdWJzY3JpYmVVc2VyIiwiY2FsbGJhY2tTdWNjZXNzIiwiY2FsbGJhY2tFcnJvciIsInVzZXJJbml0IiwiX29iamVjdFNwcmVhZCIsInVuc3Vic2NyaWJlVXNlciIsInVzZXJLZXlzIiwicmVtb3ZlIiwidXNlcktleV9sb2NhbFN0b3JhZ2UiLCJsb2NhbCIsImluaXRTdG9yYWdlIiwib3RoZXJfc3Vic2NyaXB0aW9ucyIsIm9wdGlvbnMiLCJpbnRlcnZhbCIsImN1c3RvbV9jbGllbnRpZCIsInJlbW92YWxfc3RhdHVzIiwidHJhY2siLCJub3RpZnkiLCJsb2NrX3N0YXR1cyIsImdldFN1YnNjcmliZWRVc2Vyc193aXRoU2VlbkFuZFVuc2VlbklEcyIsInVzZXJzIiwidXNlcnNfd2l0aElEcyIsImdldElEc190aGluZyIsImdldFN1YnNjcmliZWRVc2Vyc193aXRoVW5zZWVuSURzIiwiZ2V0VW5zZWVuSURzX3RoaW5nIiwidHJhY2tfcmVtb3ZhbCIsInRyYWNrX2xvY2siLCJ1bnNlZW5JRHMiLCJzZWVuSURzIiwidHlwZXMiLCJ1bnNlZW4iLCJzZWVuIiwiZ2V0TG9jYWxTdG9yYWdlSXRlbXMiLCJrZXlfbG9jYWxTdG9yYWdlIiwibG9jYWxTdG9yYWdlSXRlbXMiLCJzYXZlTG9jYWxTdG9yYWdlSXRlbXMiLCJhZGRMb2NhbFN0b3JhZ2VJdGVtcyIsIml0ZW1zIiwic3RvcmVkSXRlbXMiLCJ0cmltRGljdE9mSXRlbXNfYnlfdXRjQXR0cmlidXRlIiwiZ2V0SXRlbUZyb21Mb2NhbFN0b3JhZ2UiLCJsb2NhbFN0b3JhZ2UiLCJMb2NhbFN0b3JhZ2VJdGVtIiwiZ2V0QWxsQ2hhbmdlcyIsImtleVRvVXNlcl9sb29rdXAiLCJjaGFuZ2VzX290aGVyIiwicmVzMiIsImNoYW5nZXNCeVVzZXIiLCJnZXRPcHRpb25zIiwib3RoZXJzIiwiY29uc29sZSIsImxvZyIsInNhdmVPcHRpb25zIiwicmVtb3ZlZF90cmFjayIsInJlbW92ZWRfbm90aWZ5IiwibG9ja2VkX3RyYWNrIiwibG9ja2VkX25vdGlmeSIsIkFMQVJNX05BTUUiLCJjcmVhdGVUYWIiLCJ1cmwiLCJ0YWJzIiwidGFiIiwid2luZG93cyIsInVwZGF0ZSIsIndpbmRvd0lkIiwiZm9jdXNlZCIsIndpbiIsImdldEZ1bGxJRHNGcm9tVVJMIiwicGF0aCIsInJlcGxhY2UiLCJnZXRGdWxsSURzRnJvbVBhdGgiLCJyZWdleF9wYyIsInJlZ2V4X3VzZXIiLCJwb3N0SUQiLCJjb21tZW50SUQiLCJzdWJyZWRkaXQiLCJtYXRjaGVzX3BjIiwibWF0Y2giLCJtYXRjaGVzX3VzZXIiLCJyZWZvcm1hdFJlZGRpdFRleHQiLCJib2R5Iiwic3Vic3RyIiwiaXNSZW1vdmVkSXRlbSIsImlzQ29tbWVudCIsImlzUmVtb3ZlZENvbW1lbnQiLCJpc1JlbW92ZWRQb3N0IiwiYXV0aG9yIiwiaXNVc2VyRGVsZXRlZENvbW1lbnQiLCJpc1VzZXJEZWxldGVkUG9zdCIsImlzX3JvYm90X2luZGV4YWJsZSIsImlzVXNlckRlbGV0ZWRJdGVtIiwiZGljdCIsIm1heE51bUl0ZW1zIiwibnVtYmVyVmFsdWVkQXR0cmlidXRlIiwic2hvcnRlbmVkQXJyYXkiLCJzb3J0RGljdF9ieV9udW1iZXJWYWx1ZWRBdHRyaWJ1dGUiLCJzbGljZSIsIm5ld0RpY3QiLCJhcnJheSIsIm1hcCIsInNvcnQiLCJhIiwiYiIsImNyZWF0ZWRfdXRjIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl9jcmVhdGVDbGFzcyIsIkNoYW5nZUZvclN0b3JhZ2UiLCJfcmVmIiwiX3JlZiRpZCIsIl9yZWYkb2JzZXJ2ZWRfdXRjIiwib2JzZXJ2ZWRfdXRjIiwiX3JlZiRjaGFuZ2VfdHlwZSIsImNoYW5nZV90eXBlIiwiX3JlZiRvYmplY3QiLCJnIiwiX3JlZjIiLCJfcmVmMiRpdGVtIiwiX3JlZjIkb2JzZXJ2ZWRfdXRjIiwiX3JlZjIkb2JqZWN0IiwidGV4dCIsInRpdGxlIiwic2V0QWxhcm0iLCJwZXJpb2RJbk1pbnV0ZXMiLCJhbGFybXMiLCJjbGVhciIsImRlbGF5SW5NaW51dGVzIiwiYWxwaGFMb3dlclNvcnQiLCJ0ZXh0QSIsInRvTG93ZXJDYXNlIiwidGV4dEIiLCJnb1RvT3B0aW9ucyIsIm9wZW5PcHRpb25zUGFnZSIsIndpbmRvdyIsImNsb3NlIiwib3BlbiIsImdldFVSTCIsInNob3dFcnJvciIsIm1lc3NhZ2UiLCJzZWxlY3RvciIsIiQiLCJhcHBlbmRUbyIsImRlbGF5IiwiZmFkZVRvIiwicHByaW50Iiwib2JqIiwiSlNPTiIsInN0cmluZ2lmeSIsImdldFByZXR0eVRpbWVMZW5ndGgiLCJzZWNvbmRzIiwidGhyZXNob2xkcyIsInRpbWUiLCJkaXZpc29yIiwidGV4dFBsdXJhbCIsImV4dHJhIiwicHJldlVuaXRUaW1lIiwicm91bmQiLCJyZW1haW5UZXh0IiwiU3RyaW5nIiwiZ2V0UHJldHR5RGF0ZSIsImNyZWF0ZWRVVEMiLCJjcmVhdGVOb3RpZmljYXRpb24iLCJfcmVmMyIsIm5vdGlmaWNhdGlvbklkIiwibG9jYXRpb24iLCJwcm90b2NvbCIsIm5vdGlmaWNhdGlvbnMiLCJpY29uVXJsIiwidXBkYXRlQmFkZ2VVbnNlZW5Db3VudCIsInVzZXJzVW5zZWVuSURzIiwidG90YWwiLCJ0b1N0cmluZyIsImJyb3dzZXJBY3Rpb24iLCJzZXRCYWRnZUJhY2tncm91bmRDb2xvciIsImNvbG9yIiwic2V0QmFkZ2VUZXh0IiwibG9va3VwSXRlbXNCeUlEIiwiYXV0aCIsIl93aW5kb3ciLCJwYXJhbXMiLCJyYXdfanNvbiIsInNlYXJjaCIsImsiLCJqb2luIiwiZmV0Y2giLCJhcHBseSIsIl90b0NvbnN1bWFibGVBcnJheSIsImdldEZldGNoUGFyYW1zIiwiaGFuZGxlRmV0Y2hFcnJvcnMiLCJnZXRSZWRkaXREYXRhIiwibG9va3VwSXRlbXNCeVVzZXIiLCJhZnRlciIsInRpbWVTcGFuIiwiX3dpbmRvdzIiLCJsaW1pdCIsInJlc3BvbnNlIiwib2siLCJFcnJvciIsInN0YXR1c1RleHQiLCJqc29uIiwiZGF0YSIsImNoaWxkcmVuIiwiZ2V0UmVkZGl0VG9rZW4iLCJhY2Nlc3NfdG9rZW4iLCJnZXRBdXRoIiwidXNlX3RoaXNfY2xpZW50SUQiLCJ0b2tlbkluaXQiLCJoZWFkZXJzIiwiQXV0aG9yaXphdGlvbiIsImJ0b2EiLCJDb250ZW50LVR5cGUiLCJtZXRob2QiLCJlbmNvZGVVUklDb21wb25lbnQiLCJ0b2tlbiIsImdldExvY2FsQXV0aCIsImdldENvb2tpZSIsImNvb2tpZSIsImludmFsaWRDaGFyIiwiUmVnRXhwIiwiYmFzZTY0Q29va2llIiwidG9rZW5EYXRhIiwiYXRvYiIsInRva2VucyIsInBhcnNlIiwiYWNjZXNzVG9rZW4iLCJjb29raWVzIiwiZ2V0TG9jYWxPckFwcEF1dGgiLCJnZXRMb2dnZWRpblVzZXIiLCJnZXRSZWRkaXRVc2VybmFtZSIsIlNVQlNDUklCRURfRlJPTV9SRURESVQiLCJTVUJTQ1JJQkVEX0ZST01fUkVWRURESVQiLCJTVUJTQ1JJQkVEX0ZST01fTkEiLCJzZXRDdXJyZW50U3RhdGVGb3JJZCIsInN1YnNjcmliZWRGcm9tVVJMIiwic3Vic2NyaWJlZEZyb20iLCJjaGVja0ZvckNoYW5nZXNfdGhpbmdfYnlJZCIsImNoZWNrRm9yQ2hhbmdlcyIsIm90aGVyIiwiY2hlY2tGb3JDaGFuZ2VzX290aGVyIiwiY2hlY2tGb3JDaGFuZ2VzX3VzZXJzIiwiaXRlbUxvb2t1cCIsImtub3duX3JlbW92ZWQiLCJrbm93bl9hcHByb3ZlZCIsImtub3duX2xvY2tlZCIsImtub3duX3VubG9ja2VkIiwiaXRlbVdyYXAiLCJuZXdMb2NhbFN0b3JhZ2VJdGVtcyIsImNoYW5nZVR5cGVzIiwibnVtX2NoYW5nZXMiLCJleGlzdGluZ0xvY2FsU3RvcmFnZUl0ZW1zIiwiX2Nocm9tZSRzdG9yYWdlJHN5bmMkIiwibWFya0NoYW5nZXMiLCJhbGVydF9jdXJyZW50X2xpc3QiLCJhbGVydF90eXBlIiwiYWxlcnRfdGV4dCIsImFsZXJ0X2tub3duX2hhc2giLCJub3JtYWxfY3VycmVudF9saXN0Iiwibm9ybWFsX3R5cGUiLCJub3JtYWxfdGV4dCIsIm5vcm1hbF9rbm93bl9oYXNoIiwiYWxlcnRfdW5zZWVuX2lkcyIsIm5vcm1hbF91bnNlZW5faWRzIiwiYWxlcnRfdXNlckRlbGV0ZWRfdW5zZWVuX2lkcyIsIm5vdyIsIm1hcmtVbnNlZW4iLCJhbGVydF90eXBlX3ZhciIsInBvcHVsYXRlUG9wdXAiLCJlbXB0eSIsImNsaWNrIiwiYWRkVW5zZWVuTGluayIsImRpc3BsYXlVc2VySW5Qb3B1cCIsImRpc3BsYXlPdGhlckluUG9wdXAiLCJvcGVuQW5kQ2xvc2UiLCJ3cmFwIiwicGFyZW50Iiwic3luY1N0b3JhZ2UiLCJxdWVyeSIsImFjdGl2ZSIsImN1cnJlbnRXaW5kb3ciLCJfZ2V0RnVsbElEc0Zyb21VUkwyIiwiX3NsaWNlZFRvQXJyYXkiLCJzaG93VG9nZ2xlU3Vic2NyaWJlIiwiY29tbWVudCIsInBvc3QiLCIkaW5wdXQiLCJmb2N1cyIsImdvVXNlciIsImtleXVwIiwiZSIsImtleUNvZGUiLCJ0cmlnZ2VyIiwiZXYiLCJ0YXJnZXQiLCJocmVmIiwic3ViRm4iLCJ1bnN1YkZuIiwiaW5wdXRJZCIsInRleHRMYWJlbElkIiwiYXBwZW5kIiwiJHRleHRMYWJlbCIsInRvZ2dsZUxhYmVsVGV4dEFuZENvbG9yIiwicHJvcCIsImFkZENsYXNzIiwiZmluZCIsImNzcyIsInJlbW92ZUNsYXNzIiwiY2hhbmdlIiwiZm4iLCJ2YWwiLCJ0cmltIiwidW5zZWVuX3N0ciIsIiRkaXYiLCIkYSIsInByZXZlbnREZWZhdWx0Il0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFP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TyxJQUFPYixJQUFVWixHQUFXQyxHQUs1Qm5ELFlBQXFCL1AsRUFBSWtGLEVBQUssV0FDMUIrTSxNQUdKQSxTQUlQaUIsR0FBUUQsSUFBWWpULEtBQU10QixFQUFRd0Qsc0JBQ25DaVIsRUFBT2lCLEtBQUssV0FBVyxHQUN2QkQsS0FFQTdWLEdBQVFBLEtBQVFJLEVBQVFHLHFCQUN4QnNVLEVBQU9pQixLQUFLLFdBQVcsR0FDdkJELEtBRUpELEVBQVcvQixNQUFNLFNBQUNvQixHQUNkSixFQUFPaUIsS0FBSyxXQUFZakIsRUFBT2lCLEtBQUssWUFBWUssV0FJeEQsU0FBU3BCLElBQ0wsSUFBSS9VLEVBQU82TCxFQUFFLFNBQVN3SyxNQUFNQyxPQUN4QnRXLEdBQ0FtQyxPQUFPMEUsS0FBS3BKLE9BQU8sQ0FBQ21KLElBQUssaUNBQUY3RCxPQUFtQy9DLEtBc0JsRSxTQUFTOFQsRUFBY3pVLEVBQU9DLEVBQVFpWCxFQUFZM1AsR0FDOUMsSUFBTTRQLEVBQU8zSyxFQUFFLDZCQUFEOUksT0FBOEJ3VCxFQUE5QixvQkFDUkUsRUFBSzVLLEVBQUUsOENBQUQ5SSxPQUErQzZELEVBQS9DLE1BQUE3RCxPQUF1RDFELEVBQXZELFNBQ1pvWCxFQUFHNUMsTUFBTSxTQUFDb0IsR0FDTkEsRUFBRXlCLGlCQUNGdlUsT0FBTy9CLFFBQVFDLEtBQUtyRCxJQUFJLEtBQU0sU0FBQ29ELEdBQzNCSSwwQkFBZ0JKLEVBQVNmLEVBQU9DLEdBQ2hDbUIsZ0NBQXNCTCxHQUNyQkUsS0FBSyxTQUFBVyxHQUNGa0IsT0FBTzBFLEtBQUtwSixPQUFPLENBQUNtSixJQUFLcU8sRUFBRUksT0FBT0MsT0FDbENoSyxPQUFPQyxjQUluQmtMLEVBQUczSyxTQUFTMEssR0FDWkEsRUFBSzFLLFNBQVMiLCJmaWxlIjoicG9wdXAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMTEpO1xuIiwiaW1wb3J0IHthbHBoYUxvd2VyU29ydCwgSXRlbUZvclN0b3JhZ2UsIExvY2FsU3RvcmFnZUl0ZW0sIHRyaW1EaWN0X2J5X251bWJlclZhbHVlZEF0dHJpYnV0ZX0gZnJvbSAnLi9jb21tb24uanMnXG5cbmV4cG9ydCBjb25zdCBJTlRFUlZBTF9ERUZBVUxUID0gMTtcblxuLy8gVGhlc2UgbGltaXRzIGFyZSBzZXQgd2l0aCBjb25zaWRlcmF0aW9uIGZvciBDaHJvbWUncyBzeW5jICYgbG9jYWwgc3RvcmFnZSBsaW1pdHMsXG4vLyBhbmQgZm9yIHRoZSBvYmplY3RzIHN0b3JlZCBieSB0aGUgZXh0ZW5zaW9uXG5jb25zdCBNQVhfU1VCU0NSSVBUSU9OUyA9IDU7XG5jb25zdCBNQVhfTE9DQUxfU1RPUkFHRV9JVEVNU19QRVJfT0JKRUNUID0gNTAwXG5leHBvcnQgY29uc3QgTUFYX1NZTkNfU1RPUkFHRV9JVEVNU19QRVJfT0JKRUNUID0gMTMwXG5leHBvcnQgY29uc3QgTUFYX1NZTkNfU1RPUkFHRV9DSEFOR0VTID0gMTAwXG5leHBvcnQgY29uc3QgTUFYX09USEVSX1NVQlNDUklQVElPTlMgPSAxMDBcblxuZXhwb3J0IGNvbnN0IFJFTU9WRUQgPSAxXG5leHBvcnQgY29uc3QgQVBQUk9WRUQgPSAyXG5leHBvcnQgY29uc3QgTE9DS0VEID0gM1xuZXhwb3J0IGNvbnN0IFVOTE9DS0VEID0gNFxuZXhwb3J0IGNvbnN0IEVESVRFRCA9IDVcbmV4cG9ydCBjb25zdCBERUxFVEVEID0gNlxuXG5jb25zdCB0cmFja1R5cGVzID0geydjaGFuZ2VzJzogW10sICdyZW1vdmVkJzoge30sICdhcHByb3ZlZCc6IHt9LCAnbG9ja2VkJzoge30sICd1bmxvY2tlZCc6IHt9fTtcblxuY29uc3QgZ2V0T2JqZWN0TmFtZSA9ICh0eXBlLCB0aGluZywgaXNVc2VyKSA9PiB7XG4gICAgaWYgKGlzVXNlcikge1xuICAgICAgICByZXR1cm4gdHlwZSsnX3VfJyt0aGluZ1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0eXBlKydfJyt0aGluZ1xuICAgIH1cbn1cblxuY29uc3QgYWRkVHJhY2tUeXBlcyA9IChvYmplY3QsIHRoaW5nLCBpc1VzZXI9dHJ1ZSkgPT4ge1xuICAgIE9iamVjdC5rZXlzKHRyYWNrVHlwZXMpLmZvckVhY2godHlwZSA9PiB7XG4gICAgICAgIG9iamVjdFtnZXRPYmplY3ROYW1lKHR5cGUsIHRoaW5nLCBpc1VzZXIpXSA9IHRyYWNrVHlwZXNbdHlwZV1cbiAgICB9KVxufVxuXG5leHBvcnQgY29uc3QgZ2V0T2JqZWN0TmFtZXNGb3JUaGluZyA9ICh0aGluZywgaXNVc2VyPXRydWUpID0+IHtcbiAgICBjb25zdCBuYW1lcyA9IHt9XG4gICAgT2JqZWN0LmtleXModHJhY2tUeXBlcykuZm9yRWFjaCh0eXBlID0+IHtcbiAgICAgICAgbmFtZXNbdHlwZV0gPSBnZXRPYmplY3ROYW1lKHR5cGUsIHRoaW5nLCBpc1VzZXIpXG4gICAgfSlcbiAgICByZXR1cm4gbmFtZXNcbn1cblxuY29uc3QgZ2V0VXNlckluaXQgPSAodXNlcikgPT4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9XG4gICAgYWRkVHJhY2tUeXBlcyhyZXN1bHQsIHVzZXIsIHRydWUpXG4gICAgcmV0dXJuIHJlc3VsdFxufVxuXG5jb25zdCBnZXRTdG9yYWdlSW5pdCA9ICgpID0+IHtcbiAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgIHVzZXJfc3Vic2NyaXB0aW9uczoge30sXG4gICAgICAgIG90aGVyX3N1YnNjcmlwdGlvbnM6IHt9LFxuICAgICAgICBvcHRpb25zOiB7aW50ZXJ2YWw6IElOVEVSVkFMX0RFRkFVTFQsIGN1c3RvbV9jbGllbnRpZDogJycsIHJlbW92YWxfc3RhdHVzOiB7dHJhY2s6IHRydWUsIG5vdGlmeTogdHJ1ZX0sIGxvY2tfc3RhdHVzOiB7dHJhY2s6IHRydWUsIG5vdGlmeTogdHJ1ZX19XG4gICAgfVxuICAgIGFkZFRyYWNrVHlwZXMocmVzdWx0LCAnb3RoZXInLCBmYWxzZSlcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgY29uc3QgbWFya0V2ZXJ5dGhpbmdBc1NlZW4gPSAoKSA9PiB7XG4gICAgcmV0dXJuIGJyb3dzZXIuc3RvcmFnZS5zeW5jLmdldChudWxsKVxuICAgIC50aGVuKHN0b3JhZ2UgPT4ge1xuICAgICAgICBjb25zdCB1c2VycyA9IE9iamVjdC5rZXlzKHN0b3JhZ2UudXNlcl9zdWJzY3JpcHRpb25zKTtcbiAgICAgICAgY29uc3QgYWxsS2V5cyA9IFtdXG4gICAgICAgIHVzZXJzLmZvckVhY2godXNlciA9PiB7XG4gICAgICAgICAgICBtYXJrVGhpbmdBc1NlZW4oc3RvcmFnZSwgdXNlciwgdHJ1ZSlcbiAgICAgICAgfSlcbiAgICAgICAgbWFya1RoaW5nQXNTZWVuKHN0b3JhZ2UsICdvdGhlcicsIGZhbHNlKVxuICAgICAgICByZXR1cm4gc2V0U3RvcmFnZVVwZGF0ZUJhZGdlKHN0b3JhZ2UpXG4gICAgfSlcbn1cblxuZXhwb3J0IGNvbnN0IG1hcmtUaGluZ0FzU2VlbiA9IChzdG9yYWdlLCB0aGluZywgaXNVc2VyKSA9PiB7XG4gICAgY29uc3Qga2V5cyA9IGdldE9iamVjdE5hbWVzRm9yVGhpbmcodGhpbmcsIGlzVXNlcilcbiAgICBkZWxldGUga2V5c1snY2hhbmdlcyddXG4gICAgY29uc3QgZnVsbEtleW5hbWVzID0gW11cbiAgICBPYmplY3QudmFsdWVzKGtleXMpLmZvckVhY2goZnVsbEtleW5hbWUgPT4ge1xuICAgICAgICBmdWxsS2V5bmFtZXMucHVzaChmdWxsS2V5bmFtZSlcbiAgICB9KVxuICAgIGZ1bGxLZXluYW1lcy5mb3JFYWNoKGZ1bGxLZXluYW1lID0+IHtcbiAgICAgICAgT2JqZWN0LnZhbHVlcyhzdG9yYWdlW2Z1bGxLZXluYW1lXSkuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgIGl0ZW0udSA9IGZhbHNlXG4gICAgICAgIH0pXG4gICAgfSlcbn1cblxuZXhwb3J0IGNvbnN0IHNldFN0b3JhZ2VVcGRhdGVCYWRnZSA9IChzdG9yYWdlKSA9PiB7XG4gICAgcmV0dXJuIGJyb3dzZXIuc3RvcmFnZS5zeW5jLnNldChzdG9yYWdlKVxuICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgIHJldHVybiBicm93c2VyLnJ1bnRpbWUuc2VuZE1lc3NhZ2Uoe2FjdGlvbjogJ3VwZGF0ZS1iYWRnZSd9KVxuICAgIH0pXG59XG5cbmNvbnN0IG1hcmtTZWVuRm9yU3RvcmFnZUtleSA9IChzdG9yYWdlLCBzdG9yYWdlX2tleXMsIGtleSwgaWRzLCBpc191c2VyKSA9PiB7XG4gICAgY29uc3Qgc3RvcmFnZV9pdGVtID0gc3RvcmFnZVtzdG9yYWdlX2tleXNba2V5XV1cbiAgICBPYmplY3Qua2V5cyhpZHMpLmZvckVhY2goaWQgPT4ge1xuICAgICAgICBpZiAoaWQgaW4gc3RvcmFnZV9pdGVtKSB7XG4gICAgICAgICAgICBzdG9yYWdlX2l0ZW1baWRdLnUgPSBmYWxzZVxuICAgICAgICB9IGVsc2UgaWYgKGlzX3VzZXIpIHtcbiAgICAgICAgICAgIHN0b3JhZ2VfaXRlbVtpZF0gPSBuZXcgSXRlbUZvclN0b3JhZ2UoaWRzW2lkXSwgZmFsc2UpXG4gICAgICAgIH1cbiAgICB9KVxufVxuXG5leHBvcnQgY29uc3QgbWFya0lEc0FzU2VlbklmU3Vic2NyaWJlZCA9IChzdG9yYWdlLCB1c2VyLCBpc191c2VyLCByZW1vdmVkX2lkcywgYXBwcm92ZWRfaWRzLCBsb2NrZWRfaWRzLCB1bmxvY2tlZF9pZHMsIGNhbGxiYWNrID0gKCkgPT4ge30pID0+IHtcbiAgICBjb25zdCBzdG9yYWdlX2tleXMgPSBnZXRPYmplY3ROYW1lc0ZvclRoaW5nKHVzZXIsIGlzX3VzZXIpXG4gICAgZGVsZXRlIHN0b3JhZ2Vfa2V5c1snY2hhbmdlcyddXG4gICAgY29uc3QgdXNlcl9zdWJzY3JpYmVkID0gc3RvcmFnZS51c2VyX3N1YnNjcmlwdGlvbnNbdXNlcl1cbiAgICBpZiAodXNlcl9zdWJzY3JpYmVkIHx8ICEgaXNfdXNlcikge1xuICAgICAgICBtYXJrU2VlbkZvclN0b3JhZ2VLZXkoc3RvcmFnZSwgc3RvcmFnZV9rZXlzLCAncmVtb3ZlZCcsIHJlbW92ZWRfaWRzLCBpc191c2VyKVxuICAgICAgICBtYXJrU2VlbkZvclN0b3JhZ2VLZXkoc3RvcmFnZSwgc3RvcmFnZV9rZXlzLCAnYXBwcm92ZWQnLCBhcHByb3ZlZF9pZHMsIGlzX3VzZXIpXG4gICAgICAgIG1hcmtTZWVuRm9yU3RvcmFnZUtleShzdG9yYWdlLCBzdG9yYWdlX2tleXMsICdsb2NrZWQnLCBsb2NrZWRfaWRzLCBpc191c2VyKVxuICAgICAgICBtYXJrU2VlbkZvclN0b3JhZ2VLZXkoc3RvcmFnZSwgc3RvcmFnZV9rZXlzLCAndW5sb2NrZWQnLCB1bmxvY2tlZF9pZHMsIGlzX3VzZXIpXG4gICAgICAgIGNocm9tZS5zdG9yYWdlLnN5bmMuc2V0KHN0b3JhZ2UsIGNhbGxiYWNrKVxuICAgIH1cblxufVxuXG5leHBvcnQgY29uc3Qgc3Vic2NyaWJlSWQgPSAoaWQsIGNhbGxiYWNrID0gKCkgPT4ge30pID0+IHtcbiAgICBjb25zdCBrZXkgPSAnb3RoZXJfc3Vic2NyaXB0aW9ucydcbiAgICBjaHJvbWUuc3RvcmFnZS5zeW5jLmdldChrZXksIChyZXN1bHQpID0+IHtcbiAgICAgICAgcmVzdWx0W2tleV1baWRdID0ge3Q6IE1hdGguZmxvb3IobmV3IERhdGUoKS5nZXRUaW1lKCkvMTAwMCl9XG4gICAgICAgIGNvbnN0IGl0ZW1zVG9TYXZlID0gdHJpbURpY3RfYnlfbnVtYmVyVmFsdWVkQXR0cmlidXRlKHJlc3VsdFtrZXldLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNQVhfT1RIRVJfU1VCU0NSSVBUSU9OUyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3QnKVxuICAgICAgICBjaHJvbWUuc3RvcmFnZS5zeW5jLnNldCh7W2tleV06IGl0ZW1zVG9TYXZlfSwgY2FsbGJhY2spXG4gICAgfSlcbn1cbmV4cG9ydCBjb25zdCB1bnN1YnNjcmliZUlkID0gKGlkLCBjYWxsYmFjayA9ICgpID0+IHt9KSA9PiB7XG4gICAgY29uc3QgbWFpbktleSA9ICdvdGhlcl9zdWJzY3JpcHRpb25zJ1xuICAgIGNvbnN0IG90aGVyS2V5cyA9IGdldE9iamVjdE5hbWVzRm9yVGhpbmcoJ290aGVyJywgZmFsc2UpXG4gICAgZGVsZXRlIG90aGVyS2V5c1snY2hhbmdlcyddXG4gICAgY2hyb21lLnN0b3JhZ2Uuc3luYy5nZXQoT2JqZWN0LnZhbHVlcyhvdGhlcktleXMpLmNvbmNhdChtYWluS2V5KSwgKHJlc3VsdCkgPT4ge1xuICAgICAgICBkZWxldGUgcmVzdWx0W21haW5LZXldW2lkXVxuICAgICAgICBPYmplY3QudmFsdWVzKG90aGVyS2V5cykuZm9yRWFjaChmdWxsS2V5bmFtZSA9PiB7XG4gICAgICAgICAgICBpZiAoaWQgaW4gcmVzdWx0W2Z1bGxLZXluYW1lXSkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSByZXN1bHRbZnVsbEtleW5hbWVdW2lkXVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICBjaHJvbWUuc3RvcmFnZS5zeW5jLnNldChyZXN1bHQsICgpID0+IHtcbiAgICAgICAgICAgIGNocm9tZS5ydW50aW1lLnNlbmRNZXNzYWdlKHthY3Rpb246ICd1cGRhdGUtYmFkZ2UnfSwgY2FsbGJhY2spXG4gICAgICAgIH0pXG4gICAgfSlcbn1cbmV4cG9ydCBjb25zdCBnZXRTdWJzY3JpYmVkSWRzID0gKGNhbGxiYWNrID0gKCkgPT4ge30pID0+IHtcbiAgICBjb25zdCBrZXkgPSAnb3RoZXJfc3Vic2NyaXB0aW9ucydcbiAgICBjaHJvbWUuc3RvcmFnZS5zeW5jLmdldChrZXksIChyZXN1bHQpID0+IHtcbiAgICAgICAgY2FsbGJhY2soT2JqZWN0LmtleXMocmVzdWx0W2tleV0pKVxuICAgIH0pXG59XG5cbmV4cG9ydCBjb25zdCBzdWJzY3JpYmVVc2VyID0gKHVzZXIsIGNhbGxiYWNrU3VjY2VzcyA9ICgpID0+IHt9LCBjYWxsYmFja0Vycm9yID0gKCkgPT4ge30pID0+IHtcbiAgICBjb25zdCB1c2VySW5pdCA9IGdldFVzZXJJbml0KHVzZXIpXG4gICAgY2hyb21lLnN0b3JhZ2Uuc3luYy5nZXQoJ3VzZXJfc3Vic2NyaXB0aW9ucycsIChyZXN1bHQpID0+IHtcbiAgICAgICAgY29uc3QgdXNlcl9zdWJzY3JpcHRpb25zID0gcmVzdWx0LnVzZXJfc3Vic2NyaXB0aW9uc1xuICAgICAgICBpZiAoISAodXNlciBpbiB1c2VyX3N1YnNjcmlwdGlvbnMpKSB7XG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXModXNlcl9zdWJzY3JpcHRpb25zKS5sZW5ndGggPCBNQVhfU1VCU0NSSVBUSU9OUykge1xuICAgICAgICAgICAgICAgIHVzZXJfc3Vic2NyaXB0aW9uc1t1c2VyXSA9IHRydWVcbiAgICAgICAgICAgICAgICBjaHJvbWUuc3RvcmFnZS5zeW5jLnNldCh7dXNlcl9zdWJzY3JpcHRpb25zLCAuLi51c2VySW5pdH0sIGNhbGxiYWNrU3VjY2VzcylcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tFcnJvcignbWF4aW11bSBudW1iZXIgb2Ygc3Vic2NyaXB0aW9ucyByZWFjaGVkJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhbGxiYWNrRXJyb3IoJ2FscmVhZHkgc3Vic2NyaWJlZCB0byB0aGlzIHVzZXInKVxuICAgICAgICB9XG4gICAgfSlcbn1cblxuZXhwb3J0IGNvbnN0IHVuc3Vic2NyaWJlVXNlciA9ICh1c2VyLCBjYWxsYmFjaykgPT4ge1xuICAgIGNvbnN0IHVzZXJLZXlzID0gT2JqZWN0LmtleXMoZ2V0VXNlckluaXQodXNlcikpXG4gICAgY2hyb21lLnN0b3JhZ2Uuc3luYy5nZXQoJ3VzZXJfc3Vic2NyaXB0aW9ucycsIChyZXN1bHQpID0+IHtcbiAgICAgICAgY29uc3QgdXNlcl9zdWJzY3JpcHRpb25zID0gcmVzdWx0LnVzZXJfc3Vic2NyaXB0aW9uc1xuICAgICAgICBkZWxldGUgdXNlcl9zdWJzY3JpcHRpb25zW3VzZXJdXG4gICAgICAgIGNocm9tZS5zdG9yYWdlLnN5bmMuc2V0KHt1c2VyX3N1YnNjcmlwdGlvbnN9LCAoKSA9PiB7XG4gICAgICAgICAgICBjaHJvbWUuc3RvcmFnZS5zeW5jLnJlbW92ZSh1c2VyS2V5cywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJLZXlfbG9jYWxTdG9yYWdlID0gZ2V0T2JqZWN0TmFtZSgnaXRlbXMnLCB1c2VyLCB0cnVlKVxuICAgICAgICAgICAgICAgIGNocm9tZS5ydW50aW1lLnNlbmRNZXNzYWdlKHthY3Rpb246ICd1cGRhdGUtYmFkZ2UnfSlcbiAgICAgICAgICAgICAgICBjaHJvbWUuc3RvcmFnZS5sb2NhbC5yZW1vdmUodXNlcktleV9sb2NhbFN0b3JhZ2UsIGNhbGxiYWNrKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9KVxufVxuXG5leHBvcnQgY29uc3QgaW5pdFN0b3JhZ2UgPSAoY2FsbGJhY2spID0+IHtcbiAgICBjaHJvbWUuc3RvcmFnZS5zeW5jLmdldChudWxsLCAoc3RvcmFnZSkgPT4ge1xuICAgICAgICBpZiAoT2JqZWN0LmtleXMoc3RvcmFnZSkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBjaHJvbWUuc3RvcmFnZS5zeW5jLnNldChnZXRTdG9yYWdlSW5pdCgpLCBjYWxsYmFjaylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKClcbiAgICAgICAgfVxuICAgIH0pXG59XG5cbmV4cG9ydCBjb25zdCBnZXRTdWJzY3JpYmVkVXNlcnNfd2l0aFNlZW5BbmRVbnNlZW5JRHMgPSAoY2FsbGJhY2spID0+IHtcbiAgICBjaHJvbWUuc3RvcmFnZS5zeW5jLmdldChudWxsLCAoc3RvcmFnZSkgPT4ge1xuICAgICAgICBjb25zdCB1c2VycyA9IE9iamVjdC5rZXlzKHN0b3JhZ2UudXNlcl9zdWJzY3JpcHRpb25zKTtcbiAgICAgICAgY29uc3QgdXNlcnNfd2l0aElEcyA9IHt9XG4gICAgICAgIHVzZXJzLmZvckVhY2godXNlciA9PiB7XG4gICAgICAgICAgICB1c2Vyc193aXRoSURzW3VzZXJdID0gZ2V0SURzX3RoaW5nKHVzZXIsIHRydWUsIHN0b3JhZ2UpXG4gICAgICAgIH0pXG4gICAgICAgIHVzZXJzX3dpdGhJRHNbJ290aGVyJ10gPSBnZXRJRHNfdGhpbmcoJ290aGVyJywgZmFsc2UsIHN0b3JhZ2UpXG4gICAgICAgIGNhbGxiYWNrKHVzZXJzX3dpdGhJRHMsIHN0b3JhZ2UpXG4gICAgfSlcbn1cblxuZXhwb3J0IGNvbnN0IGdldFN1YnNjcmliZWRVc2Vyc193aXRoVW5zZWVuSURzID0gKGNhbGxiYWNrKSA9PiB7XG4gICAgY2hyb21lLnN0b3JhZ2Uuc3luYy5nZXQobnVsbCwgKHN0b3JhZ2UpID0+IHtcbiAgICAgICAgY29uc3QgdXNlcnMgPSBPYmplY3Qua2V5cyhzdG9yYWdlLnVzZXJfc3Vic2NyaXB0aW9ucyk7XG4gICAgICAgIGNvbnN0IHVzZXJzX3dpdGhJRHMgPSB7fVxuICAgICAgICB1c2Vycy5mb3JFYWNoKHVzZXIgPT4ge1xuICAgICAgICAgICAgdXNlcnNfd2l0aElEc1t1c2VyXSA9IGdldFVuc2VlbklEc190aGluZyh1c2VyLCB0cnVlLCBzdG9yYWdlKVxuICAgICAgICB9KVxuICAgICAgICB1c2Vyc193aXRoSURzWydvdGhlciddID0gZ2V0VW5zZWVuSURzX3RoaW5nKCdvdGhlcicsIGZhbHNlLCBzdG9yYWdlKVxuICAgICAgICBjYWxsYmFjayh1c2Vyc193aXRoSURzKVxuICAgIH0pXG59XG5cbmV4cG9ydCBjb25zdCBnZXRVbnNlZW5JRHNfdGhpbmcgPSAodGhpbmcsIGlzVXNlciwgc3RvcmFnZSkgPT4ge1xuICAgIHJldHVybiBnZXRJRHNfdGhpbmcodGhpbmcsIGlzVXNlciwgc3RvcmFnZSlbJ3Vuc2VlbiddXG59XG5cbi8vIEdldCBJRHMgb2YgaXRlbXMgd2hvc2Ugc3RhdHVzIGhhcyBjaGFuZ2VkXG5leHBvcnQgY29uc3QgZ2V0SURzX3RoaW5nID0gKHRoaW5nLCBpc1VzZXIsIHN0b3JhZ2UpID0+IHtcbiAgICBjb25zdCB0cmFja19yZW1vdmFsID0gc3RvcmFnZS5vcHRpb25zLnJlbW92YWxfc3RhdHVzLnRyYWNrXG4gICAgY29uc3QgdHJhY2tfbG9jayA9IHN0b3JhZ2Uub3B0aW9ucy5sb2NrX3N0YXR1cy50cmFja1xuICAgIGNvbnN0IHVuc2VlbklEcyA9IHt9XG4gICAgY29uc3Qgc2VlbklEcyA9IHt9XG4gICAgbGV0IHR5cGVzID0gW11cbiAgICBjb25zdCBrZXlzID0gZ2V0T2JqZWN0TmFtZXNGb3JUaGluZyh0aGluZywgaXNVc2VyKVxuICAgIGlmICh0cmFja19yZW1vdmFsKSB0eXBlcy5wdXNoKGtleXNbJ3JlbW92ZWQnXSwga2V5c1snYXBwcm92ZWQnXSlcbiAgICBpZiAodHJhY2tfbG9jaykgdHlwZXMucHVzaChrZXlzWydsb2NrZWQnXSwga2V5c1sndW5sb2NrZWQnXSlcblxuICAgIHR5cGVzLmZvckVhY2godHlwZSA9PiB7XG4gICAgICAgIE9iamVjdC5rZXlzKHN0b3JhZ2VbdHlwZV0pLmZvckVhY2goaWQgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IHN0b3JhZ2VbdHlwZV1baWRdXG4gICAgICAgICAgICBpZiAoaXRlbS51KSB1bnNlZW5JRHNbaWRdID0gdHJ1ZVxuICAgICAgICAgICAgZWxzZSBzZWVuSURzW2lkXSA9IHRydWVcbiAgICAgICAgfSlcbiAgICB9KVxuICAgIHJldHVybiB7dW5zZWVuOiBPYmplY3Qua2V5cyh1bnNlZW5JRHMpLCBzZWVuOiBPYmplY3Qua2V5cyhzZWVuSURzKX1cbn1cblxuZXhwb3J0IGNvbnN0IGdldExvY2FsU3RvcmFnZUl0ZW1zID0gKHRoaW5nLCBpc1VzZXIpID0+IHtcbiAgICBjb25zdCBrZXlfbG9jYWxTdG9yYWdlID0gZ2V0T2JqZWN0TmFtZSgnaXRlbXMnLCB0aGluZywgaXNVc2VyKVxuICAgIHJldHVybiBicm93c2VyLnN0b3JhZ2UubG9jYWwuZ2V0KHtba2V5X2xvY2FsU3RvcmFnZV06IHt9fSlcbiAgICAudGhlbihsb2NhbFN0b3JhZ2VJdGVtcyA9PiB7XG4gICAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2VJdGVtc1trZXlfbG9jYWxTdG9yYWdlXVxuICAgIH0pXG59XG5cbmV4cG9ydCBjb25zdCBzYXZlTG9jYWxTdG9yYWdlSXRlbXMgPSAodGhpbmcsIGlzVXNlciwgaXRlbXNUb1NhdmUpID0+IHtcbiAgICBjb25zdCBrZXlfbG9jYWxTdG9yYWdlID0gZ2V0T2JqZWN0TmFtZSgnaXRlbXMnLCB0aGluZywgaXNVc2VyKVxuICAgIHJldHVybiBicm93c2VyLnN0b3JhZ2UubG9jYWwuc2V0KHtba2V5X2xvY2FsU3RvcmFnZV06IGl0ZW1zVG9TYXZlfSlcbn1cblxuZXhwb3J0IGNvbnN0IGFkZExvY2FsU3RvcmFnZUl0ZW1zID0gKGl0ZW1zLCB0aGluZywgaXNVc2VyLCBjYWxsYmFjayA9ICgpID0+IHt9KSA9PiB7XG4gICAgY29uc3Qga2V5X2xvY2FsU3RvcmFnZSA9IGdldE9iamVjdE5hbWUoJ2l0ZW1zJywgdGhpbmcsIGlzVXNlcilcbiAgICBjaHJvbWUuc3RvcmFnZS5sb2NhbC5nZXQoe1trZXlfbG9jYWxTdG9yYWdlXToge319LCAobG9jYWxTdG9yYWdlSXRlbXMpID0+IHtcbiAgICAgICAgY29uc3Qgc3RvcmVkSXRlbXMgPSBsb2NhbFN0b3JhZ2VJdGVtc1trZXlfbG9jYWxTdG9yYWdlXVxuICAgICAgICBPYmplY3Qua2V5cyhpdGVtcykuZm9yRWFjaChpZCA9PiB7XG4gICAgICAgICAgICBzdG9yZWRJdGVtc1tpZF0gPSBpdGVtc1tpZF1cbiAgICAgICAgfSlcbiAgICAgICAgbGV0IGl0ZW1zVG9TYXZlID0gc3RvcmVkSXRlbXNcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHN0b3JlZEl0ZW1zKS5sZW5ndGggPiBNQVhfTE9DQUxfU1RPUkFHRV9JVEVNU19QRVJfT0JKRUNUKSB7XG4gICAgICAgICAgICBpdGVtc1RvU2F2ZSA9IHRyaW1EaWN0T2ZJdGVtc19ieV91dGNBdHRyaWJ1dGUoc3RvcmVkSXRlbXMsIE1BWF9MT0NBTF9TVE9SQUdFX0lURU1TX1BFUl9PQkpFQ1QsICdvJylcbiAgICAgICAgfVxuICAgICAgICBjaHJvbWUuc3RvcmFnZS5sb2NhbC5zZXQoe1trZXlfbG9jYWxTdG9yYWdlXTogaXRlbXNUb1NhdmV9LCBjYWxsYmFjaylcbiAgICB9KVxufVxuXG5leHBvcnQgY29uc3QgZ2V0SXRlbUZyb21Mb2NhbFN0b3JhZ2UgPSAodGhpbmcsIGlzVXNlciwgaWQsIGxvY2FsU3RvcmFnZSkgPT4ge1xuICAgIGNvbnN0IGtleSA9IGdldE9iamVjdE5hbWUoJ2l0ZW1zJywgdGhpbmcsIGlzVXNlcilcbiAgICBpZiAoa2V5IGluIGxvY2FsU3RvcmFnZSkge1xuICAgICAgICBpZiAoaWQgaW4gbG9jYWxTdG9yYWdlW2tleV0pIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTG9jYWxTdG9yYWdlSXRlbSh7b2JqZWN0OiBsb2NhbFN0b3JhZ2Vba2V5XVtpZF19KVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiAnJ1xufVxuXG5leHBvcnQgY29uc3QgZ2V0QWxsQ2hhbmdlcyA9IChjYWxsYmFjaykgPT4ge1xuICAgIGNocm9tZS5zdG9yYWdlLnN5bmMuZ2V0KCd1c2VyX3N1YnNjcmlwdGlvbnMnLCAocmVzdWx0KSA9PiB7XG4gICAgICAgIGNvbnN0IGtleXMgPSBbZ2V0T2JqZWN0TmFtZSgnY2hhbmdlcycsICdvdGhlcicsIGZhbHNlKV1cbiAgICAgICAgY29uc3Qga2V5VG9Vc2VyX2xvb2t1cCA9IHtjaGFuZ2VzX290aGVyOiAnb3RoZXInfVxuXG4gICAgICAgIE9iamVjdC5rZXlzKHJlc3VsdC51c2VyX3N1YnNjcmlwdGlvbnMpLmZvckVhY2godXNlciA9PiB7XG4gICAgICAgICAgICBjb25zdCBrZXkgPSBnZXRPYmplY3ROYW1lKCdjaGFuZ2VzJywgdXNlciwgdHJ1ZSlcbiAgICAgICAgICAgIGtleXMucHVzaChrZXkpXG4gICAgICAgICAgICBrZXlUb1VzZXJfbG9va3VwW2tleV0gPSB1c2VyXG4gICAgICAgIH0pXG4gICAgICAgIGNocm9tZS5zdG9yYWdlLnN5bmMuZ2V0KGtleXMsIChyZXMyKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjaGFuZ2VzQnlVc2VyID0ge31cbiAgICAgICAgICAgIGtleXMuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICgoa2V5IGluIHJlczIpICYmIHJlczJba2V5XS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlc0J5VXNlcltrZXlUb1VzZXJfbG9va3VwW2tleV1dID0gcmVzMltrZXldXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGNhbGxiYWNrKGNoYW5nZXNCeVVzZXIpXG4gICAgICAgIH0pXG4gICAgfSlcbn1cblxuZXhwb3J0IGNvbnN0IGdldE9wdGlvbnMgPSAoY2FsbGJhY2spID0+IHtcbiAgICByZXR1cm4gYnJvd3Nlci5zdG9yYWdlLnN5bmMuZ2V0KFsndXNlcl9zdWJzY3JpcHRpb25zJywgJ290aGVyX3N1YnNjcmlwdGlvbnMnLCAnb3B0aW9ucyddKVxuICAgIC50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgIGNvbnN0IHVzZXJzID0gT2JqZWN0LmtleXMocmVzdWx0LnVzZXJfc3Vic2NyaXB0aW9ucylcbiAgICAgICAgY29uc3Qgb3RoZXJzID0gT2JqZWN0LmtleXMocmVzdWx0Lm90aGVyX3N1YnNjcmlwdGlvbnMpXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSByZXN1bHQub3B0aW9uc1xuICAgICAgICByZXR1cm4gY2FsbGJhY2sodXNlcnMsIG90aGVycywgb3B0aW9ucylcbiAgICB9KVxuICAgIC5jYXRjaChjb25zb2xlLmxvZylcbn1cbmV4cG9ydCBjb25zdCBzYXZlT3B0aW9ucyA9IChpbnRlcnZhbCwgY3VzdG9tX2NsaWVudGlkLCByZW1vdmVkX3RyYWNrLCByZW1vdmVkX25vdGlmeSwgbG9ja2VkX3RyYWNrLCBsb2NrZWRfbm90aWZ5LCBjYWxsYmFjaykgPT4ge1xuICAgIGNocm9tZS5zdG9yYWdlLnN5bmMuc2V0KHtvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludGVydmFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXN0b21fY2xpZW50aWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92YWxfc3RhdHVzOiB7dHJhY2s6IHJlbW92ZWRfdHJhY2ssIG5vdGlmeTogcmVtb3ZlZF9ub3RpZnl9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NrX3N0YXR1czogICAge3RyYWNrOiBsb2NrZWRfdHJhY2ssICBub3RpZnk6IGxvY2tlZF9ub3RpZnl9fX0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2spXG59XG4iLCJpbXBvcnQge1JFTU9WRUQsIERFTEVURUQsIEFQUFJPVkVELCBMT0NLRUQsIFVOTE9DS0VELCBFRElURUQsXG4gICAgICAgIGdldFN1YnNjcmliZWRVc2Vyc193aXRoVW5zZWVuSURzIH0gZnJvbSAnLi9zdG9yYWdlLmpzJ1xuXG5leHBvcnQgY29uc3QgQUxBUk1fTkFNRSA9ICdub3RpZnltZSdcblxuXG5jb25zdCBtYXhSZWRkaXRDb250ZW50TGVuZ3RoID0gMzAwXG5cbi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzI1OTMzNTU2L2Nocm9tZS1leHRlbnNpb24tb3Blbi1uZXctdGFiLXdoZW4tYnJvd3Nlci1vcGVuZWQtaW4tYmFja2dyb3VuZC1tYWMvMjU5MzM5NjQjMjU5MzM5NjRcbmV4cG9ydCBjb25zdCBjcmVhdGVUYWIgPSAodXJsKSA9PiB7XG4gICAgY2hyb21lLnRhYnMuY3JlYXRlKHt1cmw6dXJsfSwgKHRhYikgPT4ge1xuICAgICAgICBpZighIHRhYikge1xuICAgICAgICAgICAgLy8gcHJvYmFibHkgbm8gd2luZG93IGF2YWlsYWJsZVxuICAgICAgICAgICAgY2hyb21lLndpbmRvd3MuY3JlYXRlKHt1cmw6dXJsfSwgKHdpbikgPT4ge1xuICAgICAgICAgICAgICAgIC8vIGJldHRlciB0byBmb2N1cyBhZnRlciB3aW5kb3cgY3JlYXRpb24gY2FsbGJhY2tcbiAgICAgICAgICAgICAgICBjaHJvbWUud2luZG93cy51cGRhdGUod2luLmlkLCB7Zm9jdXNlZDogdHJ1ZX0pXG4gICAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gYmV0dGVyIHRvIGZvY3VzIGFmdGVyIHRhYiBjcmVhdGlvbiBjYWxsYmFja1xuICAgICAgICAgICAgY2hyb21lLndpbmRvd3MudXBkYXRlKHRhYi53aW5kb3dJZCwge2ZvY3VzZWQ6IHRydWV9KVxuICAgICAgICB9XG4gICAgfSlcbn1cblxuZXhwb3J0IGNvbnN0IGdldEZ1bGxJRHNGcm9tVVJMID0gKHVybCkgPT4ge1xuICAgIGNvbnN0IHBhdGggPSB1cmwucmVwbGFjZSgvaHR0cHM6XFwvXFwvW14vXSpyZSh2ZSk/ZGRpdC5jb20vLCAnJylcbiAgICByZXR1cm4gZ2V0RnVsbElEc0Zyb21QYXRoKHBhdGgpXG59XG5cbmNvbnN0IHJlZ2V4X3BjID0gL15cXC8ocnx1c2VyKVxcLyhbXi9dKylcXC9jb21tZW50c1xcLyhbXi9dKylcXC9bXi9dKig/OlxcLyhbXi8/JiNdKykpPy9cbmNvbnN0IHJlZ2V4X3VzZXIgPSAvXlxcL3VzZXJcXC8oW14vPyYjXSspXFwvPy9cblxuZXhwb3J0IGNvbnN0IGdldEZ1bGxJRHNGcm9tUGF0aCA9IChwYXRoKSA9PiB7XG4gICAgbGV0IHBvc3RJRCA9IHVuZGVmaW5lZCwgY29tbWVudElEID0gdW5kZWZpbmVkLCB1c2VyID0gdW5kZWZpbmVkLCBzdWJyZWRkaXQgPSB1bmRlZmluZWRcbiAgICBjb25zdCBtYXRjaGVzX3BjID0gcGF0aC5tYXRjaChyZWdleF9wYylcbiAgICBjb25zdCBtYXRjaGVzX3VzZXIgPSBwYXRoLm1hdGNoKHJlZ2V4X3VzZXIpXG4gICAgaWYgKG1hdGNoZXNfcGMpIHtcbiAgICAgICAgY29uc3QgdHlwZSA9IG1hdGNoZXNfcGNbMV1cbiAgICAgICAgaWYgKHR5cGUgPT09ICd1c2VyJykge1xuICAgICAgICAgICAgdXNlciA9IG1hdGNoZXNfcGNbMl1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN1YnJlZGRpdCA9IG1hdGNoZXNfcGNbMl1cbiAgICAgICAgfVxuICAgICAgICBpZiAobWF0Y2hlc19wY1szXSkgcG9zdElEID0gJ3QzXycrbWF0Y2hlc19wY1szXVxuICAgICAgICBpZiAobWF0Y2hlc19wY1s0XSkgY29tbWVudElEID0gJ3QxXycrbWF0Y2hlc19wY1s0XVxuICAgIH0gZWxzZSBpZiAobWF0Y2hlc191c2VyKSB7XG4gICAgICAgIHVzZXIgPSBtYXRjaGVzX3VzZXJbMV1cbiAgICB9XG4gICAgcmV0dXJuIFtwb3N0SUQsIGNvbW1lbnRJRCwgdXNlciwgc3VicmVkZGl0XVxufVxuXG5leHBvcnQgY29uc3QgcmVmb3JtYXRSZWRkaXRUZXh0ID0gKGJvZHkpID0+IHtcbiAgICByZXR1cm4gYm9keS5yZXBsYWNlKC8mYW1wOy9nLCAnJicpLnJlcGxhY2UoLyZndDsvZywgJz4nKS5yZXBsYWNlKC8mbHQ7L2csICc8JylcbiAgICAgICAgLnJlcGxhY2UoL1xccysvZywgJyAnKS5zdWJzdHIoMCwgbWF4UmVkZGl0Q29udGVudExlbmd0aClcbn1cblxuZXhwb3J0IGNvbnN0IGlzUmVtb3ZlZEl0ZW0gPSAoaXRlbSkgPT4ge1xuICAgIGlmIChpc0NvbW1lbnQoaXRlbS5uYW1lKSkge1xuICAgICAgICByZXR1cm4gaXNSZW1vdmVkQ29tbWVudChpdGVtKVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBpc1JlbW92ZWRQb3N0KGl0ZW0pXG4gICAgfVxufVxuXG5leHBvcnQgY29uc3QgaXNDb21tZW50ID0gKG5hbWUpID0+IHtcbiAgICByZXR1cm4gbmFtZS5zdWJzdHIoMCwyKSA9PT0gJ3QxJ1xufVxuZXhwb3J0IGNvbnN0IGlzUmVtb3ZlZENvbW1lbnQgPSAoaXRlbSkgPT4ge1xuICAgIHJldHVybiAoKGl0ZW0uYm9keS5yZXBsYWNlKC9cXFxcL2csICcnKSA9PT0gJ1tyZW1vdmVkXScgfHxcbiAgICAgICAgICAgICBpdGVtLmJvZHkucmVwbGFjZSgvXFxcXC9nLCAnJykgPT09ICdbZGVsZXRlZF0nKSAmJlxuICAgICAgICAgICAgaXRlbS5hdXRob3IucmVwbGFjZSgvXFxcXC9nLCAnJykgPT09ICdbZGVsZXRlZF0nKVxufVxuZXhwb3J0IGNvbnN0IGlzVXNlckRlbGV0ZWRDb21tZW50ID0gKGl0ZW0pID0+IHtcbiAgICByZXR1cm4gKGl0ZW0uYm9keS5yZXBsYWNlKC9cXFxcL2csICcnKSA9PT0gJ1tkZWxldGVkXScgJiZcbiAgICAgICAgICAgIGl0ZW0uYXV0aG9yLnJlcGxhY2UoL1xcXFwvZywgJycpID09PSAnW2RlbGV0ZWRdJylcbn1cbmV4cG9ydCBjb25zdCBpc1VzZXJEZWxldGVkUG9zdCA9IChpdGVtKSA9PiB7XG4gICAgcmV0dXJuICghIGl0ZW0uaXNfcm9ib3RfaW5kZXhhYmxlKSAmJiBpdGVtLmF1dGhvci5yZXBsYWNlKC9cXFxcL2csICcnKSA9PT0gJ1tkZWxldGVkXSdcbn1cbmV4cG9ydCBjb25zdCBpc1VzZXJEZWxldGVkSXRlbSA9IChpdGVtKSA9PiB7XG4gICAgaWYgKGlzQ29tbWVudChpdGVtLm5hbWUpKSB7XG4gICAgICAgIHJldHVybiBpc1VzZXJEZWxldGVkQ29tbWVudChpdGVtKVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBpc1VzZXJEZWxldGVkUG9zdChpdGVtKVxuICAgIH1cbn1cbmV4cG9ydCBjb25zdCBpc1JlbW92ZWRQb3N0ID0gKGl0ZW0pID0+IHtcbiAgICByZXR1cm4gISBpdGVtLmlzX3JvYm90X2luZGV4YWJsZVxufVxuXG5leHBvcnQgY29uc3QgdHJpbURpY3RfYnlfbnVtYmVyVmFsdWVkQXR0cmlidXRlID0gKGRpY3QsIG1heE51bUl0ZW1zLCBudW1iZXJWYWx1ZWRBdHRyaWJ1dGUpID0+IHtcbiAgICBjb25zdCBhcnJheSA9IHNvcnREaWN0X2J5X251bWJlclZhbHVlZEF0dHJpYnV0ZShkaWN0LCBudW1iZXJWYWx1ZWRBdHRyaWJ1dGUpXG5cbiAgICBjb25zdCBzaG9ydGVuZWRBcnJheSA9IGFycmF5LnNsaWNlKDAsIG1heE51bUl0ZW1zKVxuICAgIGNvbnN0IG5ld0RpY3QgPSB7fVxuICAgIHNob3J0ZW5lZEFycmF5LmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgIG5ld0RpY3RbaXRlbVswXV0gPSBpdGVtWzFdXG4gICAgfSlcbiAgICByZXR1cm4gbmV3RGljdFxufVxuXG5leHBvcnQgY29uc3Qgc29ydERpY3RfYnlfbnVtYmVyVmFsdWVkQXR0cmlidXRlID0gKGRpY3QsIG51bWJlclZhbHVlZEF0dHJpYnV0ZSkgPT4ge1xuICAgIGxldCBhcnJheSA9IE9iamVjdC5rZXlzKGRpY3QpLm1hcChrZXkgPT4ge1xuICAgICAgICByZXR1cm4gW2tleSwgZGljdFtrZXldXVxuICAgIH0pXG4gICAgYXJyYXkuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICByZXR1cm4gYlsxXVtudW1iZXJWYWx1ZWRBdHRyaWJ1dGVdIC0gYVsxXVtudW1iZXJWYWx1ZWRBdHRyaWJ1dGVdXG4gICAgfSlcbiAgICByZXR1cm4gYXJyYXlcbn1cblxuZXhwb3J0IGNsYXNzIEl0ZW1Gb3JTdG9yYWdlIHtcbiAgICBjb25zdHJ1Y3RvcihjcmVhdGVkX3V0YywgdW5zZWVuKSB7XG4gICAgICAgIHRoaXMuYyA9IGNyZWF0ZWRfdXRjXG4gICAgICAgIHRoaXMudSA9IHVuc2VlblxuICAgIH1cbiAgICBnZXRDcmVhdGVkVVRDKCkgeyByZXR1cm4gdGhpcy5jIH1cbiAgICBnZXRVbnNlZW4oKSB7IHJldHVybiB0aGlzLnUgfVxufVxuXG5leHBvcnQgY2xhc3MgQ2hhbmdlRm9yU3RvcmFnZSB7XG4gICAgY29uc3RydWN0b3IoeyBpZCA9IG51bGwsIG9ic2VydmVkX3V0YyA9IG51bGwsIGNoYW5nZV90eXBlID0gbnVsbCwgb2JqZWN0ID0gbnVsbCB9KSB7XG4gICAgICAgIGlmIChvYmplY3QpIHtcbiAgICAgICAgICAgIHRoaXMuaSA9IG9iamVjdC5pXG4gICAgICAgICAgICB0aGlzLm8gPSBvYmplY3Qub1xuICAgICAgICAgICAgdGhpcy5nID0gb2JqZWN0LmdcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaSA9IGlkXG4gICAgICAgICAgICB0aGlzLm8gPSBvYnNlcnZlZF91dGNcbiAgICAgICAgICAgIHRoaXMuZyA9IGNoYW5nZV90eXBlXG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0SUQoKSB7IHJldHVybiB0aGlzLmkgfVxuICAgIGdldE9ic2VydmVkVVRDKCkgeyByZXR1cm4gdGhpcy5vIH1cbiAgICBnZXRDaGFuZ2VUeXBlKCkge1xuICAgICAgICBzd2l0Y2godGhpcy5nKSB7XG4gICAgICAgICAgICBjYXNlIFJFTU9WRUQ6IHJldHVybiAnbW9kIHJlbW92ZWQnXG4gICAgICAgICAgICBjYXNlIERFTEVURUQ6IHJldHVybiAndXNlciBkZWxldGVkJ1xuICAgICAgICAgICAgY2FzZSBBUFBST1ZFRDogcmV0dXJuICdhcHByb3ZlZCdcbiAgICAgICAgICAgIGNhc2UgTE9DS0VEOiByZXR1cm4gJ2xvY2tlZCdcbiAgICAgICAgICAgIGNhc2UgVU5MT0NLRUQ6IHJldHVybiAndW5sb2NrZWQnXG4gICAgICAgICAgICBjYXNlIEVESVRFRDogcmV0dXJuICdlZGl0ZWQnXG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBMb2NhbFN0b3JhZ2VJdGVtIHtcbiAgICBjb25zdHJ1Y3Rvcih7IGl0ZW0gPSBudWxsLCBvYnNlcnZlZF91dGMgPSBudWxsLCBvYmplY3QgPSBudWxsIH0pIHtcbiAgICAgICAgaWYgKG9iamVjdCkge1xuICAgICAgICAgICAgdGhpcy50ID0gb2JqZWN0LnRcbiAgICAgICAgICAgIHRoaXMubyA9IG9iamVjdC5vXG4gICAgICAgICAgICB0aGlzLmMgPSBvYmplY3QuY1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IHRleHQgPSAnJ1xuICAgICAgICAgICAgaWYgKGlzQ29tbWVudChpdGVtLm5hbWUpKSB7XG4gICAgICAgICAgICAgICAgdGV4dCA9IHJlZm9ybWF0UmVkZGl0VGV4dChpdGVtLmJvZHkpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRleHQgPSBpdGVtLnRpdGxlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnQgPSB0ZXh0XG4gICAgICAgICAgICB0aGlzLm8gPSBvYnNlcnZlZF91dGNcbiAgICAgICAgICAgIHRoaXMuYyA9IGl0ZW0uY3JlYXRlZF91dGNcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRUZXh0KHRleHQpIHt0aGlzLnQgPSByZWZvcm1hdFJlZGRpdFRleHQodGV4dCl9XG4gICAgZ2V0VGV4dCgpIHsgcmV0dXJuIHRoaXMudCB9XG4gICAgZ2V0T2JzZXJ2ZWRVVEMoKSB7IHJldHVybiB0aGlzLm8gfVxuICAgIGdldENyZWF0ZWRVVEMoKSB7IHJldHVybiB0aGlzLmMgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0QWxhcm0ocGVyaW9kSW5NaW51dGVzKSB7XG4gICAgY2hyb21lLmFsYXJtcy5jbGVhcihBTEFSTV9OQU1FKVxuICAgIGNocm9tZS5hbGFybXMuY3JlYXRlKEFMQVJNX05BTUUsIHtkZWxheUluTWludXRlczogMSwgcGVyaW9kSW5NaW51dGVzOiBwZXJpb2RJbk1pbnV0ZXN9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYWxwaGFMb3dlclNvcnQgKGEsIGIpIHtcbiAgICB2YXIgdGV4dEEgPSBhLnRvTG93ZXJDYXNlKClcbiAgICB2YXIgdGV4dEIgPSBiLnRvTG93ZXJDYXNlKClcblxuICAgIGlmICh0ZXh0QSA8IHRleHRCKSByZXR1cm4gLTFcbiAgICBpZiAodGV4dEEgPiB0ZXh0QikgcmV0dXJuIDFcbiAgICByZXR1cm4gMFxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ29Ub09wdGlvbnMgKCkge1xuICAgIGlmIChjaHJvbWUucnVudGltZS5vcGVuT3B0aW9uc1BhZ2UpIHtcbiAgICAgICAgY2hyb21lLnJ1bnRpbWUub3Blbk9wdGlvbnNQYWdlKClcbiAgICAgICAgd2luZG93LmNsb3NlKCkgLy9jbG9zZXMgdGhlIHBvcHVwIHdoaWNoIHBlcnNpc3RzIGluIEZGXG4gICAgfSBlbHNlIHtcbiAgICAgICAgd2luZG93Lm9wZW4oY2hyb21lLnJ1bnRpbWUuZ2V0VVJMKCcvc3JjL29wdGlvbnMuaHRtbCcpKVxuICAgIH1cbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gc2hvd0Vycm9yKG1lc3NhZ2UsIHNlbGVjdG9yKSB7XG4gICAgJCgnPGRpdiBjbGFzcz1cInJyLWVycm9yXCI+JyttZXNzYWdlKyc8L2Rpdj4nKS5hcHBlbmRUbyhzZWxlY3RvcikuZGVsYXkoMjQwMCkuZmFkZVRvKDQwMCwgMCwgZnVuY3Rpb24oKSB7JCh0aGlzKS5yZW1vdmUoKX0pXG59XG5cbi8vbm9pbnNwZWN0aW9uIEpTVW51c2VkTG9jYWxTeW1ib2xzXG5leHBvcnQgZnVuY3Rpb24gcHByaW50KG9iaikge1xuICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KG9iaiwgbnVsbCwgJ1xcdCcpKVxufVxuXG5cbmV4cG9ydCBjb25zdCBnZXRQcmV0dHlUaW1lTGVuZ3RoID0gKHNlY29uZHMpID0+IHtcbiAgICBjb25zdCB0aHJlc2hvbGRzID0gW1s2MCwgJ3NlY29uZCcsICdzZWNvbmRzJ10sIFs2MCwgJ21pbnV0ZScsICdtaW51dGVzJ10sIFsyNCwgJ2hvdXInLCAnaG91cnMnXSwgWzcsICdkYXknLCAnZGF5cyddLFxuICAgIFszNjUvMTIvNywgJ3dlZWsnLCAnd2Vla3MnXSwgWzEyLCAnbW9udGgnLCAnbW9udGhzJ10sIFsxMCwgJ3llYXInLCAneWVhcnMnXSxcbiAgICBbMTAsICdkZWNhZGUnLCAnZGVjYWRlcyddLCBbMTAsICdjZW50dXJ5JywgJ2NlbnR1cmllcyddLCBbMTAsICdtaWxsZW5pdW0nLCAnbWlsbGVuaWEnXV1cbiAgICBpZiAoc2Vjb25kcyA8IDYwKSByZXR1cm4gc2Vjb25kcyArICcgc2Vjb25kcydcbiAgICBsZXQgdGltZSA9IHNlY29uZHNcbiAgICBmb3IgKHZhciBpPTA7IGk8dGhyZXNob2xkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgZGl2aXNvciA9IHRocmVzaG9sZHNbaV1bMF1cbiAgICAgICAgbGV0IHRleHQgPSB0aHJlc2hvbGRzW2ldWzFdXG4gICAgICAgIGxldCB0ZXh0UGx1cmFsID0gdGhyZXNob2xkc1tpXVsyXVxuICAgICAgICBpZiAodGltZSA8IGRpdmlzb3IpIHtcbiAgICAgICAgICAgIGxldCBleHRyYSA9ICh0aW1lIC0gTWF0aC5mbG9vcih0aW1lKSlcbiAgICAgICAgICAgIGxldCBwcmV2VW5pdFRpbWUgPSBNYXRoLnJvdW5kKGV4dHJhKnRocmVzaG9sZHNbaS0xXVswXSlcbiAgICAgICAgICAgIGlmICh0aHJlc2hvbGRzW2ktMV1bMF0gPT09IHByZXZVbml0VGltZSkge1xuICAgICAgICAgICAgICAgIHRpbWUgKz0gMVxuICAgICAgICAgICAgICAgIHByZXZVbml0VGltZSA9IDBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChNYXRoLmZsb29yKHRpbWUpID4gMSB8fCBNYXRoLmZsb29yKHRpbWUpID09IDApIHtcbiAgICAgICAgICAgICAgICB0ZXh0ID0gdGV4dFBsdXJhbFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGkgPiAxICYmIHByZXZVbml0VGltZSA+IDApIHtcbiAgICAgICAgICAgICAgICBsZXQgcmVtYWluVGV4dCA9IHRocmVzaG9sZHNbaS0xXVsxXVxuICAgICAgICAgICAgICAgIGlmIChwcmV2VW5pdFRpbWUgPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbWFpblRleHQgPSB0aHJlc2hvbGRzW2ktMV1bMl1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGV4dCArPSAnLCAnICsgU3RyaW5nKHByZXZVbml0VGltZSkgKyAnICcgKyByZW1haW5UZXh0XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gU3RyaW5nKE1hdGguZmxvb3IodGltZSkpICsgJyAnICsgdGV4dFxuICAgICAgICB9XG4gICAgICAgIHRpbWUgPSB0aW1lIC8gZGl2aXNvclxuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IGdldFByZXR0eURhdGUgPSAoY3JlYXRlZFVUQykgPT4ge1xuICAgIGNvbnN0IHNlY29uZHMgPSBNYXRoLmZsb29yKChuZXcgRGF0ZSkuZ2V0VGltZSgpLzEwMDApLWNyZWF0ZWRVVENcbiAgICByZXR1cm4gZ2V0UHJldHR5VGltZUxlbmd0aChzZWNvbmRzKSArICcgYWdvJ1xufVxuXG5leHBvcnQgY29uc3QgY3JlYXRlTm90aWZpY2F0aW9uID0gKHtub3RpZmljYXRpb25JZCwgdGl0bGUsIG1lc3NhZ2V9KSA9PiB7XG4gICAgaWYgKGxvY2F0aW9uLnByb3RvY29sLm1hdGNoKC9eaHR0cC8pKSB7XG4gICAgICAgIGNocm9tZS5ydW50aW1lLnNlbmRNZXNzYWdlKHtcbiAgICAgICAgICAgIGFjdGlvbjogJ2NyZWF0ZS1ub3RpZmljYXRpb24nLFxuICAgICAgICAgICAgb3B0aW9uczoge25vdGlmaWNhdGlvbklkLCB0aXRsZSwgbWVzc2FnZX1cbiAgICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgICBjaHJvbWUubm90aWZpY2F0aW9ucy5jcmVhdGUobm90aWZpY2F0aW9uSWQsXG4gICAgICAgICAgICB7dHlwZTogJ2Jhc2ljJywgaWNvblVybDogJy9pY29ucy8xMjgucG5nJyxcbiAgICAgICAgICAgICB0aXRsZSwgbWVzc2FnZX0pXG4gICAgfVxufVxuXG5leHBvcnQgY29uc3QgdXBkYXRlQmFkZ2VVbnNlZW5Db3VudCA9ICgpID0+IHtcbiAgICBpZiAobG9jYXRpb24ucHJvdG9jb2wubWF0Y2goL15odHRwLykpIHtcbiAgICAgICAgY2hyb21lLnJ1bnRpbWUuc2VuZE1lc3NhZ2Uoe1xuICAgICAgICAgICAgYWN0aW9uOiAndXBkYXRlLWJhZGdlJ1xuICAgICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGdldFN1YnNjcmliZWRVc2Vyc193aXRoVW5zZWVuSURzKHVzZXJzVW5zZWVuSURzID0+IHtcbiAgICAgICAgICAgIGxldCB0b3RhbCA9IDBcbiAgICAgICAgICAgIE9iamVjdC52YWx1ZXModXNlcnNVbnNlZW5JRHMpLmZvckVhY2goaWRzID0+IHtcbiAgICAgICAgICAgICAgICB0b3RhbCArPSBpZHMubGVuZ3RoXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgbGV0IHRleHQgPSB0b3RhbC50b1N0cmluZygpXG4gICAgICAgICAgICBpZiAodG90YWwgPT0gMCkgdGV4dCA9ICcnXG4gICAgICAgICAgICBjaHJvbWUuYnJvd3NlckFjdGlvbi5zZXRCYWRnZUJhY2tncm91bmRDb2xvcih7Y29sb3I6IFwicmVkXCJ9KVxuICAgICAgICAgICAgY2hyb21lLmJyb3dzZXJBY3Rpb24uc2V0QmFkZ2VUZXh0KHt0ZXh0OiB0ZXh0fSlcbiAgICAgICAgfSlcbiAgICB9XG59XG4iLCJpbXBvcnQge2dldE9wdGlvbnN9IGZyb20gJy4vc3RvcmFnZS5qcydcblxuY29uc3QgY2xpZW50SUQgPSAnU0V3MXV2UmQ2a3hGRXcnXG5jb25zdCBvYXV0aF9yZWRkaXQgPSAnaHR0cHM6Ly9vYXV0aC5yZWRkaXQuY29tLydcbmNvbnN0IHd3d19yZWRkaXQgPSAnaHR0cHM6Ly93d3cucmVkZGl0LmNvbS8nXG5cbmNvbnN0IE5PX0FVVEggPSAnbm9uZSdcblxuZXhwb3J0IGNvbnN0IGxvb2t1cEl0ZW1zQnlJRCA9IChpZHMsIGF1dGgpID0+IHtcbiAgICBjb25zdCBwYXJhbXMgPSB7aWQ6aWRzLCByYXdfanNvbjoxfVxuICAgIGNvbnN0IHNlYXJjaCA9ICc/JytPYmplY3Qua2V5cyhwYXJhbXMpLm1hcChrID0+IGAke2t9PSR7cGFyYW1zW2tdfWApLmpvaW4oJyYnKVxuXG4gICAgcmV0dXJuIHdpbmRvdy5mZXRjaCguLi5nZXRGZXRjaFBhcmFtcygnYXBpL2luZm8nLCBzZWFyY2gsIGF1dGgpKVxuICAgIC50aGVuKGhhbmRsZUZldGNoRXJyb3JzKVxuICAgIC50aGVuKGdldFJlZGRpdERhdGEpXG4gICAgLmNhdGNoKGNvbnNvbGUubG9nKVxufVxuXG5leHBvcnQgY29uc3QgbG9va3VwSXRlbXNCeVVzZXIgPSAodXNlciwgYWZ0ZXIsIHNvcnQsIHRpbWVTcGFuLCBhdXRoKSA9PiB7XG4gICAgY29uc3QgcGFyYW1zID0ge2xpbWl0OiAxMDAsIHNvcnQsIHJhd19qc29uOjF9XG4gICAgaWYgKGFmdGVyKSBwYXJhbXMuYWZ0ZXIgPSBhZnRlclxuICAgIGlmICh0aW1lU3BhbikgcGFyYW1zLnQgPSB0aW1lU3BhblxuICAgIGNvbnN0IHBhdGggPSBgdXNlci8ke3VzZXJ9L292ZXJ2aWV3Lmpzb25gXG4gICAgY29uc3Qgc2VhcmNoID0gJz8nK09iamVjdC5rZXlzKHBhcmFtcykubWFwKGsgPT4gYCR7a309JHtwYXJhbXNba119YCkuam9pbignJicpXG5cbiAgICByZXR1cm4gd2luZG93LmZldGNoKC4uLmdldEZldGNoUGFyYW1zKHBhdGgsIHNlYXJjaCwgYXV0aCkpXG4gICAgLnRoZW4oaGFuZGxlRmV0Y2hFcnJvcnMpXG4gICAgLnRoZW4oZ2V0UmVkZGl0RGF0YSlcbiAgICAuY2F0Y2goY29uc29sZS5sb2cpXG59XG5cbmV4cG9ydCBjb25zdCBoYW5kbGVGZXRjaEVycm9ycyA9IChyZXNwb25zZSkgPT4ge1xuICAgIGlmICghIHJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IEVycm9yKHJlc3BvbnNlLnN0YXR1c1RleHQpXG4gICAgfVxuICAgIHJldHVybiByZXNwb25zZS5qc29uKClcbn1cblxuZXhwb3J0IGNvbnN0IGdldFJlZGRpdERhdGEgPSAoZGF0YSkgPT4ge1xuICAgIGlmICghIGRhdGEgfHwgISBkYXRhLmRhdGEgfHwgISBkYXRhLmRhdGEuY2hpbGRyZW4pIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoJ3JlZGRpdCBkYXRhIGlzIG5vdCBkZWZpbmVkJylcbiAgICB9XG4gICAgcmV0dXJuIGRhdGEuZGF0YS5jaGlsZHJlblxufVxuXG5leHBvcnQgY29uc3QgZ2V0UmVkZGl0VG9rZW4gPSAoZGF0YSkgPT4ge1xuICAgIGlmICghIGRhdGEgfHwgISBkYXRhLmFjY2Vzc190b2tlbikge1xuICAgICAgICB0aHJvdyBFcnJvcignYWNjZXNzIHRva2VuIGlzIG5vdCBkZWZpbmVkJylcbiAgICB9XG4gICAgcmV0dXJuIGRhdGEuYWNjZXNzX3Rva2VuXG59XG5cbmV4cG9ydCBjb25zdCBnZXRBdXRoID0gKCkgPT4ge1xuICAgIHJldHVybiBnZXRPcHRpb25zKCh1c2Vycywgb3RoZXJzLCBvcHRpb25zKSA9PiB7XG4gICAgICAgIHZhciB1c2VfdGhpc19jbGllbnRJRCA9IGNsaWVudElEXG4gICAgICAgIGlmIChvcHRpb25zLmN1c3RvbV9jbGllbnRpZCkge1xuICAgICAgICAgICAgdXNlX3RoaXNfY2xpZW50SUQgPSBvcHRpb25zLmN1c3RvbV9jbGllbnRpZFxuICAgICAgICAgICAgaWYgKHVzZV90aGlzX2NsaWVudElEID09PSAndGVzdGluZycpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gTk9fQVVUSFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRva2VuSW5pdCA9IHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmFzaWMgJHt3aW5kb3cuYnRvYShgJHt1c2VfdGhpc19jbGllbnRJRH06YCl9YCxcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD11dGYtOCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGJvZHk6IGBncmFudF90eXBlPSR7ZW5jb2RlVVJJQ29tcG9uZW50KCdodHRwczovL29hdXRoLnJlZGRpdC5jb20vZ3JhbnRzL2luc3RhbGxlZF9jbGllbnQnKX0mZGV2aWNlX2lkPURPX05PVF9UUkFDS19USElTX0RFVklDRWBcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB3aW5kb3cuZmV0Y2goJ2h0dHBzOi8vd3d3LnJlZGRpdC5jb20vYXBpL3YxL2FjY2Vzc190b2tlbicsIHRva2VuSW5pdClcbiAgICAgICAgLnRoZW4oaGFuZGxlRmV0Y2hFcnJvcnMpXG4gICAgICAgIC50aGVuKGdldFJlZGRpdFRva2VuKVxuICAgICAgICAudGhlbih0b2tlbiA9PiAoe1xuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBiZWFyZXIgJHt0b2tlbn1gXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKVxuICAgICAgICAuY2F0Y2goY29uc29sZS5sb2cpXG4gICAgfSlcblxufVxuXG4vLyBjb2RlOiBodHRwczovL2dpdGh1Yi5jb20vdG9vbGJveC10ZWFtL3JlZGRpdC1tb2RlcmF0b3ItdG9vbGJveC9ibG9iLzQzNGVjMGJiNzFlYmJhMmZjZjBjYjVlNGNhZDUyOTAzNWExYWU3NDIvZXh0ZW5zaW9uL2RhdGEvYmFja2dyb3VuZC9oYW5kbGVycy93ZWJyZXF1ZXN0LmpzI0wzNFxuLy8gZGlzY3Vzc2lvbjogaHR0cHM6Ly93d3cucmVkZGl0LmNvbS9yL3JlZGRpdGRldi9jb21tZW50cy81amY0eWcvYXBpX25ld19tb2RtYWlsL2RiZm53OTgvXG5leHBvcnQgY29uc3QgZ2V0TG9jYWxBdXRoID0gKCkgPT4ge1xuICAgIHJldHVybiB3aW5kb3cuZmV0Y2goJ2h0dHBzOi8vbW9kLnJlZGRpdC5jb20vbWFpbC9hbGwnKVxuICAgIC50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgIGdldENvb2tpZSh7dXJsOiAnaHR0cHM6Ly9tb2QucmVkZGl0LmNvbScsIG5hbWU6ICd0b2tlbid9KVxuICAgICAgICAudGhlbihjb29raWUgPT4ge1xuICAgICAgICAgICAgaWYgKGNvb2tpZSkge1xuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBpbnZhbGlkIGNoYXJzIGF0IHRoZSBlbmQgcGVyIGRpc2N1c3Npb25cbiAgICAgICAgICAgICAgICBjb25zdCBpbnZhbGlkQ2hhciA9IG5ldyBSZWdFeHAoJ1teQS1aYS16MC05Ky9dLio/JCcpXG4gICAgICAgICAgICAgICAgY29uc3QgYmFzZTY0Q29va2llID0gY29va2llLnZhbHVlLnJlcGxhY2UoaW52YWxpZENoYXIsICcnKVxuICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuRGF0YSA9IGF0b2IoYmFzZTY0Q29va2llKVxuICAgICAgICAgICAgICAgIGNvbnN0IHRva2VucyA9IEpTT04ucGFyc2UodG9rZW5EYXRhKVxuICAgICAgICAgICAgICAgIGlmICgnYWNjZXNzVG9rZW4nIGluIHRva2VucyAmJiB0b2tlbnMuYWNjZXNzVG9rZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXV0aCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgYmVhcmVyICR7dG9rZW5zLmFjY2Vzc1Rva2VufWBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXV0aFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSlcbn1cblxuZXhwb3J0IGNvbnN0IGdldENvb2tpZSA9ICh7dXJsLCBuYW1lfSkgPT4ge1xuICAgIGlmIChsb2NhdGlvbi5wcm90b2NvbC5tYXRjaCgvXmh0dHAvKSkge1xuICAgICAgICByZXR1cm4gYnJvd3Nlci5ydW50aW1lLnNlbmRNZXNzYWdlKHtcbiAgICAgICAgICAgIGFjdGlvbjogJ2dldC1jb29raWUnLFxuICAgICAgICAgICAgb3B0aW9uczoge3VybCwgbmFtZX1cbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmNvb2tpZVxuICAgICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBicm93c2VyLmNvb2tpZXMuZ2V0KHt1cmwsIG5hbWV9KVxuICAgIH1cbn1cblxuY29uc3QgZ2V0RmV0Y2hQYXJhbXMgPSAocGF0aCwgc2VhcmNoLCBhdXRoKSA9PiB7XG4gICAgaWYgKCEgYXV0aCB8fCBhdXRoID09PSBOT19BVVRIKSB7XG4gICAgICAgIGxldCB1cmwgPSB3d3dfcmVkZGl0K3BhdGhcbiAgICAgICAgaWYgKHBhdGggPT09ICdhcGkvaW5mbycpIHtcbiAgICAgICAgICAgIHVybCArPSAnLmpzb24nXG4gICAgICAgIH1cbiAgICAgICAgdXJsICs9IHNlYXJjaFxuICAgICAgICByZXR1cm4gW3VybF1cbiAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB1cmwgPSBvYXV0aF9yZWRkaXQrcGF0aCtzZWFyY2hcbiAgICAgICAgcmV0dXJuIFt1cmwsIGF1dGhdXG4gICAgfVxufVxuXG5leHBvcnQgY29uc3QgZ2V0TG9jYWxPckFwcEF1dGggPSAoKSA9PiB7XG4gICAgcmV0dXJuIGdldExvY2FsQXV0aCgpXG4gICAgLnRoZW4oYXV0aCA9PiB7XG4gICAgICAgIGlmIChhdXRoKSByZXR1cm4gYXV0aFxuICAgICAgICByZXR1cm4gZ2V0QXV0aCgpXG4gICAgfSlcbiAgICAuY2F0Y2goY29uc29sZS5sb2cpXG59XG5cbmV4cG9ydCBjb25zdCBnZXRMb2dnZWRpblVzZXIgPSAoKSA9PiB7XG4gICAgcmV0dXJuIHdpbmRvdy5mZXRjaCgnaHR0cHM6Ly93d3cucmVkZGl0LmNvbS9hcGkvbWUuanNvbicpXG4gICAgLnRoZW4oaGFuZGxlRmV0Y2hFcnJvcnMpXG4gICAgLnRoZW4oZ2V0UmVkZGl0VXNlcm5hbWUpXG4gICAgLmNhdGNoKGNvbnNvbGUubG9nKVxufVxuXG5jb25zdCBnZXRSZWRkaXRVc2VybmFtZSA9IChkYXRhKSA9PiB7XG4gICAgaWYgKCEgZGF0YSB8fCAhIGRhdGEuZGF0YSB8fCAhIGRhdGEuZGF0YS5uYW1lKSB7XG4gICAgICAgIHRocm93IEVycm9yKCdyZWRkaXQgdXNlcm5hbWUgaXMgbm90IGRlZmluZWQnKVxuICAgIH1cbiAgICByZXR1cm4gZGF0YS5kYXRhLm5hbWVcbn1cbiIsImltcG9ydCB7bG9va3VwSXRlbXNCeUlELCBsb29rdXBJdGVtc0J5VXNlciwgZ2V0QXV0aH0gZnJvbSAnLi9yZXF1ZXN0cy5qcydcbmltcG9ydCB7UkVNT1ZFRCwgREVMRVRFRCwgQVBQUk9WRUQsIExPQ0tFRCwgVU5MT0NLRUQsIEVESVRFRCxcbiAgICAgICAgYWRkTG9jYWxTdG9yYWdlSXRlbXMsIGdldExvY2FsU3RvcmFnZUl0ZW1zLFxuICAgICAgICBNQVhfU1lOQ19TVE9SQUdFX0lURU1TX1BFUl9PQkpFQ1QsIE1BWF9TWU5DX1NUT1JBR0VfQ0hBTkdFUyxcbiAgICAgICAgZ2V0T2JqZWN0TmFtZXNGb3JUaGluZyB9IGZyb20gJy4vc3RvcmFnZS5qcydcbmltcG9ydCB7Y3JlYXRlTm90aWZpY2F0aW9uLCB1cGRhdGVCYWRnZVVuc2VlbkNvdW50LCB0cmltRGljdF9ieV9udW1iZXJWYWx1ZWRBdHRyaWJ1dGUsXG4gICAgICAgIGlzVXNlckRlbGV0ZWRJdGVtLCBpc1JlbW92ZWRJdGVtLFxuICAgICAgICBJdGVtRm9yU3RvcmFnZSwgTG9jYWxTdG9yYWdlSXRlbSwgQ2hhbmdlRm9yU3RvcmFnZX0gZnJvbSAnLi9jb21tb24uanMnXG5cblxuY29uc3QgU1VCU0NSSUJFRF9GUk9NX1JFRERJVCA9IDBcbmNvbnN0IFNVQlNDUklCRURfRlJPTV9SRVZFRERJVCA9IDFcbmNvbnN0IFNVQlNDUklCRURfRlJPTV9OQSA9IDJcblxuZXhwb3J0IGNvbnN0IHNldEN1cnJlbnRTdGF0ZUZvcklkID0gKGlkLCBzdWJzY3JpYmVkRnJvbVVSTCwgY2FsbGJhY2sgPSAoKSA9PiB7fSkgPT4ge1xuICAgIGxldCBzdWJzY3JpYmVkRnJvbSA9IFNVQlNDUklCRURfRlJPTV9SRURESVRcbiAgICBpZiAoc3Vic2NyaWJlZEZyb21VUkwubWF0Y2goL15odHRwczpcXC9cXC93d3cucmV2ZWRkaXQuY29tLykpIHtcbiAgICAgICAgc3Vic2NyaWJlZEZyb20gPSBTVUJTQ1JJQkVEX0ZST01fUkVWRURESVRcbiAgICB9XG4gICAgY2hyb21lLnN0b3JhZ2Uuc3luYy5nZXQobnVsbCwgZnVuY3Rpb24gKHN0b3JhZ2UpIHtcbiAgICAgICAgZ2V0QXV0aCgpXG4gICAgICAgIC50aGVuKChhdXRoKSA9PiB7XG4gICAgICAgICAgICBjaGVja0ZvckNoYW5nZXNfdGhpbmdfYnlJZChbaWRdLCAnb3RoZXInLCBmYWxzZSwgYXV0aCwgc3RvcmFnZSwgc3Vic2NyaWJlZEZyb20sIHt9LCBjYWxsYmFjaylcbiAgICAgICAgfSlcbiAgICB9KVxufVxuXG5cbmV4cG9ydCBjb25zdCBjaGVja0ZvckNoYW5nZXMgPSAoKSA9PiB7XG4gICAgY2hyb21lLnN0b3JhZ2Uuc3luYy5nZXQobnVsbCwgZnVuY3Rpb24gKHN0b3JhZ2UpIHtcbiAgICAgICAgdmFyIHVzZXJzID0gT2JqZWN0LmtleXMoc3RvcmFnZS51c2VyX3N1YnNjcmlwdGlvbnMpXG4gICAgICAgIHZhciBvdGhlciA9IE9iamVjdC5rZXlzKHN0b3JhZ2Uub3RoZXJfc3Vic2NyaXB0aW9ucylcbiAgICAgICAgaWYgKHVzZXJzLmxlbmd0aCB8fCBvdGhlci5sZW5ndGgpIHtcbiAgICAgICAgICAgIGdldEF1dGgoKVxuICAgICAgICAgICAgLnRoZW4oKGF1dGgpID0+IHtcbiAgICAgICAgICAgICAgICBjaGVja0ZvckNoYW5nZXNfb3RoZXIoYXV0aCwgc3RvcmFnZSlcbiAgICAgICAgICAgICAgICBjaGVja0ZvckNoYW5nZXNfdXNlcnModXNlcnMsIGF1dGgsIHN0b3JhZ2UpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfSlcbn1cblxuZnVuY3Rpb24gY2hlY2tGb3JDaGFuZ2VzX3VzZXJzKHVzZXJzLCBhdXRoLCBzdG9yYWdlKSB7XG4gICAgaWYgKHVzZXJzLmxlbmd0aCkge1xuICAgICAgICBjb25zdCB1c2VyID0gdXNlcnNbMF1cblxuICAgICAgICBsb29rdXBJdGVtc0J5VXNlcih1c2VyLCAnJywgJ25ldycsICcnLCBhdXRoKVxuICAgICAgICAudGhlbihpdGVtcyA9PiB7XG4gICAgICAgICAgICBpZiAoISBpdGVtcykgcmV0dXJuIC8vIGhhbmRsZSBleHBlY3RlZCBlcnJvcnNcbiAgICAgICAgICAgIHZhciBpZHMgPSBbXVxuICAgICAgICAgICAgY29uc3QgaXRlbUxvb2t1cCA9IHt9XG4gICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgIGlkcy5wdXNoKGl0ZW0uZGF0YS5uYW1lKVxuICAgICAgICAgICAgICAgIGl0ZW1Mb29rdXBbaXRlbS5kYXRhLm5hbWVdID0gaXRlbS5kYXRhXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgY2hlY2tGb3JDaGFuZ2VzX3RoaW5nX2J5SWQoaWRzLCB1c2VyLCB0cnVlLCBhdXRoLCBzdG9yYWdlLCBTVUJTQ1JJQkVEX0ZST01fTkEsIGl0ZW1Mb29rdXAsICgpID0+IHtcbiAgICAgICAgICAgICAgICBjaGVja0ZvckNoYW5nZXNfdXNlcnModXNlcnMuc2xpY2UoMSksIGF1dGgsIHN0b3JhZ2UpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgIH1cbn1cblxuZnVuY3Rpb24gY2hlY2tGb3JDaGFuZ2VzX290aGVyKGF1dGgsIHN0b3JhZ2UpIHtcbiAgICBjb25zdCBpZHMgPSBPYmplY3Qua2V5cyhzdG9yYWdlLm90aGVyX3N1YnNjcmlwdGlvbnMpXG4gICAgaWYgKGlkcy5sZW5ndGgpIHtcbiAgICAgICAgY2hlY2tGb3JDaGFuZ2VzX3RoaW5nX2J5SWQoaWRzLCAnb3RoZXInLCBmYWxzZSwgYXV0aCwgc3RvcmFnZSwgU1VCU0NSSUJFRF9GUk9NX05BKVxuICAgIH1cbn1cblxuZnVuY3Rpb24gY2hlY2tGb3JDaGFuZ2VzX3RoaW5nX2J5SWQgKGlkcywgdGhpbmcsIGlzVXNlciwgYXV0aCwgc3RvcmFnZSwgc3Vic2NyaWJlZEZyb20sIGl0ZW1Mb29rdXAgPSB7fSwgY2FsbGJhY2sgPSAoKSA9PiB7fSkge1xuICAgIGxvb2t1cEl0ZW1zQnlJRChpZHMsIGF1dGgpXG4gICAgLnRoZW4oaXRlbXMgPT4ge1xuICAgICAgICBpZiAoISBpdGVtcykgcmV0dXJuIC8vIGhhbmRsZSBleHBlY3RlZCBlcnJvcnNcbiAgICAgICAgY29uc3QgcmVtb3ZhbF9zdGF0dXMgPSBzdG9yYWdlLm9wdGlvbnMucmVtb3ZhbF9zdGF0dXNcbiAgICAgICAgY29uc3QgbG9ja19zdGF0dXMgPSBzdG9yYWdlLm9wdGlvbnMubG9ja19zdGF0dXNcblxuICAgICAgICBjb25zdCBrZXlzID0gZ2V0T2JqZWN0TmFtZXNGb3JUaGluZyh0aGluZywgaXNVc2VyKVxuXG4gICAgICAgIGNvbnN0IGtub3duX3JlbW92ZWQgPSBzdG9yYWdlW2tleXNbJ3JlbW92ZWQnXV0gfHwge31cbiAgICAgICAgY29uc3Qga25vd25fYXBwcm92ZWQgPSBzdG9yYWdlW2tleXNbJ2FwcHJvdmVkJ11dIHx8IHt9XG4gICAgICAgIGNvbnN0IGtub3duX2xvY2tlZCA9IHN0b3JhZ2Vba2V5c1snbG9ja2VkJ11dIHx8IHt9XG4gICAgICAgIGNvbnN0IGtub3duX3VubG9ja2VkID0gc3RvcmFnZVtrZXlzWyd1bmxvY2tlZCddXSB8fCB7fVxuICAgICAgICBjb25zdCBjaGFuZ2VzID0gc3RvcmFnZVtrZXlzWydjaGFuZ2VzJ11dIHx8IFtdXG4gICAgICAgIGlmICghIGlzVXNlcikge1xuICAgICAgICAgICAgaXRlbUxvb2t1cCA9IHt9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVtb3ZlZCA9IFtdLCBhcHByb3ZlZCA9IFtdLCBsb2NrZWQgPSBbXSwgdW5sb2NrZWQgPSBbXVxuICAgICAgICBpdGVtcy5mb3JFYWNoKGl0ZW1XcmFwID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBpdGVtV3JhcC5kYXRhXG4gICAgICAgICAgICBpZiAoISBpc1VzZXIpIHtcbiAgICAgICAgICAgICAgICBpdGVtTG9va3VwW2l0ZW0ubmFtZV0gPSBpdGVtXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNSZW1vdmVkSXRlbShpdGVtKSkge1xuICAgICAgICAgICAgICAgIHJlbW92ZWQucHVzaChpdGVtLm5hbWUpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGFwcHJvdmVkLnB1c2goaXRlbS5uYW1lKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGl0ZW0ubG9ja2VkKSB7XG4gICAgICAgICAgICAgICAgbG9ja2VkLnB1c2goaXRlbS5uYW1lKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB1bmxvY2tlZC5wdXNoKGl0ZW0ubmFtZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLy8gbWFyayBpdGVtcyB0aGF0IGRvIG5vdCBleGlzdCBpbiBhcnJheXNcbiAgICAgICAgLy8gY2hhbmdlIGhhcHBlbnMgaWY6XG4gICAgICAgIC8vICAgICAgdHJhY2tpbmcgcmVtb3ZhbHMgJiYgaXRlbSBpcyByZW1vdmVkXG4gICAgICAgIC8vICAgICAgdHJhY2tpbmcgcmVtb3ZhbHMgJiYgaXRlbSB3YXMgaW4gcmVtb3ZlZCwgbm93IGluIGFwcHJvdmVkXG4gICAgICAgIGNvbnN0IG5ld0xvY2FsU3RvcmFnZUl0ZW1zID0ge31cblxuICAgICAgICBjb25zdCBjaGFuZ2VUeXBlcyA9IFtdXG4gICAgICAgIGxldCBudW1fY2hhbmdlcyA9IDBcbiAgICAgICAgZ2V0TG9jYWxTdG9yYWdlSXRlbXModGhpbmcsIGlzVXNlcilcbiAgICAgICAgLnRoZW4oZXhpc3RpbmdMb2NhbFN0b3JhZ2VJdGVtcyA9PiB7XG4gICAgICAgICAgICBpZiAocmVtb3ZhbF9zdGF0dXMudHJhY2spIHtcbiAgICAgICAgICAgICAgICBudW1fY2hhbmdlcyArPSBtYXJrQ2hhbmdlcyhyZW1vdmVkLCBSRU1PVkVELCAnbW9kIHJlbW92ZWQnLCBrbm93bl9yZW1vdmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcHJvdmVkLCBBUFBST1ZFRCwgJ2FwcHJvdmVkJywga25vd25fYXBwcm92ZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlcywgaXRlbUxvb2t1cCwgcmVtb3ZhbF9zdGF0dXMubm90aWZ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0xvY2FsU3RvcmFnZUl0ZW1zLCBjaGFuZ2VUeXBlcywgaXNVc2VyLCBzdWJzY3JpYmVkRnJvbSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ0xvY2FsU3RvcmFnZUl0ZW1zKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGxvY2tfc3RhdHVzLnRyYWNrKSB7XG4gICAgICAgICAgICAgICAgbnVtX2NoYW5nZXMgKz0gbWFya0NoYW5nZXMobG9ja2VkLCBMT0NLRUQsICdsb2NrZWQnLCBrbm93bl9sb2NrZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5sb2NrZWQsIFVOTE9DS0VELCAndW5sb2NrZWQnLCBrbm93bl91bmxvY2tlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VzLCBpdGVtTG9va3VwLCBsb2NrX3N0YXR1cy5ub3RpZnksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TG9jYWxTdG9yYWdlSXRlbXMsIGNoYW5nZVR5cGVzLCBpc1VzZXIsIHN1YnNjcmliZWRGcm9tLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nTG9jYWxTdG9yYWdlSXRlbXMpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChudW1fY2hhbmdlcyAmJiBjaGFuZ2VUeXBlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjcmVhdGVOb3RpZmljYXRpb24oXG4gICAgICAgICAgICAgICAgICAgIHtub3RpZmljYXRpb25JZDogdGhpbmcsXG4gICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGhpbmcsXG4gICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgJHtudW1fY2hhbmdlc30gbmV3IFske2NoYW5nZVR5cGVzLmpvaW4oJywgJyl9XSBhY3Rpb25zLCBjbGljayB0byB2aWV3YH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaHJvbWUuc3RvcmFnZS5zeW5jLnNldCh7W2tleXNbJ3JlbW92ZWQnXV06IHRyaW1EaWN0X2J5X251bWJlclZhbHVlZEF0dHJpYnV0ZShrbm93bl9yZW1vdmVkLCBNQVhfU1lOQ19TVE9SQUdFX0lURU1TX1BFUl9PQkpFQ1QsICdjJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW2tleXNbJ2FwcHJvdmVkJ11dOiB0cmltRGljdF9ieV9udW1iZXJWYWx1ZWRBdHRyaWJ1dGUoa25vd25fYXBwcm92ZWQsIE1BWF9TWU5DX1NUT1JBR0VfSVRFTVNfUEVSX09CSkVDVCwgJ2MnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBba2V5c1snbG9ja2VkJ11dOiB0cmltRGljdF9ieV9udW1iZXJWYWx1ZWRBdHRyaWJ1dGUoa25vd25fbG9ja2VkLCBNQVhfU1lOQ19TVE9SQUdFX0lURU1TX1BFUl9PQkpFQ1QsICdjJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW2tleXNbJ3VubG9ja2VkJ11dOiB0cmltRGljdF9ieV9udW1iZXJWYWx1ZWRBdHRyaWJ1dGUoa25vd25fdW5sb2NrZWQsIE1BWF9TWU5DX1NUT1JBR0VfSVRFTVNfUEVSX09CSkVDVCwgJ2MnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBba2V5c1snY2hhbmdlcyddXTogY2hhbmdlcy5zbGljZSgtTUFYX1NZTkNfU1RPUkFHRV9DSEFOR0VTKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHVwZGF0ZUJhZGdlVW5zZWVuQ291bnQoKVxuICAgICAgICAgICAgICAgIGFkZExvY2FsU3RvcmFnZUl0ZW1zKG5ld0xvY2FsU3RvcmFnZUl0ZW1zLCB0aGluZywgaXNVc2VyLCBjYWxsYmFjaylcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfSlcbn1cblxuLy8gbmV3TG9jYWxTdG9yYWdlSXRlbXMgb3BlcmF0ZXMgYXMgYSByZXR1cm4gdmFsdWVcbmZ1bmN0aW9uIG1hcmtDaGFuZ2VzIChhbGVydF9jdXJyZW50X2xpc3QsIGFsZXJ0X3R5cGUsIGFsZXJ0X3RleHQsIGFsZXJ0X2tub3duX2hhc2gsXG4gICAgICAgICAgICAgICAgICAgICAgbm9ybWFsX2N1cnJlbnRfbGlzdCwgbm9ybWFsX3R5cGUsIG5vcm1hbF90ZXh0LCBub3JtYWxfa25vd25faGFzaCxcbiAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VzLCBpdGVtTG9va3VwLCBub3RpZnksIG5ld0xvY2FsU3RvcmFnZUl0ZW1zLCBjaGFuZ2VUeXBlcyxcbiAgICAgICAgICAgICAgICAgICAgICBpc1VzZXIsIHN1YnNjcmliZWRGcm9tLCBleGlzdGluZ0xvY2FsU3RvcmFnZUl0ZW1zKSB7XG4gICAgY29uc3QgYWxlcnRfdW5zZWVuX2lkcyA9IFtdLFxuICAgICAgICAgIG5vcm1hbF91bnNlZW5faWRzID0gW10sXG4gICAgICAgICAgYWxlcnRfdXNlckRlbGV0ZWRfdW5zZWVuX2lkcyA9IFtdLFxuICAgICAgICAgIG5vdyA9IE1hdGguZmxvb3IobmV3IERhdGUoKS8xMDAwKVxuXG4gICAgYWxlcnRfY3VycmVudF9saXN0LmZvckVhY2gobmFtZSA9PiB7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSBpdGVtTG9va3VwW25hbWVdXG4gICAgICAgIC8vIDEuIGluIHRoZSBjYXNlIG9mIGEgbm9uLXVzZXJwYWdlLXRyYWNrZWQgKGlzVXNlcj1mYWxzZSkgcmVtb3ZlZCBjb21tZW50LCBkb24ndCBvdmVyd3JpdGUgbG9jYWwgc3RvcmFnZSBiL2NcbiAgICAgICAgLy8gaWYgaXQgd2VyZSBvdmVyd3JpdHRlbiwgYm9keSB3b3VsZCBhcHBlYXIgb24gaGlzdG9yeSBwYWdlIGFzIFtyZW1vdmVkXVxuICAgICAgICAvLyAyLiBpbiB0aGUgY2FzZSBvZiB1c2VycGFnZSB0cmFja2luZyAoaXNVc2VyPXRydWUpLCBvbmx5IG5lZWQgdG8gc2F2ZSB0aGUgdGV4dCBpbiBsb2NhbCBzdG9yYWdlXG4gICAgICAgIC8vIHdoZW4gdGhlcmUgaXMgYSBjaGFuZ2UuIHVzZXIgcGFnZSBsb29rdXAgKGl0ZW1Mb29rdXApIHdpbGwgaGF2ZSBvcmlnaW5hbCB0ZXh0XG4gICAgICAgIGlmICghIGlzVXNlciAmJiAhIGV4aXN0aW5nTG9jYWxTdG9yYWdlSXRlbXNbbmFtZV0pIHtcbiAgICAgICAgICAgIG5ld0xvY2FsU3RvcmFnZUl0ZW1zW25hbWVdID0gbmV3IExvY2FsU3RvcmFnZUl0ZW0oe2l0ZW06IGl0ZW0sIG9ic2VydmVkX3V0Yzogbm93fSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoISAobmFtZSBpbiBhbGVydF9rbm93bl9oYXNoKSkge1xuICAgICAgICAgICAgLy8gbWFya1Vuc2VlbiBpcyBhbHdheXMgdHJ1ZSBleGNlcHQgd2hlbiBzdWJzY3JpYmluZyB2aWEgYSByZWRkaXQgKG5vdCByZXZlZGRpdCkgcGFnZSB0byBhIG5ldyBJRCBmb3IgJ290aGVyJ1xuICAgICAgICAgICAgLy8gc3Vic2NyaXB0aW9ucy4gQXMgbG9uZyBhcyB0aGUgaXRlbSBpcyBub3QgJ3JlbW92ZWQnLCB0aGUgY3VycmVudCBzdGF0ZSBpcyBzdG9yZWQgYXMgJ3NlZW4nICh1bnNlZW49ZmFsc2UpLlxuICAgICAgICAgICAgLy8gSXQgaXMgYXNzdW1lZCB0aGF0IHVzZXJzIHN1YnNjcmliaW5nIGZyb20gcmV2ZWRkaXQgcGFnZXMgd2lsbCBhbHJlYWR5IGhhdmUgc2VlbiBhbGwgdGhlIGN1cnJlbnQgbW9kIGFjdGlvbnMsXG4gICAgICAgICAgICAvLyBhbmQgdXNlcnMgc3Vic2NyaWJpbmcgZnJvbSBhIHJlZGRpdCBwYWdlIHdpbGwgYWxyZWFkeSBrbm93IGFib3V0IGxvY2tlZCBpdGVtc1xuICAgICAgICAgICAgbGV0IG1hcmtVbnNlZW4gPSB0cnVlXG4gICAgICAgICAgICBpZiAoKHN1YnNjcmliZWRGcm9tID09PSBTVUJTQ1JJQkVEX0ZST01fUkVERElUICYmIGFsZXJ0X3R5cGUgIT09IFJFTU9WRUQpIHx8XG4gICAgICAgICAgICAgICAgIHN1YnNjcmliZWRGcm9tID09PSBTVUJTQ1JJQkVEX0ZST01fUkVWRURESVQpIHtcbiAgICAgICAgICAgICAgICBtYXJrVW5zZWVuID0gZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFsZXJ0X2tub3duX2hhc2hbbmFtZV0gPSBuZXcgSXRlbUZvclN0b3JhZ2UoaXRlbS5jcmVhdGVkX3V0YywgbWFya1Vuc2VlbilcbiAgICAgICAgICAgIGRlbGV0ZSBub3JtYWxfa25vd25faGFzaFtuYW1lXVxuICAgICAgICAgICAgaWYgKG1hcmtVbnNlZW4pIHtcbiAgICAgICAgICAgICAgICBsZXQgYWxlcnRfdHlwZV92YXIgPSBhbGVydF90eXBlXG4gICAgICAgICAgICAgICAgaWYgKGlzVXNlckRlbGV0ZWRJdGVtKGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0X3R5cGVfdmFyID0gREVMRVRFRFxuICAgICAgICAgICAgICAgICAgICBhbGVydF91c2VyRGVsZXRlZF91bnNlZW5faWRzLnB1c2gobmFtZSlcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhbGVydF91bnNlZW5faWRzLnB1c2gobmFtZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2hhbmdlcy5wdXNoKG5ldyBDaGFuZ2VGb3JTdG9yYWdlKHtpZDogbmFtZSwgb2JzZXJ2ZWRfdXRjOiBub3csIGNoYW5nZV90eXBlOiBhbGVydF90eXBlX3Zhcn0pKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzVXNlcikge1xuICAgICAgICAgICAgICAgIG5ld0xvY2FsU3RvcmFnZUl0ZW1zW25hbWVdID0gbmV3IExvY2FsU3RvcmFnZUl0ZW0oe2l0ZW06IGl0ZW0sIG9ic2VydmVkX3V0Yzogbm93fSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pXG4gICAgbm9ybWFsX2N1cnJlbnRfbGlzdC5mb3JFYWNoKG5hbWUgPT4ge1xuICAgICAgICBjb25zdCBpdGVtID0gaXRlbUxvb2t1cFtuYW1lXVxuICAgICAgICAvLyBzYXZlIG9yaWdpbmFsIHRleHQgZm9yIGFsbCBub24tdXNlcnBhZ2UtdHJhY2tlZCBpdGVtcyBzaW5jZSBjb21tZW50IHRleHQgY2FuIGRpc2FwcGVhclxuICAgICAgICBpZiAoISBpc1VzZXIgJiYgISBleGlzdGluZ0xvY2FsU3RvcmFnZUl0ZW1zW25hbWVdKSB7XG4gICAgICAgICAgICBuZXdMb2NhbFN0b3JhZ2VJdGVtc1tuYW1lXSA9IG5ldyBMb2NhbFN0b3JhZ2VJdGVtKHtpdGVtOiBpdGVtLCBvYnNlcnZlZF91dGM6IG5vd30pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5hbWUgaW4gYWxlcnRfa25vd25faGFzaCkge1xuICAgICAgICAgICAgbm9ybWFsX2tub3duX2hhc2hbbmFtZV0gPSBuZXcgSXRlbUZvclN0b3JhZ2UoaXRlbS5jcmVhdGVkX3V0YywgdHJ1ZSlcbiAgICAgICAgICAgIGRlbGV0ZSBhbGVydF9rbm93bl9oYXNoW25hbWVdXG5cbiAgICAgICAgICAgIGNoYW5nZXMucHVzaChuZXcgQ2hhbmdlRm9yU3RvcmFnZSh7aWQ6IG5hbWUsIG9ic2VydmVkX3V0Yzogbm93LCBjaGFuZ2VfdHlwZTogbm9ybWFsX3R5cGV9KSlcbiAgICAgICAgICAgIG5vcm1hbF91bnNlZW5faWRzLnB1c2gobmFtZSlcblxuICAgICAgICAgICAgbmV3TG9jYWxTdG9yYWdlSXRlbXNbbmFtZV0gPSBuZXcgTG9jYWxTdG9yYWdlSXRlbSh7aXRlbTogaXRlbSwgb2JzZXJ2ZWRfdXRjOiBub3d9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbm9ybWFsX2tub3duX2hhc2hbbmFtZV0gPSBuZXcgSXRlbUZvclN0b3JhZ2UoaXRlbS5jcmVhdGVkX3V0YywgZmFsc2UpXG4gICAgICAgIH1cbiAgICB9KVxuICAgIGNvbnN0IG51bV9jaGFuZ2VzID0gYWxlcnRfdW5zZWVuX2lkcy5sZW5ndGggKyBub3JtYWxfdW5zZWVuX2lkcy5sZW5ndGggKyBhbGVydF91c2VyRGVsZXRlZF91bnNlZW5faWRzLmxlbmd0aFxuICAgIGlmIChub3RpZnkgJiYgbnVtX2NoYW5nZXMpIHtcbiAgICAgICAgaWYgKGFsZXJ0X3Vuc2Vlbl9pZHMubGVuZ3RoKSBjaGFuZ2VUeXBlcy5wdXNoKGFsZXJ0X3RleHQpXG4gICAgICAgIGlmIChhbGVydF91c2VyRGVsZXRlZF91bnNlZW5faWRzLmxlbmd0aCkgY2hhbmdlVHlwZXMucHVzaCgndXNlciBkZWxldGVkJylcbiAgICAgICAgaWYgKG5vcm1hbF91bnNlZW5faWRzLmxlbmd0aCkgY2hhbmdlVHlwZXMucHVzaChub3JtYWxfdGV4dClcbiAgICB9XG4gICAgcmV0dXJuIG51bV9jaGFuZ2VzXG59XG4iLCJpbXBvcnQge2FscGhhTG93ZXJTb3J0LCBnb1RvT3B0aW9ucywgZ2V0RnVsbElEc0Zyb21VUkx9IGZyb20gJy4vY29tbW9uLmpzJ1xuaW1wb3J0IHtnZXRTdWJzY3JpYmVkVXNlcnNfd2l0aFNlZW5BbmRVbnNlZW5JRHMsXG4gICAgICAgIHN1YnNjcmliZVVzZXIsIHVuc3Vic2NyaWJlVXNlciwgc3Vic2NyaWJlSWQsIHVuc3Vic2NyaWJlSWQsXG4gICAgICAgIG1hcmtUaGluZ0FzU2Vlbiwgc2V0U3RvcmFnZVVwZGF0ZUJhZGdlLCBtYXJrRXZlcnl0aGluZ0FzU2Vlbn0gZnJvbSAnLi9zdG9yYWdlLmpzJ1xuaW1wb3J0IHtzZXRDdXJyZW50U3RhdGVGb3JJZH0gZnJvbSAnLi9tb25pdG9yaW5nLmpzJ1xuXG5cbnBvcHVsYXRlUG9wdXAoKVxuXG5cbmZ1bmN0aW9uIHBvcHVsYXRlUG9wdXAoKSB7XG4gICAgJCgnI3BvcHVwJykuZW1wdHkoKVxuICAgICQoYCA8ZGl2IGlkPVwic3dpdGNoZXNcIj48L2Rpdj5cbiAgICAgICAgPGRpdiBpZD1cInJyLWlucHV0XCI+XG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBpZD1cInVzZXJcIiBwbGFjZWhvbGRlcj1cInVzZXJuYW1lXCI+XG4gICAgICAgICAgICA8YnV0dG9uIGlkPVwicnItZ29cIj5nbzwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBzdHlsZT1cImNsZWFyOmJvdGhcIj48L2Rpdj5cbiAgICAgICAgPGRpdj48YSBjbGFzcz1cImJsdWUtbGlua1wiIGlkPVwiZ28tdG8tb3B0aW9uc1wiIGhyZWY9XCIvc3JjL29wdGlvbnMuaHRtbFwiPm9wdGlvbnM8L2E+PC9kaXY+XG4gICAgICAgIDxkaXYgc3R5bGU9XCJjbGVhcjpib3RoXCI+PC9kaXY+XG4gICAgICAgIDxkaXY+PGEgaHJlZj1cIiNcIiBjbGFzcz1cImNsZWFyLW5vdGlmaWNhdGlvbnMgYmx1ZS1saW5rXCI+Y2xlYXIgbm90aWZpY2F0aW9uczwvYT48L2Rpdj5cbiAgICAgICAgPGRpdiBzdHlsZT1cImNsZWFyOmJvdGhcIj48L2Rpdj5cbiAgICBgKS5hcHBlbmRUbygnI3BvcHVwJylcblxuICAgICQoJy5jbGVhci1ub3RpZmljYXRpb25zJykuY2xpY2soKCkgPT4ge1xuICAgICAgICBtYXJrRXZlcnl0aGluZ0FzU2VlbigpXG4gICAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgICBwb3B1bGF0ZVBvcHVwKClcbiAgICAgICAgfSlcbiAgICB9KVxuICAgICQoJyNnby10by1vcHRpb25zJykuY2xpY2soZ29Ub09wdGlvbnMpO1xuXG4gICAgZ2V0U3Vic2NyaWJlZFVzZXJzX3dpdGhTZWVuQW5kVW5zZWVuSURzKCh1c2Vycywgc3RvcmFnZSkgPT4ge1xuICAgICAgICBjb25zdCBvdGhlciA9IHVzZXJzWydvdGhlciddXG4gICAgICAgIGRlbGV0ZSB1c2Vyc1snb3RoZXInXVxuICAgICAgICBpZiAoT2JqZWN0LmtleXModXNlcnMpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICQoJzxkaXYgY2xhc3M9XCJudW0tdW5zZWVuXCI+IyB1bnNlZW48L2Rpdj4nKS5hcHBlbmRUbygnI3BvcHVwJylcbiAgICAgICAgfVxuICAgICAgICBPYmplY3Qua2V5cyh1c2VycykuZm9yRWFjaCh1c2VyID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHVuc2VlbklEcyA9IHVzZXJzW3VzZXJdWyd1bnNlZW4nXVxuICAgICAgICAgICAgZGlzcGxheVVzZXJJblBvcHVwKHVzZXIsIHVuc2VlbklEcyk7XG4gICAgICAgIH0pXG4gICAgICAgICQoJzxocj4nKS5hcHBlbmRUbygnI3BvcHVwJylcbiAgICAgICAgZGlzcGxheU90aGVySW5Qb3B1cChvdGhlclsndW5zZWVuJ10sIE9iamVjdC5rZXlzKHN0b3JhZ2Uub3RoZXJfc3Vic2NyaXB0aW9ucykubGVuZ3RoKVxuICAgICAgICAkKCc8aHI+JykuYXBwZW5kVG8oJyNwb3B1cCcpXG4gICAgICAgICQoJzxhIHRhcmdldD1cIl9ibGFua1wiIGNsYXNzPVwiYmx1ZS1saW5rXCIgaWQ9XCJnby10by1oaXN0b3J5XCIgaHJlZj1cIi9zcmMvaGlzdG9yeS5odG1sXCI+aGlzdG9yeTwvYT4nKVxuICAgICAgICAgICAgLmNsaWNrKG9wZW5BbmRDbG9zZSkud3JhcCgnPGRpdiBpZD1cImJvdHRvbVwiPicpLnBhcmVudCgpLmFwcGVuZFRvKCcjcG9wdXAnKVxuICAgIH0pXG5cblxuICAgIGNocm9tZS5zdG9yYWdlLnN5bmMuZ2V0KG51bGwsIHN5bmNTdG9yYWdlID0+IHtcbiAgICAgICAgLypjb25zb2xlLmxvZygnc3luYyBzdG9yYWdlOicpXG4gICAgICAgIE9iamVjdC5rZXlzKHN5bmNTdG9yYWdlKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhrZXkpXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhzeW5jU3RvcmFnZVtrZXldKVxuICAgICAgICB9KSovXG5cbiAgICAgICAgY2hyb21lLnRhYnMucXVlcnkoe2FjdGl2ZTogdHJ1ZSwgY3VycmVudFdpbmRvdzogdHJ1ZX0sICh0YWJzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB1cmwgPSB0YWJzWzBdLnVybFxuICAgICAgICAgICAgaWYgKHVybCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IFtwb3N0SUQsIGNvbW1lbnRJRCwgdXNlcl0gPSBnZXRGdWxsSURzRnJvbVVSTCh1cmwpXG4gICAgICAgICAgICAgICAgaWYgKGNvbW1lbnRJRCkge1xuICAgICAgICAgICAgICAgICAgICBzaG93VG9nZ2xlU3Vic2NyaWJlKHtjb21tZW50OiBjb21tZW50SUR9LCBzeW5jU3RvcmFnZSwgdXJsKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocG9zdElEKSB7XG4gICAgICAgICAgICAgICAgICAgIHNob3dUb2dnbGVTdWJzY3JpYmUoe3Bvc3Q6IHBvc3RJRH0sIHN5bmNTdG9yYWdlLCB1cmwpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgICAgICAgICAgICAgIHNob3dUb2dnbGVTdWJzY3JpYmUoe3VzZXI6IHVzZXJ9LCBzeW5jU3RvcmFnZSwgdXJsKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9KTtcblxuICAgIHZhciAkaW5wdXQgPSAkKCcjdXNlcicpO1xuICAgICRpbnB1dC5mb2N1cygpO1xuICAgICRpbnB1dC5iaW5kKFwiZW50ZXJLZXlcIixmdW5jdGlvbigpIHtcbiAgICAgICAgZ29Vc2VyKCk7XG4gICAgfSk7XG4gICAgJGlucHV0LmtleXVwKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYoZS5rZXlDb2RlID09IDEzKSAkKHRoaXMpLnRyaWdnZXIoXCJlbnRlcktleVwiKTtcbiAgICB9KTtcblxuICAgICQoJyNyci1nbycpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICBnb1VzZXIoKTtcbiAgICB9KTtcbn1cblxuY29uc3Qgb3BlbkFuZENsb3NlID0gKGV2KSA9PiB7XG4gICAgd2luZG93Lm9wZW4oZXYudGFyZ2V0LmhyZWYpXG4gICAgd2luZG93LmNsb3NlKClcbn1cblxuZnVuY3Rpb24gc2hvd1RvZ2dsZVN1YnNjcmliZSh7cG9zdDogcG9zdCwgY29tbWVudDogY29tbWVudCwgdXNlcjogdXNlcn0sIHN0b3JhZ2UsIHVybCkge1xuICAgIGxldCBpZCA9ICcnXG4gICAgbGV0IHR5cGUgPSAnJ1xuICAgIGxldCBzdWJGbiA9IHVuZGVmaW5lZCwgdW5zdWJGbiA9IHVuZGVmaW5lZFxuICAgIGlmIChjb21tZW50KSB7XG4gICAgICAgIGlkID0gY29tbWVudFxuICAgICAgICB0eXBlID0gJ2NvbW1lbnQnXG4gICAgfSBlbHNlIGlmIChwb3N0KSB7XG4gICAgICAgIGlkID0gcG9zdFxuICAgICAgICB0eXBlID0gJ3Bvc3QnXG4gICAgfSBlbHNlIGlmICh1c2VyKSB7XG4gICAgICAgIGlkID0gdXNlclxuICAgICAgICB0eXBlID0gJ3VzZXInXG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGlmIChjb21tZW50IHx8IHBvc3QpIHtcbiAgICAgICAgc3ViRm4gPSBzdWJzY3JpYmVJZFxuICAgICAgICB1bnN1YkZuID0gdW5zdWJzY3JpYmVJZFxuICAgIH0gZWxzZSB7XG4gICAgICAgIHN1YkZuID0gc3Vic2NyaWJlVXNlclxuICAgICAgICB1bnN1YkZuID0gdW5zdWJzY3JpYmVVc2VyXG4gICAgfVxuICAgIGNvbnN0IGlucHV0SWQgPSBgdG9nZ2xlLSR7dHlwZX1gXG4gICAgY29uc3QgdGV4dExhYmVsSWQgPSBgdGV4dC1sYWJlbC0ke3R5cGV9YFxuICAgICQoJyNzd2l0Y2hlcycpLmFwcGVuZChgXG4gICAgICAgIDxzcGFuIGNsYXNzPVwidGV4dC1sYWJlbFwiIGlkPVwiJHt0ZXh0TGFiZWxJZH1cIj48c3BhbiBjbGFzcz1cInVuXCI+dW48L3NwYW4+c3Vic2NyaWJlZCAke3R5cGV9PC9zcGFuPlxuICAgICAgICA8ZGl2IGNsYXNzPVwic3dpdGNoXCI+XG4gICAgICAgICAgICA8aW5wdXQgaWQ9XCIke2lucHV0SWR9XCIgY2xhc3M9XCJjbW4tdG9nZ2xlIGNtbi10b2dnbGUtcm91bmQtZmxhdFwiIHR5cGU9XCJjaGVja2JveFwiPlxuICAgICAgICAgICAgPGxhYmVsIGZvcj1cIiR7aW5wdXRJZH1cIj48L2xhYmVsPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBzdHlsZT1cImNsZWFyOmJvdGhcIj48L2Rpdj5cbiAgICBgKVxuICAgIGNvbnN0ICR0ZXh0TGFiZWwgPSAkKGAjJHt0ZXh0TGFiZWxJZH1gKVxuICAgIGNvbnN0ICRpbnB1dCA9ICQoYCMke2lucHV0SWR9YClcblxuICAgIGZ1bmN0aW9uIHRvZ2dsZUxhYmVsVGV4dEFuZENvbG9yICgpIHtcbiAgICAgICAgaWYgKCRpbnB1dC5wcm9wKCdjaGVja2VkJykpIHtcbiAgICAgICAgICAgICR0ZXh0TGFiZWwuYWRkQ2xhc3MoJ3NldCcpXG4gICAgICAgICAgICAkdGV4dExhYmVsLmZpbmQoJy51bicpLmNzcygndmlzaWJpbGl0eScsICdoaWRkZW4nKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJHRleHRMYWJlbC5yZW1vdmVDbGFzcygnc2V0JylcbiAgICAgICAgICAgICR0ZXh0TGFiZWwuZmluZCgnLnVuJykuY3NzKCd2aXNpYmlsaXR5JywgJycpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAkaW5wdXQuY2hhbmdlKChlKSA9PiB7XG4gICAgICAgIGxldCBmbiA9IHN1YkZuXG4gICAgICAgIGlmICghICRpbnB1dC5wcm9wKCdjaGVja2VkJykpIGZuID0gdW5zdWJGblxuICAgICAgICBmbihpZCwgKCkgPT4ge1xuICAgICAgICAgICAgY2hyb21lLnJ1bnRpbWUuc2VuZE1lc3NhZ2Uoe2FjdGlvbjogJ3VwZGF0ZS1iYWRnZSd9KVxuICAgICAgICAgICAgdG9nZ2xlTGFiZWxUZXh0QW5kQ29sb3IoKVxuICAgICAgICAgICAgaWYgKGZuID09PSBzdWJGbiAmJiAoY29tbWVudCB8fCBwb3N0KSkge1xuICAgICAgICAgICAgICAgIC8vIG1hcmtpbmcgc3RhdGUgc2VwYXJhdGVseSBmcm9tIHRoZSBzdWJzY3JpYmUgZnVuY3Rpb24gYi9jXG4gICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIG9uZSBvZiB0aGUgZm9sbG93aW5nIGhhcHBlbnM6XG4gICAgICAgICAgICAgICAgLy8gICAoMSkgY2hhaW5pbmcgdGhpcyBtYWtlcyB0aGUgZnVuY3Rpb24gYSBsaXR0bGUgc2xvd1xuICAgICAgICAgICAgICAgIC8vICAgKDIpIG5vdCBjaGFpbmluZyBpdCB3aWxsIG1lc3MgdXAgc3luYyBzdGF0ZSB3cml0ZXNcbiAgICAgICAgICAgICAgICBzZXRDdXJyZW50U3RhdGVGb3JJZChpZCwgdXJsLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHBvcHVsYXRlUG9wdXAoKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHBvcHVsYXRlUG9wdXAoKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH0pXG4gICAgaWYgKChwb3N0IHx8IGNvbW1lbnQpICYmIGlkIGluIHN0b3JhZ2Uub3RoZXJfc3Vic2NyaXB0aW9ucykge1xuICAgICAgICAkaW5wdXQucHJvcCgnY2hlY2tlZCcsIHRydWUpXG4gICAgICAgIHRvZ2dsZUxhYmVsVGV4dEFuZENvbG9yKClcbiAgICB9XG4gICAgaWYgKHVzZXIgJiYgdXNlciBpbiBzdG9yYWdlLnVzZXJfc3Vic2NyaXB0aW9ucykge1xuICAgICAgICAkaW5wdXQucHJvcCgnY2hlY2tlZCcsIHRydWUpXG4gICAgICAgIHRvZ2dsZUxhYmVsVGV4dEFuZENvbG9yKClcbiAgICB9XG4gICAgJHRleHRMYWJlbC5jbGljaygoZSkgPT4ge1xuICAgICAgICAkaW5wdXQucHJvcCgnY2hlY2tlZCcsICEkaW5wdXQucHJvcCgnY2hlY2tlZCcpKS5jaGFuZ2UoKVxuICAgIH0pXG59XG5cbmZ1bmN0aW9uIGdvVXNlcigpIHtcbiAgICB2YXIgdXNlciA9ICQoJyN1c2VyJykudmFsKCkudHJpbSgpO1xuICAgIGlmICh1c2VyKSB7XG4gICAgICAgIGNocm9tZS50YWJzLmNyZWF0ZSh7dXJsOiBgaHR0cHM6Ly93d3cucmV2ZWRkaXQuY29tL3VzZXIvJHt1c2VyfWB9KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRpc3BsYXlVc2VySW5Qb3B1cCh1c2VyLCB1bnNlZW4pIHtcbiAgICBsZXQgcGFyYW1zID0gJydcbiAgICBpZiAodW5zZWVuLmxlbmd0aCkge1xuICAgICAgICBwYXJhbXMgPSBgP3Nob3c9JHt1bnNlZW4uam9pbignLCcpfSZyZW1vdmFsX3N0YXR1cz1hbGxgXG4gICAgfVxuICAgIGNvbnN0IHVybCA9IGBodHRwczovL3d3dy5yZXZlZGRpdC5jb20vdXNlci8ke3VzZXJ9JHtwYXJhbXN9YFxuICAgIGFkZFVuc2VlbkxpbmsodXNlciwgdHJ1ZSwgYCR7dW5zZWVuLmxlbmd0aH1gLCB1cmwpXG59XG5cbmZ1bmN0aW9uIGRpc3BsYXlPdGhlckluUG9wdXAodW5zZWVuLCB0b3RhbCkge1xuICAgIGxldCB1cmwgPSAnL3NyYy9vdGhlci5odG1sJ1xuICAgIGlmICh1bnNlZW4ubGVuZ3RoKSB7XG4gICAgICAgIHVybCA9IGBodHRwczovL3d3dy5yZXZlZGRpdC5jb20vaW5mbz9pZD0ke3Vuc2Vlbi5qb2luKCcsJyl9JnJlbW92YWxfc3RhdHVzPWFsbGBcbiAgICB9XG4gICAgYWRkVW5zZWVuTGluaygnb3RoZXInLCBmYWxzZSwgYCR7dW5zZWVuLmxlbmd0aH0gLyAke3RvdGFsfWAsIHVybClcbn1cblxuXG5mdW5jdGlvbiBhZGRVbnNlZW5MaW5rKHRoaW5nLCBpc1VzZXIsIHVuc2Vlbl9zdHIsIHVybCkge1xuICAgIGNvbnN0ICRkaXYgPSAkKGA8ZGl2PjxzcGFuIGNsYXNzPVwidW5zZWVuXCI+JHt1bnNlZW5fc3RyfSA8L3NwYW4+IDwvZGl2PmApXG4gICAgY29uc3QgJGEgPSAkKGA8YSBjbGFzcz1cImJsdWUtbGlua1wiIHRhcmdldD1cIl9ibGFua1wiIGhyZWY9XCIke3VybH1cIj4ke3RoaW5nfTwvYT5gKVxuICAgICRhLmNsaWNrKChlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgICBjaHJvbWUuc3RvcmFnZS5zeW5jLmdldChudWxsLCAoc3RvcmFnZSkgPT4ge1xuICAgICAgICAgICAgbWFya1RoaW5nQXNTZWVuKHN0b3JhZ2UsIHRoaW5nLCBpc1VzZXIpXG4gICAgICAgICAgICBzZXRTdG9yYWdlVXBkYXRlQmFkZ2Uoc3RvcmFnZSlcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgICAgICAgY2hyb21lLnRhYnMuY3JlYXRlKHt1cmw6IGUudGFyZ2V0LmhyZWZ9KVxuICAgICAgICAgICAgICAgIHdpbmRvdy5jbG9zZSgpIC8vIGNsb3NlcyB0aGUgcG9wdXAgd2hpY2ggcGVyc2lzdHMgaW4gRkZcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfSlcbiAgICAkYS5hcHBlbmRUbygkZGl2KVxuICAgICRkaXYuYXBwZW5kVG8oJyNwb3B1cCcpXG59XG4iXSwic291cmNlUm9vdCI6IiJ9